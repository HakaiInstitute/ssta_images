{"version":3,"sources":["webpack://ssta/./src/buoyviz/0b936d79280ee3bd@6101.js"],"names":["_1","md","_curDate","timeFormat","time1","Date","_3","_4","d3","timeDay","offset","utcDay","_endPlayDate","_style","html","width","ns","_7","brushedData","_8","_time1","Scrubber","datesToPlot","newNum","delay","initial","autoplay","loop","format","d","_10","_colorView","Inputs","radio","value","x","_newNum","_chart","colorView","focusHeight","margin","xMHW","stack","brushedDataMHW","colors","x1MHW","drag","brusedAllDates","sstaColors","height","svg","create","attr","style","y","scaleLinear","domain","range","bottom","top","xAxis","g","call","axisBottom","ticks","tickSizeOuter","append","chartData","selectAll","data","join","i","get","key","date","toISOString","substring","bandwidth","datum","node","x2","scaleBand","left","right","padding","enter","_drag","focus","endPlayDate","$0","$1","on","event","select","this","raise","isBelowMax","isAboveMin","ind","bisect","invert","update","_15","_debug1","_focus","dateExtent","monthlyGrouped","x1","scaleTime","brush","brushX","extent","brushed","brushended","defaultSelection","utcYear","previousS0","previousS1","gb","selection","s","property","map","utcMonth","ceil","dispatch","move","_legTitle","_leg","Plot","legend","marginLeft","marginRight","backgroundColor","color","fontSize","fontWeight","type","pivot","reverse","label","_20","alldays","table","_21","clickedSite","_22","limitsDelayed","_alldays","siteClicked","out","forEach","day","isData","find","undefined","push","station","sst","NaN","ssta","_24","_25","console","log","_26","_27","_28","_lineChart","yMaxDomainToUse","dateForLabel","yValueForLabel","buoyClicked","dateForLabelVal","taLabel","length","HWlineChart","plot","marginTop","className","marks","dot","stroke","fill","ruleX","y1","y2","max","text","SSTAlineChart","_siteClicked","_ind","dates","indexOf","_today","_start","today","async","_limitsDelayed","Promises","_limitsDelayedMHW","_38","_focusHeight","_margin","_x1","alldates","_x1MHW","brusedAllDatesMHW","_xAxis","_y","_brushedDataMHW","filter","_brusedAllDates","timeMonth","_brusedAllDatesMHW","_x","_xMHW","_stack","cats","keys","_brushedData","_sstaColors","scaleDiverging","interpolateRdBu","_brushHandle","arc","_arc","innerRadius","outerRadius","startAngle","endAngle","Math","PI","_data","dataSsta","Object","slice","_ns","classList","_datesToPlot","datesCopy","_dates","_datesCopy","_dateExtent","_61","buoys","siteClickeds","long_name","pk","_62","_siteClickeds","concat","_currentValue","toFixed","_yMaxDomainToUse","floor","_yValueForLabel","_dateForLabel","_dateForLabelVal","_buoyClicked","_70","buoyDailyData","_clickedSite","_colors","Map","_buoys","short_name","lat","lon","_HWsForDate","result_time","_dayBeforeStart","b","assign","fistDate","setDate","getDate","_buoyDailyData","dayBeforeStart","fetch","then","resp","json","seas","diff","thresh","diffStrong","diffExtreme","diffSevere","category","_height","_colorMHW","scaleOrdinal","_opacityMHW","_numFormat","_timeFormat","_d3","require","_p","_hwEvent","_alldates","_allmonths","mhwBarData","Set","_92","monthlyTots","_monthlyTots","allmonths","month","t","sum","_monthlyGrouped","groups","values","_cats","_groups","_mhwBarData","FileAttachment","raw","reduce","a","replace","none","Moderate","Strong","Extreme","Severe","_tt","_99","_100","dataSstaOld","_dataSsta","Method","response","_dataSstaOld","define","runtime","observer","main","module","toString","url","fileAttachments","URL","mimeType","builtin","name","variable","G","_","input","M","generator","child1","define1","import"],"mappings":"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","file":"bundle.12917a4e2f5111e962c3.js","sourcesContent":["import define1 from \"./41364653f34651d0@442.js\";\n\nfunction _1(md){return(\nmd`# Marine heatwave charts and brush/player\n\nused to embed as a module in https://cioospacific.ca/applied-data/marine-heat-monitor/\n\ncurl -o bs.tgz \"https://api.observablehq.com/d/0b936d79280ee3bd.tgz?v=3\"\n\ntar -C src/buoyviz -xvzf bs.tgz\n\nThis notebook includes\n- loading the buoy data via api\n- data brush chart (loads from github)\n- scrubber for playing the animation in the website\n- charts for the buoys\n\n### Change log\nJune 22 2022\n- replaced the player notebook with scrubber, as font awesome used in the player was not playing well with webpack.\n\n\n`\n)}\n\nfunction _curDate(md,timeFormat,time1){return(\nmd`# ${timeFormat(new Date(time1))}`\n)}\n\nfunction _3(md){return(\nmd`date to stop playing. Ideally this should be a only a couple days in the past since data is usually updated each day`\n)}\n\nfunction _4(d3){return(\nd3.timeDay.offset(d3.utcDay(), -2)\n)}\n\nfunction _endPlayDate(d3){return(\nd3.timeDay.offset(d3.utcDay(), -2)\n)}\n\nfunction _style(html,width,ns){return(\nhtml`\n<style>\n\n  /* match the scrubber's width to our race chart */\n   // input[type=\"range\"][name=\"i\"] {\n   //   width: ${width - 90}px !important;\n   // }\n\n.${ns}{\n  font-size: 16px;  \n}\n\n\nbutton, input, textarea {\n    accent-color: #007490;\n}\n\n#butt input, textarea {\n    accent-color: green;\n}\n.brushFilter {\nbackground-color: #606060;\ncolor: \"#e0f5ee\"\n}\n\n.currentDot{\nbackground-color: none;\ncolor: \"#e0f5ee\"\n}\n\n.axisWhite line{\n  stroke: #e0f5ee;\n}\n\n.axisWhite path{\n  stroke: #e0f5ee;\n}\n\n// .selection{\n// fill: #d9d9d9;\n// fill-opacity: .6;\n// stroke: none;\n// }\n\n.radio {\n\n  color: deeppink;\n}\n  .button {\ncolor:lightgrey;\n  border: 0;\n  background: transparent;\n  box-sizing: border-box;\n  width: 100;\n  height: 74px;\n  border-color: transparent transparent transparent lightgrey;\n  transition: 100ms all ease;\n  cursor: pointer;\n  border-style: solid;\n  border-width: 37px 0 37px 60px;\ntransform: scale(.7);\n}\n.paused {\n  border-style: double;\n  border-width: 0px 0 0px 60px;\n}\n.button:hover {\n  border-color: transparent transparent transparent #8f8f8f;\n}\n// input[type=\"range\"][name=\"input\"] {\n// accent-color:blue\n\n// }\n\n#dot{\n accent-color:black\n}\n.fa-xs {\n    font-size: 5.75em;\n}\n\n\n\n</style>\n`\n)}\n\nfunction _7(brushedData){return(\nbrushedData\n)}\n\nfunction _8(md){return(\nmd`play`\n)}\n\nfunction _time1(Scrubber,datesToPlot,newNum){return(\nScrubber(datesToPlot, {\n  width: 0,\n  delay: 100,\n  initial: newNum,\n  autoplay: false,\n  loop: false,\n  format: (d) => \"\"\n})\n)}\n\nfunction _10(md){return(\nmd`anomaly or category button`\n)}\n\nfunction _colorView(Inputs,html){return(\nInputs.radio([\"Anomaly\", \"Heatwaves\"], {\n  value: \"Anomaly\",\n  // label: \"Choose category to view\",\n  format: (x) => html`<span style=\"color: white\">${x}`\n})\n)}\n\nfunction _newNum(){return(\n0\n)}\n\nfunction _chart(colorView,focusHeight,d3,width,margin,xMHW,stack,brushedDataMHW,colors,x1MHW,time1,x,drag,brusedAllDates,brushedData,sstaColors)\n{\n  if (colorView === \"Heatwaves\") {\n    const height = focusHeight;\n    const svg = d3\n      .create(\"svg\")\n      .attr(\"viewBox\", [0, 0, width, height])\n      .style(\"display\", \"block\");\n\n    const y = d3\n      .scaleLinear()\n      .domain([0, 1])\n      .range([height - margin.bottom, margin.top + 5]);\n\n    const xAxis = (g, xMHW, height) =>\n      g\n        .attr(\"transform\", `translate(0,${height - margin.bottom})`)\n        .call(\n          d3\n            .axisBottom(xMHW)\n            .ticks(width / 80)\n            .tickSizeOuter(0)\n        )\n        .style(\"stroke\", \"#e0f5ee\");\n\n    svg.append(\"g\").call(xAxis, xMHW, height).attr(\"class\", \"axisWhite\");\n\n    const chartData = stack(brushedDataMHW);\n    // svg.append(\"path\")\n    const groups = svg\n      .append(\"g\")\n      // Each layer of the stack goes in a group\n      // the group contains that layer for all countries\n      .selectAll(\"g\")\n      .data(chartData)\n      .join(\"g\")\n      // rects in the same layer will all have the same color, so we can put it on the group\n      // we can use the key on the layer's array to set the color\n      .style(\"fill\", (d, i) => {\n        // console.log(d);\n        return colors.get(d.key);\n      });\n    // .attr(\"d\", area(x, y.copy().range([focusHeight - margin.bottom, 4])));\n\n    groups\n      .selectAll(\"rect\")\n      // Now we place the rects, which are the children of the layer array\n      .data((d) => d)\n      .join(\"rect\")\n      .attr(\"x\", (d) => {\n        return x1MHW(new Date(d.data.date).toISOString().substring(0, 10));\n      })\n      .attr(\"y\", (d) => y(d[1]))\n      .attr(\"height\", (d) => y(d[0]) - y(d[1]))\n      .attr(\"width\", x1MHW.bandwidth());\n\n    const recordLine = svg\n      .append(\"line\")\n      .datum([\n        {\n          date: time1,\n          value: 1\n        }\n      ])\n      .attr(\"x1\", (d) => {\n        return x(time1);\n      })\n      .attr(\"x2\", (d) => x(time1))\n      .attr(\"y2\", y(1))\n      .attr(\"y1\", y(0))\n      .attr(\"fill\", \"none\")\n      .attr(\"stroke\", \"deeppink\")\n      .attr(\"stoke-width\", 1.5)\n      .attr(\"stroke-linejoin\", \"round\");\n    // .attr(\"stroke-dasharray\", \"10 10\");\n    // .attr(\"stroke-opacity\", 0.8);\n\n    const circles = svg\n      .selectAll(\"circle\")\n      .data([\n        {\n          date: time1,\n          value: 1\n        }\n      ])\n      .join(\"circle\")\n      .attr(\"cx\", (d) => {\n        return x(d.date);\n      })\n      .attr(\"cy\", (d) => y(0.98))\n      .attr(\"r\", 7)\n      .attr(\"fill\", (d) => \"deeppink\")\n      .attr(\"stroke\", (d) => \"deeppink\")\n      .call(drag);\n\n    return svg.node();\n  } else {\n    // anomaly chart\n\n    const height = focusHeight;\n    const svg = d3\n      .create(\"svg\")\n      .attr(\"viewBox\", [0, 0, width, height])\n      .style(\"display\", \"block\");\n\n    const y = d3\n      .scaleLinear()\n      .domain([0, 1])\n      .range([height - margin.bottom, margin.top + 5]);\n\n    const xAxis = (g, x, height) =>\n      g\n        .attr(\"transform\", `translate(0,${height - margin.bottom})`)\n        .call(\n          d3\n            .axisBottom(x)\n            .ticks(width / 80)\n            .tickSizeOuter(0)\n        )\n        .style(\"stroke\", \"#e0f5ee\");\n\n    svg.append(\"g\").call(xAxis, x, height).attr(\"class\", \"axisWhite\");\n\n    const x2 = d3\n      .scaleBand()\n      .range([margin.left, width - margin.right], 0.01)\n      .padding(0.01)\n      .domain(brusedAllDates);\n\n    // svg.append(\"path\")\n    const bars = svg\n      .selectAll(\"rect\")\n      .data(brushedData)\n      .enter()\n      .append(\"rect\")\n      .attr(\"x\", (d) => x2(d.date.toISOString().substring(0, 10)))\n      .attr(\"y\", (d) => {\n        return y(1);\n      })\n      .attr(\"width\", (d) => x2.bandwidth())\n      .attr(\"height\", (d) => y(0) - y(1))\n      .attr(\"fill\", (d) => sstaColors(d.value));\n\n    const recordLine = svg\n      .append(\"line\")\n      .datum([\n        {\n          date: time1,\n          value: 1\n        }\n      ])\n      .attr(\"x1\", (d) => {\n        // console.log(d);\n        return x(time1);\n      })\n      .attr(\"x2\", (d) => x(time1))\n      .attr(\"y2\", y(1))\n      .attr(\"y1\", y(0))\n      .attr(\"fill\", \"none\")\n      .attr(\"stroke\", \"deeppink\")\n      .attr(\"stoke-width\", 1.5)\n      .attr(\"stroke-linejoin\", \"round\");\n    // .attr(\"stroke-dasharray\", \"10 10\");\n    // .attr(\"stroke-opacity\", 0.8);\n\n    const circles = svg\n      .selectAll(\"circle\")\n      .data([\n        {\n          date: time1,\n          value: 1\n        }\n      ])\n      .join(\"circle\")\n      .attr(\"cx\", (d) => {\n        return x(d.date);\n      })\n      .attr(\"cy\", (d) => y(0.98))\n      .attr(\"r\", 7)\n      .attr(\"fill\", (d) => \"deeppink\")\n      .attr(\"stroke\", (d) => \"deeppink\")\n      .call(drag);\n    return svg.node();\n  }\n  // return svg.node();\n}\n\n\nfunction _drag(d3,x,focus,endPlayDate,datesToPlot,$0,$1)\n{\n  function dragstarted(event, d) {\n    d3.select(this).raise().attr(\"stroke\", \"black\");\n  }\n\n  function dragged(event, d) {\n    let isBelowMax = event.x > x(+focus[0]);\n    let isAboveMin = event.x < x(+endPlayDate);\n    // mutable debug = new Date(\"2022-04-08\");\n    // console.log(d3.timeDay.offset(today, -1));\n\n    if (isBelowMax && isAboveMin) {\n      d3.select(this).attr(\"cx\", (d.x = event.x));\n      // console.log(event.x, event.dx);\n\n      const ind = d3.bisect(datesToPlot, +x.invert(event.x));\n      // mutable debug = ind;\n      $0.value = ind; // place ind we need to move the scrubber to\n      $1.update(ind);\n    }\n\n    // .attr(\"cy\", (d.y = event.y));\n  }\n\n  function dragended(event, d) {\n    d3.select(this).attr(\"stroke\", null);\n  }\n\n  return d3\n    .drag()\n    .on(\"start\", dragstarted)\n    .on(\"drag\", dragged)\n    .on(\"end\", dragended);\n}\n\n\nfunction _15(focus){return(\nfocus\n)}\n\nfunction _debug1(){return(\nnull\n)}\n\nfunction _focus(colorView,d3,width,focusHeight,dateExtent,margin,xAxis,stack,monthlyGrouped,colors,x1,y,data,sstaColors,$0)\n{\n  if (colorView === \"Heatwaves\") {\n    const svg = d3\n      .create(\"svg\")\n      .attr(\"viewBox\", [0, 0, width, focusHeight])\n      .style(\"display\", \"block\");\n\n    const x = d3\n      .scaleTime()\n      .domain(dateExtent)\n      .range([margin.left, width - margin.right]);\n\n    const brush = d3\n      .brushX()\n      .extent([\n        [margin.left, 0.5],\n        [width - margin.right, focusHeight - margin.bottom + 0.5]\n      ])\n      .on(\"brush\", brushed)\n      .on(\"end\", brushended);\n\n    const defaultSelection = [\n      x(d3.utcYear.offset(x.domain()[1], -1)),\n      x.range()[1]\n    ];\n\n    svg.append(\"g\").call(xAxis, x, focusHeight).attr(\"class\", \"axisWhite\");\n    let previousS0, previousS1;\n\n    const chartData = stack(monthlyGrouped);\n\n    const groups = svg\n      .append(\"g\")\n      // Each layer of the stack goes in a group\n      // the group contains that layer for all countries\n      .selectAll(\"g\")\n      .data(chartData)\n      .join(\"g\")\n      // rects in the same layer will all have the same color, so we can put it on the group\n      // we can use the key on the layer's array to set the color\n      .style(\"fill\", (d, i) => {\n        // console.log(d.key);\n        return colors.get(d.key);\n      });\n    // .attr(\"d\", area(x, y.copy().range([focusHeight - margin.bottom, 4])));\n\n    groups\n      .selectAll(\"rect\")\n      // Now we place the rects, which are the children of the layer array\n      .data((d) => d)\n      .join(\"rect\")\n      .attr(\"x\", (d) => {\n        // console.log(d.data.date);\n        return x1(new Date(d.data.date).toISOString().substring(0, 10));\n      })\n      .attr(\"y\", (d) => y(d[1]))\n      .attr(\"height\", (d) => y(d[0]) - y(d[1]))\n      .attr(\"width\", x1.bandwidth());\n\n    const gb = svg.append(\"g\").call(brush);\n    gb.call(brush.move, defaultSelection);\n\n    function brushed({ selection }) {\n      if (selection) {\n        // console.log(\"fire1\");\n        var s = selection || x.range();\n\n        svg.property(\"value\", selection.map(x.invert, x).map(d3.utcMonth.ceil));\n        svg.dispatch(\"input\");\n\n        if (((s[1] - s[0]) / width) * 120 > 30) {\n          gb.call(brush.move, [previousS0, previousS1]);\n          return;\n        }\n        previousS0 = s[0];\n        previousS1 = s[1];\n      }\n    }\n\n    function brushended({ selection }) {\n      if (!selection) {\n        gb.call(brush.move, [defaultSelection]);\n      }\n    }\n    return svg.node();\n\n    /////\n  } else {\n    const svg = d3\n      .create(\"svg\")\n      .attr(\"viewBox\", [0, 0, width, focusHeight])\n      .style(\"display\", \"block\");\n\n    const x = d3\n      .scaleTime()\n      .domain(dateExtent)\n      .range([margin.left, width - margin.right]);\n\n    const brush = d3\n      .brushX()\n      .extent([\n        [margin.left, 0.5],\n        [width - margin.right, focusHeight - margin.bottom + 0.5]\n      ])\n      .on(\"brush\", brushed)\n      .on(\"end\", brushended);\n\n    const defaultSelection = [\n      x(d3.utcYear.offset(x.domain()[1], -1)),\n      x.range()[1]\n    ];\n\n    svg.append(\"g\").call(xAxis, x, focusHeight).attr(\"class\", \"axisWhite\");\n    let previousS0, previousS1;\n    // svg.append(\"path\")\n    const bars = svg\n      .selectAll(\"rect\")\n      .data(data)\n      .enter()\n      .append(\"rect\")\n      .attr(\"x\", (d) => x1(d.date.toISOString().substring(0, 10)))\n      .attr(\"y\", (d) => {\n        return y(1);\n      })\n      .attr(\"width\", (d) => x1.bandwidth())\n      .attr(\"height\", (d) => y(0) - y(1))\n      .attr(\"fill\", (d) => sstaColors(d.value));\n    // .attr(\"d\", area(x, y.copy().range([focusHeight - margin.bottom, 4])));\n\n    const gb = svg.append(\"g\").call(brush);\n    gb.call(brush.move, defaultSelection);\n\n    function brushed({ selection }) {\n      // mutable debug1 = selection;\n      if (selection) {\n        // console.log(\"fire1\");\n        var s = selection || x.range();\n\n        svg.property(\"value\", selection.map(x.invert, x).map(d3.utcMonth.ceil));\n        svg.dispatch(\"input\");\n\n        if (\n          ((s[1] - s[0]) / width) * 120 > 30 ||\n          ((s[1] - s[0]) / width) * 120 < 2\n        ) {\n          gb.call(brush.move, [previousS0, previousS1]);\n          return;\n        }\n        previousS0 = s[0];\n        previousS1 = s[1];\n      }\n    }\n\n    function brushended({ selection }) {\n      if (!selection) {\n        $0.value = defaultSelection;\n        gb.call(brush.move, [previousS0, previousS1]); // changed from defaultSelection so that a single click doesn't mess things up\n      }\n    }\n\n    return svg.node();\n  }\n}\n\n\nfunction _legTitle(md,colorView){return(\nmd` ${\n  colorView === \"Anomaly\" ? \"Sea surface temperature anomaly\" : \" \"\n}`\n)}\n\nfunction _leg(colorView,Plot)\n{\n  return colorView === \"Anomaly\"\n    ? Plot.legend({\n        marginLeft: 10,\n        marginRight: 10,\n\n        style: {\n          backgroundColor: \"#000000\",\n          color: \"#e0f5ee\",\n          fontSize: \"16px\",\n          fontWeight: \"normal\"\n        },\n        color: {\n          type: \"diverging\",\n          domain: [-4, 4],\n          pivot: 0,\n          reverse: true,\n          legend: true,\n          label: \"\"\n        }\n      })\n    : Plot.legend({\n        color: {\n          type: \"categorical\",\n          domain: [\"No heatwave\", \"Moderate\", \"Strong\", \"Severe\", \"Extreme\"],\n          range: [\"lightblue\", \"#FEDB67\", \"#f26722\", \"#cd3728\", \"#7E1416\"] // use the \"accent\" scheme\n        },\n        style: {\n          backgroundColor: \"#000000\",\n          color: \"#e0f5ee\",\n          fontSize: \"16px\",\n          fontWeight: \"normal\"\n        }\n      });\n}\n\n\nfunction _20(Inputs,alldays){return(\nInputs.table(alldays)\n)}\n\nfunction _21(clickedSite){return(\nclickedSite\n)}\n\nfunction _22(clickedSite,limitsDelayed){return(\nnew Date(clickedSite[0].date) < new Date(limitsDelayed[1])\n)}\n\nfunction _alldays(d3,focus,clickedSite,siteClicked)\n{\n  const alldays = d3.timeDay\n    .range(new Date(focus[0]), focus[1])\n    .map((d) => d.toISOString().substring(0, 10));\n  const out = [];\n  alldays.forEach((day, i) => {\n    let isData = clickedSite.find((d) => +d.date === +new Date(day));\n\n    isData === undefined\n      ? out.push({\n          station: siteClicked,\n          sst: NaN,\n          ssta: NaN,\n          date: day\n        })\n      : out.push(isData);\n  });\n\n  return out;\n}\n\n\nfunction _24(alldays){return(\nalldays\n)}\n\nfunction _25(alldays){return(\nconsole.log(new Date(alldays[0]))\n)}\n\nfunction _26(clickedSite){return(\nconsole.log(clickedSite[0].date)\n)}\n\nfunction _27(clickedSite,alldays){return(\n+clickedSite[0].date === +new Date(alldays[0])\n)}\n\nfunction _28(clickedSite,alldays){return(\nclickedSite.find((d) => +d.date === +new Date(alldays[0]))\n)}\n\nfunction _lineChart(alldays,Plot,limitsDelayed,yMaxDomainToUse,time1,d3,dateForLabel,yValueForLabel,buoyClicked,colors,dateForLabelVal,colorView,md)\n{\n  const noData = \"No data during time period selected\";\n  const taLabel = alldays.length === 0 ? \"\" : \"Temperature anomaly (°C)\";\n  const HWlineChart = Plot.plot({\n    x: {\n      domain: [limitsDelayed[0], limitsDelayed[1]]\n    },\n    y: {\n      label: \"↑ SST (°C)\",\n      domain: [0, yMaxDomainToUse]\n    },\n    style: {\n      backgroundColor: \"#000000\",\n      color: \"#e0f5ee\",\n      // fontFamily: \"system-ui\",\n      fontSize: 10\n      // overflow: \"visible\"\n    },\n    height: 500,\n    marginTop: 20,\n    className: \"hwclass\",\n    // y: {\n    //   nice: true\n    // },\n    // x: {\n    //   nice: true\n    // },\n    marks: [\n      Plot.dot(alldays, {\n        x: \"date\",\n        y: \"sst\",\n        stroke: \"category\",\n        fill: \"category\"\n      }),\n      // Plot.line(clickedSite, {\n      //   x: \"date\",\n      //   y: \"sst\",\n      //   stroke: \"#ccc\",\n      //   curve: \"step\",\n      //   strokeWidth: 0.5\n      // }),\n      // vertical rule to mark date/time of event\n      Plot.ruleX([time1], {\n        stroke: \"white\",\n        y1: 0,\n        y2: d3.max(alldays, (d) => d.sst)\n      }),\n      Plot.text(\n        [\n          {\n            x: dateForLabel,\n            y: yValueForLabel,\n            text: buoyClicked\n          }\n        ],\n        {\n          x: \"x\",\n          y: \"y\",\n          text: \"text\",\n          fontSize: 16\n        }\n      )\n    ],\n    color: {\n      domain: [\"none\", \"Moderate\", \"Strong\", \"Severe\", \"Extreme\"],\n      range: [\n        colors.get(\"none\"),\n        colors.get(\"Moderate\"),\n        colors.get(\"Strong\"),\n        colors.get(\"Severe\"),\n        colors.get(\"Extreme\")\n      ]\n      // legend: true\n    },\n\n    width: 500,\n    height: 300\n    // marginBottom: 70,\n    // label: buoyClicked\n    // title: \"some stie\"\n  });\n\n  const SSTAlineChart = Plot.plot({\n    x: {\n      domain: [limitsDelayed[0], limitsDelayed[1]]\n    },\n    y: {\n      label: \"↑ SST (°C)\",\n      domain: [0, yMaxDomainToUse]\n    },\n    style: {\n      backgroundColor: \"#000000\",\n      color: \"#e0f5ee\",\n      // fontFamily: \"system-ui\",\n      fontSize: 10\n      // overflow: \"visible\"\n    },\n    height: 500,\n    marginTop: 20,\n    className: \"hwclass\",\n    // y: {\n    //   nice: true\n    // },\n    // x: {\n    //   nice: true\n    // },\n    marks: [\n      Plot.dot(alldays, {\n        x: \"date\",\n        y: \"sst\",\n        stroke: \"ssta\",\n        fill: \"ssta\"\n      }),\n      // Plot.line(clickedSite, {\n      //   x: \"date\",\n      //   y: \"sst\",\n      //   stroke: \"#ccc\",\n      //   curve: \"step\",\n      //   strokeWidth: 0.5\n      // }),\n      // vertical rule to mark date/time of event\n      Plot.ruleX([time1], {\n        stroke: \"white\",\n        y1: 0,\n        y2: d3.max(alldays, (d) => d.sst)\n      }),\n      Plot.text(\n        [\n          {\n            x: dateForLabel,\n            y: yValueForLabel,\n            text: buoyClicked\n          }\n        ],\n        {\n          x: \"x\",\n          y: \"y\",\n          text: \"text\",\n          fontSize: 16\n        }\n      ),\n      Plot.text(\n        [\n          {\n            x: dateForLabelVal,\n            y: yValueForLabel,\n            text: taLabel\n          }\n        ],\n        {\n          x: \"x\",\n          y: \"y\",\n          text: \"text\",\n          fontSize: 10\n        }\n      )\n      // Plot.text(\n      //   [\n      //     {\n      //       x: dateForLabelVal,\n      //       y: yValueForLabel - 1,\n      //       text: currentValue\n      //     }\n      //   ],\n      //   {\n      //     x: \"x\",\n      //     y: \"y\",\n      //     text: \"text\",\n      //     fontSize: 10\n      //   }\n      // )\n    ],\n    color: {\n      type: \"diverging\",\n      domain: [-4, 4],\n      pivot: 0,\n      reverse: true\n      // legend: true,\n      // label: \"SSTA (°C) →\"\n    },\n\n    width: 500,\n    height: 300\n    // marginBottom: 70,\n    // label: buoyClicked\n    // title: \"some stie\"\n  });\n  if (alldays !== null) {\n    return colorView === \"Anomaly\" ? SSTAlineChart : HWlineChart;\n  } else {\n    return md``;\n  }\n}\n\n\nfunction _siteClicked(){return(\n16\n)}\n\nfunction _ind(dates,time1){return(\ndates.indexOf(time1)\n)}\n\nfunction _today(d3){return(\nd3.timeDay.offset(d3.utcDay(), -2)\n)}\n\nfunction _start(d3,today){return(\nd3.timeDay.offset(today, -365)\n)}\n\nasync function _limitsDelayed(Promises,focus)\n{\n  await Promises.delay(1000, \"\"); // delay returning\n  return focus;\n}\n\n\nasync function _limitsDelayedMHW(Promises,focus)\n{\n  await Promises.delay(1000, \"\"); // delay returning\n  return focus;\n}\n\n\nfunction _38(md){return(\nmd`## bar charts`\n)}\n\nfunction _focusHeight(){return(\n60\n)}\n\nfunction _margin(){return(\n{ top: 4, right: 20, bottom: 30, left: 10 }\n)}\n\nfunction _x1(d3,margin,width,alldates){return(\nd3\n  .scaleBand()\n  .range([margin.left, width - margin.right], 0.01)\n  .padding(0.1)\n  .domain(alldates)\n)}\n\nfunction _x1MHW(d3,margin,width,brusedAllDatesMHW){return(\nd3\n  .scaleBand()\n  .range([margin.left, width - margin.right], 0.01)\n  .padding(0.01)\n  .domain(brusedAllDatesMHW)\n)}\n\nfunction _xAxis(margin,d3,width){return(\n(g, x, height) =>\n  g\n    .attr(\"transform\", `translate(0,${height - margin.bottom})`)\n    .call(\n      d3\n        .axisBottom(x)\n        .ticks(width / 80)\n        .tickSizeOuter(0)\n    )\n    .style(\"stroke\", \"#e0f5ee\")\n)}\n\nfunction _y(d3,focusHeight,margin){return(\nd3\n  .scaleLinear()\n  .domain([0, 1])\n  .range([focusHeight - margin.bottom, margin.top])\n)}\n\nfunction _brushedDataMHW(monthlyGrouped,focus){return(\nmonthlyGrouped.filter(\n  (d) => d.date >= focus[0] && new Date(d.date) < new Date(focus[1])\n)\n)}\n\nfunction _brusedAllDates(d3,focus){return(\nd3.timeMonth\n  .range(new Date(focus[0]), focus[1])\n  .map((d) => d.toISOString().substring(0, 10))\n)}\n\nfunction _brusedAllDatesMHW(d3,focus){return(\nd3.timeMonth\n  .range(new Date(focus[0]), new Date(focus[1]))\n  .map((d) => d.toISOString().substring(0, 10))\n)}\n\nfunction _x(d3,focus,margin,width){return(\nd3\n  .scaleTime()\n  .domain(focus)\n  .range([margin.left, width - margin.right])\n)}\n\nfunction _xMHW(d3,focus,margin,width){return(\nd3\n    .scaleTime()\n    .domain(focus)\n    .range([margin.left, width - margin.right])\n)}\n\nfunction _stack(d3,cats){return(\nd3.stack().keys(cats)\n)}\n\nfunction _brushedData(data,focus){return(\ndata.filter(\n  (d) => d.date >= focus[0] && new Date(d.date) < new Date(focus[1])\n)\n)}\n\nfunction _sstaColors(d3){return(\nd3.scaleDiverging(d3.interpolateRdBu).domain([4, 0, -4])\n)}\n\nfunction _brushHandle(arc){return(\n(g, selection, margin, height) =>\n  g\n    .selectAll(\".handle--custom\")\n    .data([{ type: \"w\" }, { type: \"e\" }])\n    .join((enter) =>\n      enter\n        .append(\"path\")\n        .attr(\"class\", \"handle--custom\")\n        .attr(\"fill\", \"#afafaf\")\n        .attr(\"fill-opacity\", 0.8)\n        .attr(\"stroke\", \"#000\")\n        .attr(\"stroke-width\", 1)\n        .attr(\"cursor\", \"ew-resize\")\n        .attr(\"d\", arc)\n    )\n    .attr(\"display\", selection === null ? \"none\" : null)\n    .attr(\n      \"transform\",\n      selection === null\n        ? null\n        : (d, i) =>\n            `translate(${selection[i]},${\n              (height + margin.top - margin.bottom) / 2\n            })`\n    )\n)}\n\nfunction _arc(d3)\n{\n  let height = 50;\n  let margin = { top: 10, right: 20, bottom: 20, left: 95 };\n  return d3\n    .arc()\n    .innerRadius(0)\n    .outerRadius((height - margin.top - margin.bottom) / 2)\n    .startAngle(0)\n    .endAngle((d, i) => (i ? Math.PI : -Math.PI));\n}\n\n\nfunction _data(dataSsta)\n{\n  const out = [];\n  Object.keys(dataSsta).forEach((d) => {\n    out.push({\n      date: new Date(d.slice(0, 4) + \"-\" + d.slice(-2)),\n      value: dataSsta[d][0]\n    });\n  });\n  return out;\n}\n\n\nfunction _ns(Inputs){return(\nInputs.text().classList[0]\n)}\n\nfunction _datesToPlot(datesCopy,limitsDelayed){return(\ndatesCopy.filter(\n  (d) => d >= limitsDelayed[0] && d <= limitsDelayed[1]\n)\n)}\n\nfunction _dates(d3,dateExtent){return(\nd3.timeDay\n  .range(new Date(dateExtent[0]), new Date(dateExtent[1]))\n  .map((d) => +d)\n)}\n\nfunction _datesCopy(dates){return(\n[...dates]\n)}\n\nfunction _dateExtent(){return(\n[new Date(\"2013-01-01\"), new Date()]\n)}\n\nfunction _61(buoys,siteClickeds){return(\nbuoys.find((d) => d.long_name === siteClickeds).pk\n)}\n\nfunction _62(siteClickeds){return(\nsiteClickeds\n)}\n\nfunction _siteClickeds(Inputs,buoys){return(\nInputs.select(\n  [null].concat(buoys.map((d) => d.long_name)),\n  {\n    label: \"site\",\n    value: \"North Hecate Strait\"\n  }\n)\n)}\n\nfunction _currentValue(clickedSite,time1)\n{\n  let value;\n  if (clickedSite.length !== 0) {\n    value = clickedSite\n      .find(\n        (d) =>\n          new Date(d.date).toISOString().substring(0, 10) ===\n          new Date(time1).toISOString().substring(0, 10)\n      )\n      .ssta.toFixed(2);\n  } else {\n    value = \"\";\n  }\n\n  // if (clickedSite.length === 0) value = \"\";\n  return value;\n}\n\n\nfunction _yMaxDomainToUse(clickedSite,d3)\n{\n  return clickedSite[Math.floor(clickedSite.length / 1.2)] === undefined ?\n    18 :  d3.max(clickedSite, (d) => d.sst) * 1.1\n}\n\n\nfunction _yValueForLabel(clickedSite,d3)\n{\n  return clickedSite[Math.floor(clickedSite.length / 1.2)] === undefined\n    ? 18\n    : d3.max(clickedSite, (d) => d.sst) * 1.1;\n}\n\n\nfunction _dateForLabel(clickedSite,d3,limitsDelayed)\n{\n  return clickedSite[Math.floor(clickedSite.length / 1.2)] === undefined\n    ? d3.timeDay.offset(limitsDelayed[0], 30)\n    : clickedSite[Math.floor(clickedSite.length * 0.2)].date;\n}\n\n\nfunction _dateForLabelVal(clickedSite,d3,limitsDelayed)\n{\n  return clickedSite[Math.floor(clickedSite.length / 2)] === undefined\n    ? d3.timeDay.offset(limitsDelayed[0], 30)\n    : clickedSite[Math.floor(clickedSite.length * 0.8)].date;\n}\n\n\nfunction _buoyClicked(buoys,siteClicked){return(\nbuoys.find((d) => d.pk === siteClicked).long_name\n)}\n\nfunction _70(buoyDailyData){return(\nbuoyDailyData[buoyDailyData.length - 1]\n)}\n\nfunction _clickedSite(buoyDailyData,siteClicked){return(\nbuoyDailyData.filter((d) => d.station === siteClicked)\n)}\n\nfunction _colors(){return(\nnew Map([\n  [\"avg\", \"#5b6187\"],\n  [\"thresh\", \"#FEDB67\"],\n  [\"below\", \"#89119c\"], // actuals below forecast\n  [\"above\", \"pink\"], // actuals above forecast\n  [\"none\", \"lightblue\"],\n  [\"Moderate\", \"#FEDB67\"],\n  [\"Strong\", \"#f26722\"],\n  [\"Severe\", \"#cd3728\"],\n  [\"Extreme\", \"#7E1416\"],\n\n  [\"seas\", \"pink\"]\n])\n)}\n\nfunction _buoys(){return(\n[\n  {\n    short_name: \"C46004\",\n    lat: 50.94,\n    lon: -135.87,\n    long_name: \"Middle Nomad\",\n    pk: 1\n  },\n  {\n    short_name: \"C46036\",\n    lat: 48.3,\n    lon: -133.86,\n    long_name: \"South Nomad\",\n    pk: 2\n  },\n  {\n    short_name: \"C46131\",\n    lat: 49.91,\n    lon: -124.99,\n    long_name: \"Sentry Shoal\",\n    pk: 3\n  },\n  {\n    short_name: \"C46132\",\n    lat: 49.74,\n    lon: -127.93,\n    long_name: \"South Brooks\",\n    pk: 4\n  },\n  // {\n  //   short_name: \"C46134\",\n  //   lat: 48.66,\n  //   lon: -123.48,\n  //   long_name: \"Pat Bay Test Buoy\",\n  //   pk: 5\n  // },\n  {\n    short_name: \"C46145\",\n    lat: 54.38,\n    lon: -132.42,\n    long_name: \"Central Dixon Entran\",\n    pk: 6\n  },\n  {\n    short_name: \"C46146\",\n    lat: 49.34,\n    lon: -123.73,\n    long_name: \"Halibut Bank\",\n    pk: 7\n  },\n  {\n    short_name: \"C46147\",\n    lat: 51.83,\n    lon: -131.23,\n    long_name: \"South Moresby\",\n    pk: 8\n  },\n  // {\n  //   short_name: \"C46181\",\n  //   lat: 53.82,\n  //   lon: -128.84,\n  //   long_name: \"Nanakwa Shoal\",\n  //   pk: 9\n  // },\n  // {\n  //   short_name: \"C46182\",\n  //   lat: 49.48,\n  //   lon: -123.29,\n  //   long_name: \"Pam Rocks\",\n  //   pk: 10\n  // },\n  {\n    short_name: \"C46183\",\n    lat: 53.57,\n    lon: -131.14,\n    long_name: \"North Hecate Strait\",\n    pk: 11\n  },\n  {\n    short_name: \"C46184\",\n    lat: 53.92,\n    lon: -138.85,\n    long_name: \"North Nomad\",\n    pk: 12\n  },\n  {\n    short_name: \"C46185\",\n    lat: 52.42,\n    lon: -129.79,\n    long_name: \"South Hecate Strait\",\n    pk: 13\n  },\n  {\n    short_name: \"C46204\",\n    lat: 51.38,\n    lon: -128.77,\n    long_name: \"West Sea Otter\",\n    pk: 14\n  },\n  {\n    short_name: \"C46205\",\n    lat: 54.3,\n    lon: -133.4,\n    long_name: \"West Dixon Entrance\",\n    pk: 15\n  },\n  {\n    short_name: \"C46206\",\n    lat: 48.83,\n    lon: -126,\n    long_name: \"La Perouse Bank\",\n    pk: 16\n  },\n  {\n    short_name: \"C46207\",\n    lat: 50.88,\n    lon: -129.91,\n    long_name: \"East Dellwood\",\n    pk: 17\n  },\n  {\n    short_name: \"C46208\",\n    lat: 52.51,\n    lon: -132.69,\n    long_name: \"West Moresby\",\n    pk: 18\n  }\n]\n)}\n\nfunction _HWsForDate(buoyDailyData,time1){return(\nbuoyDailyData.filter(\n  (d) =>\n    new Date(time1).toISOString().substring(0, 10) ===\n    new Date(d.result_time).toISOString().substring(0, 10)\n)\n)}\n\nfunction _dayBeforeStart(focus)\n{\n  const b = Object.assign(focus[0]);\n  const fistDate = new Date(b);\n\n  return new Date(fistDate.setDate(fistDate.getDate() - 1))\n    .toISOString()\n    .substring(0, 10);\n}\n\n\nfunction _buoyDailyData(dayBeforeStart,limitsDelayed)\n{\n  // let daysago = new Date().getDate() - 7;\n  // let st = new Date(new Date().setDate(daysago));\n\n  return fetch(\n    \"https://t6r95rekqe.execute-api.us-east-1.amazonaws.com/dev/getDailySSTStats?startDate=\" +\n      dayBeforeStart +\n      \"&endDate=\" +\n      limitsDelayed[1].toISOString().substring(0, 10) +\n      \"\"\n  )\n    .then((resp) => resp.json())\n    .then((data) => {\n      data.forEach((d) => {\n        d.ssta = d.sst - d.seas;\n        d.diff = d.thresh;\n        \n        d.diffStrong = d.thresh;\n        d.diffExtreme = d.thresh;\n        d.diffSevere = d.thresh;\n        if (d.category === \"Strong\") {\n          d.diffStrong = Math.max(d.thresh, d.sst);\n        }\n        if (d.category === \"Extreme\") {\n          d.diffExtreme = Math.max(d.thresh, d.sst);\n        }\n        if (d.category === \"Severe\") {\n          d.diffSevere = Math.max(d.thresh, d.sst);\n        }\n        if (d.category === \"Moderate\") {\n          d.diff = Math.max(d.thresh, d.sst);\n        }\n        if (d.category === null) {\n          d.category = \"none\";\n        }\n        d.date = new Date(d.result_time);\n      });\n      return data;\n    });\n}\n\n\nfunction _height(){return(\n500\n)}\n\nfunction _colorMHW(d3){return(\nd3\n  .scaleOrdinal()\n  .domain([\"none\", \"Moderate\", \"Strong\", \"Severe\",\"Extreme\"])\n  .range([\"#31a354\", \"#FEDB67\", \"#f26722\", \"#7E1416\", \"#cd3728\"])\n)}\n\nfunction _opacityMHW(d3){return(\nd3\n  .scaleOrdinal()\n  .domain([\"none\", \"Moderate\", \"Strong\", \"Severe\", \"Extreme\"])\n)}\n\nfunction _numFormat(d3){return(\nd3.format(\",d\")\n)}\n\nfunction _timeFormat(d3){return(\nd3.timeFormat(\"%Y-%m-%d\")\n)}\n\nfunction _d3(require){return(\nrequire(\"d3@6\")\n)}\n\nfunction _p(time1){return(\nnew Date(time1).toISOString().substring(0, 10)\n)}\n\nfunction _hwEvent(){return(\n[\n  { date: \"2013-10-01\", value: 1 },\n  { date: \"2013-11-01\", value: 1 },\n  { date: \"2013-12-01\", value: 1 },\n  { date: \"2014-01-01\", value: 1 },\n  { date: \"2014-02-01\", value: 1 },\n  { date: \"2014-03-01\", value: 1 },\n  { date: \"2014-04-01\", value: 1 },\n  { date: \"2014-05-01\", value: 1 },\n  { date: \"2014-06-01\", value: 1 },\n  { date: \"2014-07-01\", value: 1 },\n  { date: \"2014-08-01\", value: 1 },\n  { date: \"2014-09-01\", value: 1 },\n  { date: \"2014-10-01\", value: 1 },\n  { date: \"2014-11-01\", value: 1 },\n  { date: \"2014-12-01\", value: 1 },\n  { date: \"2015-01-01\", value: 1 },\n  { date: \"2015-02-01\", value: 1 },\n  { date: \"2015-03-01\", value: 1 },\n  { date: \"2015-04-01\", value: 1 },\n  { date: \"2015-05-01\", value: 1 },\n  { date: \"2015-06-01\", value: 1 },\n  { date: \"2015-07-01\", value: 1 },\n  { date: \"2015-08-01\", value: 1 },\n  { date: \"2015-09-01\", value: 1 },\n  { date: \"2015-10-01\", value: 1 },\n  { date: \"2015-11-01\", value: 1 },\n  { date: \"2015-12-01\", value: 1 },\n  { date: \"2016-01-01\", value: 1 },\n  { date: \"2016-02-01\", value: 1 },\n  { date: \"2016-03-01\", value: 1 },\n  { date: \"2016-04-01\", value: 1 },\n  { date: \"2016-05-01\", value: 1 },\n  { date: \"2016-06-01\", value: 1 },\n  { date: \"2016-07-01\", value: 1 },\n  { date: \"2016-08-01\", value: 1 },\n  { date: \"2016-09-01\", value: 1 },\n  { date: \"2016-10-01\", value: 1 },\n  { date: \"2016-11-01\", value: 1 },\n  { date: \"2019-08-01\", value: 1 },\n  { date: \"2019-09-01\", value: 1 },\n  { date: \"2019-10-01\", value: 1 },\n  { date: \"2019-11-01\", value: 1 }\n]\n)}\n\nfunction _alldates(d3,dateExtent){return(\nd3.timeMonth\n  .range(new Date(dateExtent[0]), new Date(dateExtent[1]))\n  .map((d) => d.toISOString().substring(0, 10))\n)}\n\nfunction _allmonths(mhwBarData){return(\n[...new Set(mhwBarData.map((d) => d.date.slice(0, 7)))]\n)}\n\nfunction _92(monthlyTots){return(\nmonthlyTots.filter((d) => d.date === \"2013-01\")\n)}\n\nfunction _monthlyTots(allmonths,cats,d3,mhwBarData)\n{\n  const out = [];\n  allmonths.forEach((month) => {\n    let t = 0;\n    for (let i = 0; i < cats.length; i++) {\n      let s = d3.sum(\n        mhwBarData.filter((d) => {\n          return +new Date(d.month) === +new Date(month);\n        }),\n        (d) => d[cats[i]]\n      );\n      // 15541891 is the total amount of points\n      out.push({ date: month, [cats[i]]: s });\n      t += s;\n      // console.log(month, [cats[i]], s);\n      // console.log(t);\n    }\n    // console.log(t);\n  });\n  return out;\n}\n\n\nfunction _monthlyGrouped(groups,cats)\n{\n  const out = [];\n  groups.forEach((d) => {\n    let sum = 0;\n    d[1].forEach((d) => {\n      sum += Object.values(d)[1];\n    });\n    // return sum;\n    out.push({\n      date: new Date(d[0]),\n      [cats[0]]: d[1][0][cats[0]] / sum,\n      [cats[1]]: d[1][1][cats[1]] / sum,\n      [cats[2]]: d[1][2][cats[2]] / sum,\n      [cats[3]]: d[1][3][cats[3]] / sum,\n      [cats[4]]: d[1][4][cats[4]] / sum,\n      sum: sum\n    });\n  });\n  return out;\n}\n\n\nfunction _cats(){return(\n[\"none\", \"Moderate\", \"Strong\", \"Extreme\", \"Severe\"]\n)}\n\nfunction _groups(d3,monthlyTots){return(\nd3.groups(monthlyTots, (d) => +new Date(d.date))\n)}\n\nasync function _mhwBarData(FileAttachment)\n{\n  const raw = await FileAttachment(\"monthlyMHW@4.json\").json();\n  const out = [];\n  Object.keys(raw).forEach((d) => {\n    for (let i = 0; i < 1; i++) {\n      let tot = raw[d].reduce((a, b) => a + b, 0);\n      out.push({\n        date: d.replace(/(\\d{4})(\\d{2})(\\d{2})/g, \"$1-$2-$3\"),\n        month: d.replace(/(\\d{4})(\\d{2})(\\d{2})/g, \"$1-$2-$3\").slice(0, 7),\n        none: raw[d][0],\n        Moderate: raw[d][1],\n        Strong: raw[d][2],\n        Extreme: raw[d][3],\n        Severe: raw[d][4]\n      });\n    }\n  });\n  return out;\n}\n\n\nfunction _tt(FileAttachment){return(\nFileAttachment(\"monthlyMHW@4.json\").json()\n)}\n\nfunction _99(dataSsta){return(\ndataSsta[\"202203\"]\n)}\n\nfunction _100(dataSstaOld){return(\ndataSstaOld[\"202204\"]\n)}\n\nfunction _dataSsta(){return(\nfetch(\n  \"https://raw.githubusercontent.com/HakaiInstitute/ssta_images/gh-pages/src/monthly.json\",\n  { Method: \"GET\" }\n).then((response) => {\n  return response.json();\n})\n)}\n\nfunction _dataSstaOld(FileAttachment){return(\nFileAttachment(\"monthly@7.json\").json()\n)}\n\nexport default function define(runtime, observer) {\n  const main = runtime.module();\n  function toString() { return this.url; }\n  const fileAttachments = new Map([\n    [\"monthly@7.json\", {url: new URL(\"./files/a3fbadf29709e974764d626a8843acf9134d9d813173218a60e5bbdf612fc8f873cb8fc46bf03b10d42dff7e66f3861625456633c0b887fee99eb6c0c0ac42d9.json\", import.meta.url), mimeType: \"application/json\", toString}],\n    [\"monthlyMHW@4.json\", {url: new URL(\"./files/4ddb55c620ff13535fa12218798e1510c0f1db6a6e897ffa6e652a22eaf74ee822f2d46311a4d888d73baa482e4b6e4fafa603c2c82635435770e6ba7fcdae87.json\", import.meta.url), mimeType: \"application/json\", toString}]\n  ]);\n  main.builtin(\"FileAttachment\", runtime.fileAttachments(name => fileAttachments.get(name)));\n  main.variable(observer()).define([\"md\"], _1);\n  main.variable(observer(\"curDate\")).define(\"curDate\", [\"md\",\"timeFormat\",\"time1\"], _curDate);\n  main.variable(observer()).define([\"md\"], _3);\n  main.variable(observer()).define([\"d3\"], _4);\n  main.variable(observer(\"endPlayDate\")).define(\"endPlayDate\", [\"d3\"], _endPlayDate);\n  main.variable(observer(\"style\")).define(\"style\", [\"html\",\"width\",\"ns\"], _style);\n  main.variable(observer()).define([\"brushedData\"], _7);\n  main.variable(observer()).define([\"md\"], _8);\n  main.variable(observer(\"viewof time1\")).define(\"viewof time1\", [\"Scrubber\",\"datesToPlot\",\"newNum\"], _time1);\n  main.variable(observer(\"time1\")).define(\"time1\", [\"Generators\", \"viewof time1\"], (G, _) => G.input(_));\n  main.variable(observer()).define([\"md\"], _10);\n  main.variable(observer(\"viewof colorView\")).define(\"viewof colorView\", [\"Inputs\",\"html\"], _colorView);\n  main.variable(observer(\"colorView\")).define(\"colorView\", [\"Generators\", \"viewof colorView\"], (G, _) => G.input(_));\n  main.define(\"initial newNum\", _newNum);\n  main.variable(observer(\"mutable newNum\")).define(\"mutable newNum\", [\"Mutable\", \"initial newNum\"], (M, _) => new M(_));\n  main.variable(observer(\"newNum\")).define(\"newNum\", [\"mutable newNum\"], _ => _.generator);\n  main.variable(observer(\"chart\")).define(\"chart\", [\"colorView\",\"focusHeight\",\"d3\",\"width\",\"margin\",\"xMHW\",\"stack\",\"brushedDataMHW\",\"colors\",\"x1MHW\",\"time1\",\"x\",\"drag\",\"brusedAllDates\",\"brushedData\",\"sstaColors\"], _chart);\n  main.variable(observer(\"drag\")).define(\"drag\", [\"d3\",\"x\",\"focus\",\"endPlayDate\",\"datesToPlot\",\"mutable newNum\",\"viewof time1\"], _drag);\n  main.variable(observer()).define([\"focus\"], _15);\n  main.define(\"initial debug1\", _debug1);\n  main.variable(observer(\"mutable debug1\")).define(\"mutable debug1\", [\"Mutable\", \"initial debug1\"], (M, _) => new M(_));\n  main.variable(observer(\"debug1\")).define(\"debug1\", [\"mutable debug1\"], _ => _.generator);\n  main.variable(observer(\"viewof focus\")).define(\"viewof focus\", [\"colorView\",\"d3\",\"width\",\"focusHeight\",\"dateExtent\",\"margin\",\"xAxis\",\"stack\",\"monthlyGrouped\",\"colors\",\"x1\",\"y\",\"data\",\"sstaColors\",\"mutable debug1\"], _focus);\n  main.variable(observer(\"focus\")).define(\"focus\", [\"Generators\", \"viewof focus\"], (G, _) => G.input(_));\n  main.variable(observer(\"legTitle\")).define(\"legTitle\", [\"md\",\"colorView\"], _legTitle);\n  main.variable(observer(\"leg\")).define(\"leg\", [\"colorView\",\"Plot\"], _leg);\n  main.variable(observer()).define([\"Inputs\",\"alldays\"], _20);\n  main.variable(observer()).define([\"clickedSite\"], _21);\n  main.variable(observer()).define([\"clickedSite\",\"limitsDelayed\"], _22);\n  main.variable(observer(\"alldays\")).define(\"alldays\", [\"d3\",\"focus\",\"clickedSite\",\"siteClicked\"], _alldays);\n  main.variable(observer()).define([\"alldays\"], _24);\n  main.variable(observer()).define([\"alldays\"], _25);\n  main.variable(observer()).define([\"clickedSite\"], _26);\n  main.variable(observer()).define([\"clickedSite\",\"alldays\"], _27);\n  main.variable(observer()).define([\"clickedSite\",\"alldays\"], _28);\n  main.variable(observer(\"viewof lineChart\")).define(\"viewof lineChart\", [\"alldays\",\"Plot\",\"limitsDelayed\",\"yMaxDomainToUse\",\"time1\",\"d3\",\"dateForLabel\",\"yValueForLabel\",\"buoyClicked\",\"colors\",\"dateForLabelVal\",\"colorView\",\"md\"], _lineChart);\n  main.variable(observer(\"lineChart\")).define(\"lineChart\", [\"Generators\", \"viewof lineChart\"], (G, _) => G.input(_));\n  main.define(\"initial siteClicked\", _siteClicked);\n  main.variable(observer(\"mutable siteClicked\")).define(\"mutable siteClicked\", [\"Mutable\", \"initial siteClicked\"], (M, _) => new M(_));\n  main.variable(observer(\"siteClicked\")).define(\"siteClicked\", [\"mutable siteClicked\"], _ => _.generator);\n  main.variable(observer(\"ind\")).define(\"ind\", [\"dates\",\"time1\"], _ind);\n  main.variable(observer(\"today\")).define(\"today\", [\"d3\"], _today);\n  main.variable(observer(\"start\")).define(\"start\", [\"d3\",\"today\"], _start);\n  main.variable(observer(\"limitsDelayed\")).define(\"limitsDelayed\", [\"Promises\",\"focus\"], _limitsDelayed);\n  main.variable(observer(\"limitsDelayedMHW\")).define(\"limitsDelayedMHW\", [\"Promises\",\"focus\"], _limitsDelayedMHW);\n  main.variable(observer()).define([\"md\"], _38);\n  main.variable(observer(\"focusHeight\")).define(\"focusHeight\", _focusHeight);\n  main.variable(observer(\"margin\")).define(\"margin\", _margin);\n  main.variable(observer(\"x1\")).define(\"x1\", [\"d3\",\"margin\",\"width\",\"alldates\"], _x1);\n  main.variable(observer(\"x1MHW\")).define(\"x1MHW\", [\"d3\",\"margin\",\"width\",\"brusedAllDatesMHW\"], _x1MHW);\n  main.variable(observer(\"xAxis\")).define(\"xAxis\", [\"margin\",\"d3\",\"width\"], _xAxis);\n  main.variable(observer(\"y\")).define(\"y\", [\"d3\",\"focusHeight\",\"margin\"], _y);\n  main.variable(observer(\"brushedDataMHW\")).define(\"brushedDataMHW\", [\"monthlyGrouped\",\"focus\"], _brushedDataMHW);\n  main.variable(observer(\"brusedAllDates\")).define(\"brusedAllDates\", [\"d3\",\"focus\"], _brusedAllDates);\n  main.variable(observer(\"brusedAllDatesMHW\")).define(\"brusedAllDatesMHW\", [\"d3\",\"focus\"], _brusedAllDatesMHW);\n  main.variable(observer(\"x\")).define(\"x\", [\"d3\",\"focus\",\"margin\",\"width\"], _x);\n  main.variable(observer(\"xMHW\")).define(\"xMHW\", [\"d3\",\"focus\",\"margin\",\"width\"], _xMHW);\n  main.variable(observer(\"stack\")).define(\"stack\", [\"d3\",\"cats\"], _stack);\n  main.variable(observer(\"brushedData\")).define(\"brushedData\", [\"data\",\"focus\"], _brushedData);\n  main.variable(observer(\"sstaColors\")).define(\"sstaColors\", [\"d3\"], _sstaColors);\n  main.variable(observer(\"brushHandle\")).define(\"brushHandle\", [\"arc\"], _brushHandle);\n  main.variable(observer(\"arc\")).define(\"arc\", [\"d3\"], _arc);\n  main.variable(observer(\"data\")).define(\"data\", [\"dataSsta\"], _data);\n  main.variable(observer(\"ns\")).define(\"ns\", [\"Inputs\"], _ns);\n  main.variable(observer(\"datesToPlot\")).define(\"datesToPlot\", [\"datesCopy\",\"limitsDelayed\"], _datesToPlot);\n  main.variable(observer(\"dates\")).define(\"dates\", [\"d3\",\"dateExtent\"], _dates);\n  main.variable(observer(\"datesCopy\")).define(\"datesCopy\", [\"dates\"], _datesCopy);\n  main.variable(observer(\"dateExtent\")).define(\"dateExtent\", _dateExtent);\n  main.variable(observer()).define([\"buoys\",\"siteClickeds\"], _61);\n  main.variable(observer()).define([\"siteClickeds\"], _62);\n  main.variable(observer(\"viewof siteClickeds\")).define(\"viewof siteClickeds\", [\"Inputs\",\"buoys\"], _siteClickeds);\n  main.variable(observer(\"siteClickeds\")).define(\"siteClickeds\", [\"Generators\", \"viewof siteClickeds\"], (G, _) => G.input(_));\n  main.variable(observer(\"currentValue\")).define(\"currentValue\", [\"clickedSite\",\"time1\"], _currentValue);\n  main.variable(observer(\"yMaxDomainToUse\")).define(\"yMaxDomainToUse\", [\"clickedSite\",\"d3\"], _yMaxDomainToUse);\n  main.variable(observer(\"yValueForLabel\")).define(\"yValueForLabel\", [\"clickedSite\",\"d3\"], _yValueForLabel);\n  main.variable(observer(\"dateForLabel\")).define(\"dateForLabel\", [\"clickedSite\",\"d3\",\"limitsDelayed\"], _dateForLabel);\n  main.variable(observer(\"dateForLabelVal\")).define(\"dateForLabelVal\", [\"clickedSite\",\"d3\",\"limitsDelayed\"], _dateForLabelVal);\n  main.variable(observer(\"buoyClicked\")).define(\"buoyClicked\", [\"buoys\",\"siteClicked\"], _buoyClicked);\n  main.variable(observer()).define([\"buoyDailyData\"], _70);\n  main.variable(observer(\"clickedSite\")).define(\"clickedSite\", [\"buoyDailyData\",\"siteClicked\"], _clickedSite);\n  main.variable(observer(\"colors\")).define(\"colors\", _colors);\n  main.variable(observer(\"buoys\")).define(\"buoys\", _buoys);\n  main.variable(observer(\"HWsForDate\")).define(\"HWsForDate\", [\"buoyDailyData\",\"time1\"], _HWsForDate);\n  main.variable(observer(\"dayBeforeStart\")).define(\"dayBeforeStart\", [\"focus\"], _dayBeforeStart);\n  main.variable(observer(\"buoyDailyData\")).define(\"buoyDailyData\", [\"dayBeforeStart\",\"limitsDelayed\"], _buoyDailyData);\n  main.variable(observer(\"height\")).define(\"height\", _height);\n  main.variable(observer(\"colorMHW\")).define(\"colorMHW\", [\"d3\"], _colorMHW);\n  main.variable(observer(\"opacityMHW\")).define(\"opacityMHW\", [\"d3\"], _opacityMHW);\n  main.variable(observer(\"numFormat\")).define(\"numFormat\", [\"d3\"], _numFormat);\n  main.variable(observer(\"timeFormat\")).define(\"timeFormat\", [\"d3\"], _timeFormat);\n  main.variable(observer(\"d3\")).define(\"d3\", [\"require\"], _d3);\n  main.define(\"initial p\", [\"time1\"], _p);\n  main.variable(observer(\"mutable p\")).define(\"mutable p\", [\"Mutable\", \"initial p\"], (M, _) => new M(_));\n  main.variable(observer(\"p\")).define(\"p\", [\"mutable p\"], _ => _.generator);\n  main.variable(observer(\"hwEvent\")).define(\"hwEvent\", _hwEvent);\n  main.variable(observer(\"alldates\")).define(\"alldates\", [\"d3\",\"dateExtent\"], _alldates);\n  main.variable(observer(\"allmonths\")).define(\"allmonths\", [\"mhwBarData\"], _allmonths);\n  main.variable(observer()).define([\"monthlyTots\"], _92);\n  main.variable(observer(\"monthlyTots\")).define(\"monthlyTots\", [\"allmonths\",\"cats\",\"d3\",\"mhwBarData\"], _monthlyTots);\n  main.variable(observer(\"monthlyGrouped\")).define(\"monthlyGrouped\", [\"groups\",\"cats\"], _monthlyGrouped);\n  main.variable(observer(\"cats\")).define(\"cats\", _cats);\n  main.variable(observer(\"groups\")).define(\"groups\", [\"d3\",\"monthlyTots\"], _groups);\n  main.variable(observer(\"mhwBarData\")).define(\"mhwBarData\", [\"FileAttachment\"], _mhwBarData);\n  main.variable(observer(\"tt\")).define(\"tt\", [\"FileAttachment\"], _tt);\n  main.variable(observer()).define([\"dataSsta\"], _99);\n  main.variable(observer()).define([\"dataSstaOld\"], _100);\n  main.variable(observer(\"dataSsta\")).define(\"dataSsta\", _dataSsta);\n  main.variable(observer(\"dataSstaOld\")).define(\"dataSstaOld\", [\"FileAttachment\"], _dataSstaOld);\n  const child1 = runtime.module(define1);\n  main.import(\"Scrubber\", child1);\n  return main;\n}\n"],"sourceRoot":""}