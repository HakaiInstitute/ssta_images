{"version":3,"sources":["webpack://ssta/./src/buoyviz/0b936d79280ee3bd@5948.js","webpack://ssta/./src/buoyviz/41364653f34651d0@438.js"],"names":["_1","md","_curDate","timeFormat","time1","Date","_3","_endPlayDate","_style","html","width","ns","_6","brushedData","_7","_9","_time1","Scrubber","datesToPlot","newNum","delay","initial","autoplay","loop","format","d","_11","_colorView","Inputs","radio","value","x","_newNum","_chart","colorView","focusHeight","d3","margin","xMHW","stack","brushedDataMHW","colors","x1MHW","drag","brusedAllDates","sstaColors","height","svg","create","attr","style","y","scaleLinear","domain","range","bottom","top","xAxis","g","call","axisBottom","ticks","tickSizeOuter","append","chartData","selectAll","data","join","i","get","key","date","toISOString","substring","bandwidth","datum","node","x2","scaleBand","left","right","padding","enter","_drag","focus","endPlayDate","$0","$1","on","event","select","this","raise","isBelowMax","isAboveMin","ind","bisect","invert","update","_17","_debug1","_focus","dateExtent","monthlyGrouped","x1","scaleTime","brush","brushX","extent","brushed","brushended","defaultSelection","utcYear","offset","previousS0","previousS1","gb","selection","s","property","map","utcMonth","ceil","dispatch","move","_legTitle","_leg","Plot","legend","marginLeft","marginRight","backgroundColor","color","fontSize","fontWeight","type","pivot","reverse","label","_lineChart","clickedSite","limitsDelayed","yMaxDomainToUse","dateForLabel","yValueForLabel","buoyClicked","dateForLabelVal","currentValue","siteClicked","taLabel","length","HWlineChart","plot","marginTop","className","marks","dot","stroke","fill","ruleX","y1","y2","max","sst","text","SSTAlineChart","_ind","dates","indexOf","_today","timeDay","utcDay","_start","today","async","_limitsDelayed","Promises","_limitsDelayedMHW","_30","_focusHeight","_margin","_x1","alldates","_x1MHW","brusedAllDatesMHW","_xAxis","_y","_brushedDataMHW","filter","_brusedAllDates","timeMonth","_brusedAllDatesMHW","_x","_xMHW","_stack","cats","keys","_brushedData","_sstaColors","scaleDiverging","interpolateRdBu","_brushHandle","arc","_arc","innerRadius","outerRadius","startAngle","endAngle","Math","PI","_data","dataSsta","out","Object","forEach","push","slice","_ns","classList","_datesToPlot","datesCopy","_dates","_datesCopy","_dateExtent","_siteClicked","_54","buoys","siteClickeds","find","long_name","pk","_55","_siteClickeds","concat","_currentValue","ssta","toFixed","_yMaxDomainToUse","undefined","floor","_yValueForLabel","_dateForLabel","_dateForLabelVal","_buoyClicked","_63","buoyDailyData","_clickedSite","station","_colors","Map","_buoys","short_name","lat","lon","_HWsForDate","result_time","_dayBeforeStart","b","assign","fistDate","setDate","getDate","_buoyDailyData","dayBeforeStart","fetch","then","resp","json","seas","diff","thresh","diffStrong","diffExtreme","diffSevere","category","_height","_colorMHW","scaleOrdinal","_opacityMHW","_numFormat","_timeFormat","_d3","require","_p","_hwEvent","_alldates","_allmonths","mhwBarData","Set","_85","monthlyTots","_monthlyTots","allmonths","month","t","sum","_monthlyGrouped","groups","values","_cats","_groups","_mhwBarData","FileAttachment","raw","reduce","a","replace","none","Moderate","Strong","Extreme","Severe","_tt","_92","_93","dataSstaOld","_dataSsta","Method","response","_dataSstaOld","define","runtime","observer","main","module","toString","url","fileAttachments","URL","mimeType","builtin","name","variable","G","_","input","M","generator","child1","define1","import","_2","_numbers","Array","from","_5","_autoplay","numbers","_loop","_13","_14","alternate","_delay","_loopDelay","_format","_date","toLocaleString","day","_num","loopDelay","_22","_23","_26","_27","o","form","_28","_29","_31","num","_33","_34","_Scrubber","index","frame","timer","interval","direction","start","add","requestAnimationFrame","tick","setInterval","stop","remove","cancelAnimationFrame","clearTimeout","clearInterval","running","valueAsNumber","NaN","setTimeout","step","dispatchEvent","CustomEvent","bubbles","console","log","oninput","isTrusted","onclick","disposal"],"mappings":"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","file":"bundle.1dc73236f516b699f1ae.js","sourcesContent":["import define1 from \"./41364653f34651d0@438.js\";\n\nfunction _1(md){return(\nmd`# Marine heatwave charts and brush/player\n\nused to embed as a module in https://cioospacific.ca/applied-data/marine-heat-monitor/\n\ncurl -o bs.tgz \"https://api.observablehq.com/d/0b936d79280ee3bd.tgz?v=3\"\n\ntar -C src/buoyviz -xvzf bs.tgz\n\nThis notebook includes\n- loading the buoy data via api\n- data brush chart (loads from github)\n- scrubber for playing the animation in the website\n- charts for the buoys\n\n\n`\n)}\n\nfunction _curDate(md,timeFormat,time1){return(\nmd`# ${timeFormat(new Date(time1))}`\n)}\n\nfunction _3(md){return(\nmd`date to stop playing. Ideally this should be a only a couple days in the past since data is usually updated each day`\n)}\n\nfunction _endPlayDate(){return(\nnew Date(\"2022-06-01\")\n)}\n\nfunction _style(html,width,ns){return(\nhtml`\n<style>\n\n  /* match the scrubber's width to our race chart */\n   // input[type=\"range\"][name=\"i\"] {\n   //   width: ${width - 90}px !important;\n   // }\n\n.${ns}{\n  font-size: 16px;  \n}\n\n\nbutton, input, textarea {\n    accent-color: #007490;\n}\n\n#butt input, textarea {\n    accent-color: green;\n}\n.brushFilter {\nbackground-color: #606060;\ncolor: \"#e0f5ee\"\n}\n\n.currentDot{\nbackground-color: none;\ncolor: \"#e0f5ee\"\n}\n\n.axisWhite line{\n  stroke: #e0f5ee;\n}\n\n.axisWhite path{\n  stroke: #e0f5ee;\n}\n\n// .selection{\n// fill: #d9d9d9;\n// fill-opacity: .6;\n// stroke: none;\n// }\n\n.radio {\n\n  color: deeppink;\n}\n  .button {\ncolor:lightgrey;\n  border: 0;\n  background: transparent;\n  box-sizing: border-box;\n  width: 100;\n  height: 74px;\n  border-color: transparent transparent transparent lightgrey;\n  transition: 100ms all ease;\n  cursor: pointer;\n  border-style: solid;\n  border-width: 37px 0 37px 60px;\ntransform: scale(.7);\n}\n.paused {\n  border-style: double;\n  border-width: 0px 0 0px 60px;\n}\n.button:hover {\n  border-color: transparent transparent transparent #8f8f8f;\n}\n// input[type=\"range\"][name=\"input\"] {\n// accent-color:blue\n\n// }\n\n#dot{\n accent-color:black\n}\n.fa-xs {\n    font-size: 5.75em;\n}\n\n\n\n</style>\n`\n)}\n\nfunction _6(brushedData){return(\nbrushedData\n)}\n\nfunction _7(md){return(\nmd`play`\n)}\n\nfunction _9(time1){return(\ntime1\n)}\n\nfunction _time1(Scrubber,datesToPlot,newNum){return(\nScrubber(datesToPlot, {\n  width: 0,\n  delay: 100,\n  initial: newNum,\n  autoplay: false,\n  loop: false,\n  format: (d) => \"\"\n})\n)}\n\nfunction _11(md){return(\nmd`anomaly or category button`\n)}\n\nfunction _colorView(Inputs,html){return(\nInputs.radio([\"Anomaly\", \"Heatwaves\"], {\n  value: \"Anomaly\",\n  // label: \"Choose category to view\",\n  format: (x) => html`<span style=\"color: white\">${x}`\n})\n)}\n\nfunction _newNum(){return(\n0\n)}\n\nfunction _chart(colorView,focusHeight,d3,width,margin,xMHW,stack,brushedDataMHW,colors,x1MHW,time1,x,drag,brusedAllDates,brushedData,sstaColors)\n{\n  if (colorView === \"Heatwaves\") {\n    const height = focusHeight;\n    const svg = d3\n      .create(\"svg\")\n      .attr(\"viewBox\", [0, 0, width, height])\n      .style(\"display\", \"block\");\n\n    const y = d3\n      .scaleLinear()\n      .domain([0, 1])\n      .range([height - margin.bottom, margin.top + 5]);\n\n    const xAxis = (g, xMHW, height) =>\n      g\n        .attr(\"transform\", `translate(0,${height - margin.bottom})`)\n        .call(\n          d3\n            .axisBottom(xMHW)\n            .ticks(width / 80)\n            .tickSizeOuter(0)\n        )\n        .style(\"stroke\", \"#e0f5ee\");\n\n    svg.append(\"g\").call(xAxis, xMHW, height).attr(\"class\", \"axisWhite\");\n\n    const chartData = stack(brushedDataMHW);\n    // svg.append(\"path\")\n    const groups = svg\n      .append(\"g\")\n      // Each layer of the stack goes in a group\n      // the group contains that layer for all countries\n      .selectAll(\"g\")\n      .data(chartData)\n      .join(\"g\")\n      // rects in the same layer will all have the same color, so we can put it on the group\n      // we can use the key on the layer's array to set the color\n      .style(\"fill\", (d, i) => {\n        // console.log(d);\n        return colors.get(d.key);\n      });\n    // .attr(\"d\", area(x, y.copy().range([focusHeight - margin.bottom, 4])));\n\n    groups\n      .selectAll(\"rect\")\n      // Now we place the rects, which are the children of the layer array\n      .data((d) => d)\n      .join(\"rect\")\n      .attr(\"x\", (d) => {\n        return x1MHW(new Date(d.data.date).toISOString().substring(0, 10));\n      })\n      .attr(\"y\", (d) => y(d[1]))\n      .attr(\"height\", (d) => y(d[0]) - y(d[1]))\n      .attr(\"width\", x1MHW.bandwidth());\n\n    const recordLine = svg\n      .append(\"line\")\n      .datum([\n        {\n          date: time1,\n          value: 1\n        }\n      ])\n      .attr(\"x1\", (d) => {\n        return x(time1);\n      })\n      .attr(\"x2\", (d) => x(time1))\n      .attr(\"y2\", y(1))\n      .attr(\"y1\", y(0))\n      .attr(\"fill\", \"none\")\n      .attr(\"stroke\", \"deeppink\")\n      .attr(\"stoke-width\", 1.5)\n      .attr(\"stroke-linejoin\", \"round\");\n    // .attr(\"stroke-dasharray\", \"10 10\");\n    // .attr(\"stroke-opacity\", 0.8);\n\n    const circles = svg\n      .selectAll(\"circle\")\n      .data([\n        {\n          date: time1,\n          value: 1\n        }\n      ])\n      .join(\"circle\")\n      .attr(\"cx\", (d) => {\n        return x(d.date);\n      })\n      .attr(\"cy\", (d) => y(0.98))\n      .attr(\"r\", 7)\n      .attr(\"fill\", (d) => \"deeppink\")\n      .attr(\"stroke\", (d) => \"deeppink\")\n      .call(drag);\n\n    return svg.node();\n  } else {\n    // anomaly chart\n\n    const height = focusHeight;\n    const svg = d3\n      .create(\"svg\")\n      .attr(\"viewBox\", [0, 0, width, height])\n      .style(\"display\", \"block\");\n\n    const y = d3\n      .scaleLinear()\n      .domain([0, 1])\n      .range([height - margin.bottom, margin.top + 5]);\n\n    const xAxis = (g, x, height) =>\n      g\n        .attr(\"transform\", `translate(0,${height - margin.bottom})`)\n        .call(\n          d3\n            .axisBottom(x)\n            .ticks(width / 80)\n            .tickSizeOuter(0)\n        )\n        .style(\"stroke\", \"#e0f5ee\");\n\n    svg.append(\"g\").call(xAxis, x, height).attr(\"class\", \"axisWhite\");\n\n    const x2 = d3\n      .scaleBand()\n      .range([margin.left, width - margin.right], 0.01)\n      .padding(0.01)\n      .domain(brusedAllDates);\n\n    // svg.append(\"path\")\n    const bars = svg\n      .selectAll(\"rect\")\n      .data(brushedData)\n      .enter()\n      .append(\"rect\")\n      .attr(\"x\", (d) => x2(d.date.toISOString().substring(0, 10)))\n      .attr(\"y\", (d) => {\n        return y(1);\n      })\n      .attr(\"width\", (d) => x2.bandwidth())\n      .attr(\"height\", (d) => y(0) - y(1))\n      .attr(\"fill\", (d) => sstaColors(d.value));\n\n    const recordLine = svg\n      .append(\"line\")\n      .datum([\n        {\n          date: time1,\n          value: 1\n        }\n      ])\n      .attr(\"x1\", (d) => {\n        // console.log(d);\n        return x(time1);\n      })\n      .attr(\"x2\", (d) => x(time1))\n      .attr(\"y2\", y(1))\n      .attr(\"y1\", y(0))\n      .attr(\"fill\", \"none\")\n      .attr(\"stroke\", \"deeppink\")\n      .attr(\"stoke-width\", 1.5)\n      .attr(\"stroke-linejoin\", \"round\");\n    // .attr(\"stroke-dasharray\", \"10 10\");\n    // .attr(\"stroke-opacity\", 0.8);\n\n    const circles = svg\n      .selectAll(\"circle\")\n      .data([\n        {\n          date: time1,\n          value: 1\n        }\n      ])\n      .join(\"circle\")\n      .attr(\"cx\", (d) => {\n        return x(d.date);\n      })\n      .attr(\"cy\", (d) => y(0.98))\n      .attr(\"r\", 7)\n      .attr(\"fill\", (d) => \"deeppink\")\n      .attr(\"stroke\", (d) => \"deeppink\")\n      .call(drag);\n    return svg.node();\n  }\n  // return svg.node();\n}\n\n\nfunction _drag(d3,x,focus,endPlayDate,datesToPlot,$0,$1)\n{\n  function dragstarted(event, d) {\n    d3.select(this).raise().attr(\"stroke\", \"black\");\n  }\n\n  function dragged(event, d) {\n    let isBelowMax = event.x > x(+focus[0]);\n    let isAboveMin = event.x < x(+endPlayDate);\n    // mutable debug = new Date(\"2022-04-08\");\n    // console.log(d3.timeDay.offset(today, -1));\n\n    if (isBelowMax && isAboveMin) {\n      d3.select(this).attr(\"cx\", (d.x = event.x));\n      // console.log(event.x, event.dx);\n\n      const ind = d3.bisect(datesToPlot, +x.invert(event.x));\n      // mutable debug = ind;\n      $0.value = ind; // place ind we need to move the scrubber to\n      $1.update(ind);\n    }\n\n    // .attr(\"cy\", (d.y = event.y));\n  }\n\n  function dragended(event, d) {\n    d3.select(this).attr(\"stroke\", null);\n  }\n\n  return d3\n    .drag()\n    .on(\"start\", dragstarted)\n    .on(\"drag\", dragged)\n    .on(\"end\", dragended);\n}\n\n\nfunction _17(focus){return(\nfocus\n)}\n\nfunction _debug1(){return(\nnull\n)}\n\nfunction _focus(colorView,d3,width,focusHeight,dateExtent,margin,xAxis,stack,monthlyGrouped,colors,x1,y,data,sstaColors,$0)\n{\n  if (colorView === \"Heatwaves\") {\n    const svg = d3\n      .create(\"svg\")\n      .attr(\"viewBox\", [0, 0, width, focusHeight])\n      .style(\"display\", \"block\");\n\n    const x = d3\n      .scaleTime()\n      .domain(dateExtent)\n      .range([margin.left, width - margin.right]);\n\n    const brush = d3\n      .brushX()\n      .extent([\n        [margin.left, 0.5],\n        [width - margin.right, focusHeight - margin.bottom + 0.5]\n      ])\n      .on(\"brush\", brushed)\n      .on(\"end\", brushended);\n\n    const defaultSelection = [\n      x(d3.utcYear.offset(x.domain()[1], -1)),\n      x.range()[1]\n    ];\n\n    svg.append(\"g\").call(xAxis, x, focusHeight).attr(\"class\", \"axisWhite\");\n    let previousS0, previousS1;\n\n    const chartData = stack(monthlyGrouped);\n\n    const groups = svg\n      .append(\"g\")\n      // Each layer of the stack goes in a group\n      // the group contains that layer for all countries\n      .selectAll(\"g\")\n      .data(chartData)\n      .join(\"g\")\n      // rects in the same layer will all have the same color, so we can put it on the group\n      // we can use the key on the layer's array to set the color\n      .style(\"fill\", (d, i) => {\n        // console.log(d.key);\n        return colors.get(d.key);\n      });\n    // .attr(\"d\", area(x, y.copy().range([focusHeight - margin.bottom, 4])));\n\n    groups\n      .selectAll(\"rect\")\n      // Now we place the rects, which are the children of the layer array\n      .data((d) => d)\n      .join(\"rect\")\n      .attr(\"x\", (d) => {\n        // console.log(d.data.date);\n        return x1(new Date(d.data.date).toISOString().substring(0, 10));\n      })\n      .attr(\"y\", (d) => y(d[1]))\n      .attr(\"height\", (d) => y(d[0]) - y(d[1]))\n      .attr(\"width\", x1.bandwidth());\n\n    const gb = svg.append(\"g\").call(brush);\n    gb.call(brush.move, defaultSelection);\n\n    function brushed({ selection }) {\n      if (selection) {\n        // console.log(\"fire1\");\n        var s = selection || x.range();\n\n        svg.property(\"value\", selection.map(x.invert, x).map(d3.utcMonth.ceil));\n        svg.dispatch(\"input\");\n\n        if (((s[1] - s[0]) / width) * 120 > 30) {\n          gb.call(brush.move, [previousS0, previousS1]);\n          return;\n        }\n        previousS0 = s[0];\n        previousS1 = s[1];\n      }\n    }\n\n    function brushended({ selection }) {\n      if (!selection) {\n        gb.call(brush.move, [defaultSelection]);\n      }\n    }\n    return svg.node();\n\n    /////\n  } else {\n    const svg = d3\n      .create(\"svg\")\n      .attr(\"viewBox\", [0, 0, width, focusHeight])\n      .style(\"display\", \"block\");\n\n    const x = d3\n      .scaleTime()\n      .domain(dateExtent)\n      .range([margin.left, width - margin.right]);\n\n    const brush = d3\n      .brushX()\n      .extent([\n        [margin.left, 0.5],\n        [width - margin.right, focusHeight - margin.bottom + 0.5]\n      ])\n      .on(\"brush\", brushed)\n      .on(\"end\", brushended);\n\n    const defaultSelection = [\n      x(d3.utcYear.offset(x.domain()[1], -1)),\n      x.range()[1]\n    ];\n\n    svg.append(\"g\").call(xAxis, x, focusHeight).attr(\"class\", \"axisWhite\");\n    let previousS0, previousS1;\n    // svg.append(\"path\")\n    const bars = svg\n      .selectAll(\"rect\")\n      .data(data)\n      .enter()\n      .append(\"rect\")\n      .attr(\"x\", (d) => x1(d.date.toISOString().substring(0, 10)))\n      .attr(\"y\", (d) => {\n        return y(1);\n      })\n      .attr(\"width\", (d) => x1.bandwidth())\n      .attr(\"height\", (d) => y(0) - y(1))\n      .attr(\"fill\", (d) => sstaColors(d.value));\n    // .attr(\"d\", area(x, y.copy().range([focusHeight - margin.bottom, 4])));\n\n    const gb = svg.append(\"g\").call(brush);\n    gb.call(brush.move, defaultSelection);\n\n    function brushed({ selection }) {\n      // mutable debug1 = selection;\n      if (selection) {\n        // console.log(\"fire1\");\n        var s = selection || x.range();\n\n        svg.property(\"value\", selection.map(x.invert, x).map(d3.utcMonth.ceil));\n        svg.dispatch(\"input\");\n\n        if (\n          ((s[1] - s[0]) / width) * 120 > 30 ||\n          ((s[1] - s[0]) / width) * 120 < 2\n        ) {\n          gb.call(brush.move, [previousS0, previousS1]);\n          return;\n        }\n        previousS0 = s[0];\n        previousS1 = s[1];\n      }\n    }\n\n    function brushended({ selection }) {\n      if (!selection) {\n        $0.value = defaultSelection;\n        gb.call(brush.move, [previousS0, previousS1]); // changed from defaultSelection so that a single click doesn't mess things up\n      }\n    }\n\n    return svg.node();\n  }\n}\n\n\nfunction _legTitle(md,colorView){return(\nmd` ${\n  colorView === \"Anomaly\" ? \"Sea surface temperature anomaly\" : \" \"\n}`\n)}\n\nfunction _leg(colorView,Plot)\n{\n  return colorView === \"Anomaly\"\n    ? Plot.legend({\n        marginLeft: 10,\n        marginRight: 10,\n\n        style: {\n          backgroundColor: \"#000000\",\n          color: \"#e0f5ee\",\n          fontSize: \"16px\",\n          fontWeight: \"normal\"\n        },\n        color: {\n          type: \"diverging\",\n          domain: [-4, 4],\n          pivot: 0,\n          reverse: true,\n          legend: true,\n          label: \"\"\n        }\n      })\n    : Plot.legend({\n        color: {\n          type: \"categorical\",\n          domain: [\"No heatwave\", \"Moderate\", \"Strong\", \"Severe\", \"Extreme\"],\n          range: [\"lightblue\", \"#FEDB67\", \"#f26722\", \"#cd3728\", \"#7E1416\"] // use the \"accent\" scheme\n        },\n        style: {\n          backgroundColor: \"#000000\",\n          color: \"#e0f5ee\",\n          fontSize: \"16px\",\n          fontWeight: \"normal\"\n        }\n      });\n}\n\n\nfunction _lineChart(clickedSite,Plot,limitsDelayed,yMaxDomainToUse,time1,d3,dateForLabel,yValueForLabel,buoyClicked,colors,dateForLabelVal,currentValue,siteClicked,colorView,md)\n{\n  const noData = \"No data during time period selected\";\n  const taLabel = clickedSite.length === 0 ? \"\" : \"Temperature anomaly (°C)\";\n  const HWlineChart = Plot.plot({\n    x: {\n      domain: [limitsDelayed[0], limitsDelayed[1]]\n    },\n    y: {\n      label: \"↑ SST (°C)\",\n      domain: [0, yMaxDomainToUse]\n    },\n    style: {\n      backgroundColor: \"#000000\",\n      color: \"#e0f5ee\",\n      // fontFamily: \"system-ui\",\n      fontSize: 10\n      // overflow: \"visible\"\n    },\n    height: 500,\n    marginTop: 20,\n    className: \"hwclass\",\n    // y: {\n    //   nice: true\n    // },\n    // x: {\n    //   nice: true\n    // },\n    marks: [\n      Plot.dot(clickedSite, {\n        x: \"date\",\n        y: \"sst\",\n        stroke: \"category\",\n        fill: \"category\"\n      }),\n      // Plot.line(clickedSite, {\n      //   x: \"date\",\n      //   y: \"sst\",\n      //   stroke: \"#ccc\",\n      //   curve: \"step\",\n      //   strokeWidth: 0.5\n      // }),\n      // vertical rule to mark date/time of event\n      Plot.ruleX([time1], {\n        stroke: \"white\",\n        y1: 0,\n        y2: d3.max(clickedSite, (d) => d.sst)\n      }),\n      Plot.text(\n        [\n          {\n            x: dateForLabel,\n            y: yValueForLabel,\n            text: buoyClicked\n          }\n        ],\n        {\n          x: \"x\",\n          y: \"y\",\n          text: \"text\",\n          fontSize: 16\n        }\n      )\n    ],\n    color: {\n      domain: [\"none\", \"Moderate\", \"Strong\", \"Severe\", \"Extreme\"],\n      range: [\n        colors.get(\"none\"),\n        colors.get(\"Moderate\"),\n        colors.get(\"Strong\"),\n        colors.get(\"Severe\"),\n        colors.get(\"Extreme\")\n      ]\n      // legend: true\n    },\n\n    width: 500,\n    height: 300\n    // marginBottom: 70,\n    // label: buoyClicked\n    // title: \"some stie\"\n  });\n\n  const SSTAlineChart = Plot.plot({\n    x: {\n      domain: [limitsDelayed[0], limitsDelayed[1]]\n    },\n    y: {\n      label: \"↑ SST (°C)\",\n      domain: [0, yMaxDomainToUse]\n    },\n    style: {\n      backgroundColor: \"#000000\",\n      color: \"#e0f5ee\",\n      // fontFamily: \"system-ui\",\n      fontSize: 10\n      // overflow: \"visible\"\n    },\n    height: 500,\n    marginTop: 20,\n    className: \"hwclass\",\n    // y: {\n    //   nice: true\n    // },\n    // x: {\n    //   nice: true\n    // },\n    marks: [\n      Plot.dot(clickedSite, {\n        x: \"date\",\n        y: \"sst\",\n        stroke: \"ssta\",\n        fill: \"ssta\"\n      }),\n      // Plot.line(clickedSite, {\n      //   x: \"date\",\n      //   y: \"sst\",\n      //   stroke: \"#ccc\",\n      //   curve: \"step\",\n      //   strokeWidth: 0.5\n      // }),\n      // vertical rule to mark date/time of event\n      Plot.ruleX([time1], {\n        stroke: \"white\",\n        y1: 0,\n        y2: d3.max(clickedSite, (d) => d.sst)\n      }),\n      Plot.text(\n        [\n          {\n            x: dateForLabel,\n            y: yValueForLabel,\n            text: buoyClicked\n          }\n        ],\n        {\n          x: \"x\",\n          y: \"y\",\n          text: \"text\",\n          fontSize: 16\n        }\n      ),\n      Plot.text(\n        [\n          {\n            x: dateForLabelVal,\n            y: yValueForLabel,\n            text: taLabel\n          }\n        ],\n        {\n          x: \"x\",\n          y: \"y\",\n          text: \"text\",\n          fontSize: 10\n        }\n      ),\n      Plot.text(\n        [\n          {\n            x: dateForLabelVal,\n            y: yValueForLabel - 1,\n            text: currentValue\n          }\n        ],\n        {\n          x: \"x\",\n          y: \"y\",\n          text: \"text\",\n          fontSize: 10\n        }\n      )\n    ],\n    color: {\n      type: \"diverging\",\n      domain: [-4, 4],\n      pivot: 0,\n      reverse: true\n      // legend: true,\n      // label: \"SSTA (°C) →\"\n    },\n\n    width: 500,\n    height: 300\n    // marginBottom: 70,\n    // label: buoyClicked\n    // title: \"some stie\"\n  });\n  if (siteClicked !== null) {\n    return colorView === \"Anomaly\" ? SSTAlineChart : HWlineChart;\n  } else {\n    return md``;\n  }\n}\n\n\nfunction _ind(dates,time1){return(\ndates.indexOf(time1)\n)}\n\nfunction _today(d3){return(\nd3.timeDay.offset(d3.utcDay(), -2)\n)}\n\nfunction _start(d3,today){return(\nd3.timeDay.offset(today, -365)\n)}\n\nasync function _limitsDelayed(Promises,focus)\n{\n  await Promises.delay(1000, \"\"); // delay returning\n  return focus;\n}\n\n\nasync function _limitsDelayedMHW(Promises,focus)\n{\n  await Promises.delay(1000, \"\"); // delay returning\n  return focus;\n}\n\n\nfunction _30(md){return(\nmd`## bar charts`\n)}\n\nfunction _focusHeight(){return(\n60\n)}\n\nfunction _margin(){return(\n{ top: 4, right: 20, bottom: 30, left: 10 }\n)}\n\nfunction _x1(d3,margin,width,alldates){return(\nd3\n  .scaleBand()\n  .range([margin.left, width - margin.right], 0.01)\n  .padding(0.1)\n  .domain(alldates)\n)}\n\nfunction _x1MHW(d3,margin,width,brusedAllDatesMHW){return(\nd3\n  .scaleBand()\n  .range([margin.left, width - margin.right], 0.01)\n  .padding(0.01)\n  .domain(brusedAllDatesMHW)\n)}\n\nfunction _xAxis(margin,d3,width){return(\n(g, x, height) =>\n  g\n    .attr(\"transform\", `translate(0,${height - margin.bottom})`)\n    .call(\n      d3\n        .axisBottom(x)\n        .ticks(width / 80)\n        .tickSizeOuter(0)\n    )\n    .style(\"stroke\", \"#e0f5ee\")\n)}\n\nfunction _y(d3,focusHeight,margin){return(\nd3\n  .scaleLinear()\n  .domain([0, 1])\n  .range([focusHeight - margin.bottom, margin.top])\n)}\n\nfunction _brushedDataMHW(monthlyGrouped,focus){return(\nmonthlyGrouped.filter(\n  (d) => d.date >= focus[0] && new Date(d.date) < new Date(focus[1])\n)\n)}\n\nfunction _brusedAllDates(d3,focus){return(\nd3.timeMonth\n  .range(new Date(focus[0]), focus[1])\n  .map((d) => d.toISOString().substring(0, 10))\n)}\n\nfunction _brusedAllDatesMHW(d3,focus){return(\nd3.timeMonth\n  .range(new Date(focus[0]), new Date(focus[1]))\n  .map((d) => d.toISOString().substring(0, 10))\n)}\n\nfunction _x(d3,focus,margin,width){return(\nd3\n  .scaleTime()\n  .domain(focus)\n  .range([margin.left, width - margin.right])\n)}\n\nfunction _xMHW(d3,focus,margin,width){return(\nd3\n    .scaleTime()\n    .domain(focus)\n    .range([margin.left, width - margin.right])\n)}\n\nfunction _stack(d3,cats){return(\nd3.stack().keys(cats)\n)}\n\nfunction _brushedData(data,focus){return(\ndata.filter(\n  (d) => d.date >= focus[0] && new Date(d.date) < new Date(focus[1])\n)\n)}\n\nfunction _sstaColors(d3){return(\nd3.scaleDiverging(d3.interpolateRdBu).domain([4, 0, -4])\n)}\n\nfunction _brushHandle(arc){return(\n(g, selection, margin, height) =>\n  g\n    .selectAll(\".handle--custom\")\n    .data([{ type: \"w\" }, { type: \"e\" }])\n    .join((enter) =>\n      enter\n        .append(\"path\")\n        .attr(\"class\", \"handle--custom\")\n        .attr(\"fill\", \"#afafaf\")\n        .attr(\"fill-opacity\", 0.8)\n        .attr(\"stroke\", \"#000\")\n        .attr(\"stroke-width\", 1)\n        .attr(\"cursor\", \"ew-resize\")\n        .attr(\"d\", arc)\n    )\n    .attr(\"display\", selection === null ? \"none\" : null)\n    .attr(\n      \"transform\",\n      selection === null\n        ? null\n        : (d, i) =>\n            `translate(${selection[i]},${\n              (height + margin.top - margin.bottom) / 2\n            })`\n    )\n)}\n\nfunction _arc(d3)\n{\n  let height = 50;\n  let margin = { top: 10, right: 20, bottom: 20, left: 95 };\n  return d3\n    .arc()\n    .innerRadius(0)\n    .outerRadius((height - margin.top - margin.bottom) / 2)\n    .startAngle(0)\n    .endAngle((d, i) => (i ? Math.PI : -Math.PI));\n}\n\n\nfunction _data(dataSsta)\n{\n  const out = [];\n  Object.keys(dataSsta).forEach((d) => {\n    out.push({\n      date: new Date(d.slice(0, 4) + \"-\" + d.slice(-2)),\n      value: dataSsta[d][0]\n    });\n  });\n  return out;\n}\n\n\nfunction _ns(Inputs){return(\nInputs.text().classList[0]\n)}\n\nfunction _datesToPlot(datesCopy,limitsDelayed){return(\ndatesCopy.filter(\n  (d) => d >= limitsDelayed[0] && d <= limitsDelayed[1]\n)\n)}\n\nfunction _dates(d3,dateExtent){return(\nd3.timeDay\n  .range(new Date(dateExtent[0]), new Date(dateExtent[1]))\n  .map((d) => +d)\n)}\n\nfunction _datesCopy(dates){return(\n[...dates]\n)}\n\nfunction _dateExtent(){return(\n[new Date(\"2013-01-01\"), new Date()]\n)}\n\nfunction _siteClicked(){return(\n11\n)}\n\nfunction _54(buoys,siteClickeds){return(\nbuoys.find((d) => d.long_name === siteClickeds).pk\n)}\n\nfunction _55(siteClickeds){return(\nsiteClickeds\n)}\n\nfunction _siteClickeds(Inputs,buoys){return(\nInputs.select(\n  [null].concat(buoys.map((d) => d.long_name)),\n  {\n    label: \"site\",\n    value: \"North Hecate Strait\"\n  }\n)\n)}\n\nfunction _currentValue(clickedSite,time1)\n{\n  let value;\n  if (clickedSite.length !== 0) {\n    value = clickedSite\n      .find(\n        (d) =>\n          new Date(d.date).toISOString().substring(0, 10) ===\n          new Date(time1).toISOString().substring(0, 10)\n      )\n      .ssta.toFixed(2);\n  } else {\n    value = \"\";\n  }\n\n  // if (clickedSite.length === 0) value = \"\";\n  return value;\n}\n\n\nfunction _yMaxDomainToUse(clickedSite,d3)\n{\n  return clickedSite[Math.floor(clickedSite.length / 1.2)] === undefined ?\n    18 :  d3.max(clickedSite, (d) => d.sst) * 1.1\n}\n\n\nfunction _yValueForLabel(clickedSite,d3)\n{\n  return clickedSite[Math.floor(clickedSite.length / 1.2)] === undefined\n    ? 18\n    : d3.max(clickedSite, (d) => d.sst) * 1.1;\n}\n\n\nfunction _dateForLabel(clickedSite,d3,limitsDelayed)\n{\n  return clickedSite[Math.floor(clickedSite.length / 1.2)] === undefined\n    ? d3.timeDay.offset(limitsDelayed[0], 30)\n    : clickedSite[Math.floor(clickedSite.length * 0.2)].date;\n}\n\n\nfunction _dateForLabelVal(clickedSite,d3,limitsDelayed)\n{\n  return clickedSite[Math.floor(clickedSite.length / 2)] === undefined\n    ? d3.timeDay.offset(limitsDelayed[0], 30)\n    : clickedSite[Math.floor(clickedSite.length * 0.8)].date;\n}\n\n\nfunction _buoyClicked(buoys,siteClicked){return(\nbuoys.find((d) => d.pk === siteClicked).long_name\n)}\n\nfunction _63(buoyDailyData){return(\nbuoyDailyData[buoyDailyData.length - 1]\n)}\n\nfunction _clickedSite(buoyDailyData,siteClicked){return(\nbuoyDailyData.filter((d) => d.station === siteClicked)\n)}\n\nfunction _colors(){return(\nnew Map([\n  [\"avg\", \"#5b6187\"],\n  [\"thresh\", \"#FEDB67\"],\n  [\"below\", \"#89119c\"], // actuals below forecast\n  [\"above\", \"pink\"], // actuals above forecast\n  [\"none\", \"lightblue\"],\n  [\"Moderate\", \"#FEDB67\"],\n  [\"Strong\", \"#f26722\"],\n  [\"Severe\", \"#cd3728\"],\n  [\"Extreme\", \"#7E1416\"],\n\n  [\"seas\", \"pink\"]\n])\n)}\n\nfunction _buoys(){return(\n[\n  {\n    short_name: \"C46004\",\n    lat: 50.94,\n    lon: -135.87,\n    long_name: \"Middle Nomad\",\n    pk: 1\n  },\n  {\n    short_name: \"C46036\",\n    lat: 48.3,\n    lon: -133.86,\n    long_name: \"South Nomad\",\n    pk: 2\n  },\n  {\n    short_name: \"C46131\",\n    lat: 49.91,\n    lon: -124.99,\n    long_name: \"Sentry Shoal\",\n    pk: 3\n  },\n  {\n    short_name: \"C46132\",\n    lat: 49.74,\n    lon: -127.93,\n    long_name: \"South Brooks\",\n    pk: 4\n  },\n  // {\n  //   short_name: \"C46134\",\n  //   lat: 48.66,\n  //   lon: -123.48,\n  //   long_name: \"Pat Bay Test Buoy\",\n  //   pk: 5\n  // },\n  {\n    short_name: \"C46145\",\n    lat: 54.38,\n    lon: -132.42,\n    long_name: \"Central Dixon Entran\",\n    pk: 6\n  },\n  {\n    short_name: \"C46146\",\n    lat: 49.34,\n    lon: -123.73,\n    long_name: \"Halibut Bank\",\n    pk: 7\n  },\n  {\n    short_name: \"C46147\",\n    lat: 51.83,\n    lon: -131.23,\n    long_name: \"South Moresby\",\n    pk: 8\n  },\n  // {\n  //   short_name: \"C46181\",\n  //   lat: 53.82,\n  //   lon: -128.84,\n  //   long_name: \"Nanakwa Shoal\",\n  //   pk: 9\n  // },\n  // {\n  //   short_name: \"C46182\",\n  //   lat: 49.48,\n  //   lon: -123.29,\n  //   long_name: \"Pam Rocks\",\n  //   pk: 10\n  // },\n  {\n    short_name: \"C46183\",\n    lat: 53.57,\n    lon: -131.14,\n    long_name: \"North Hecate Strait\",\n    pk: 11\n  },\n  {\n    short_name: \"C46184\",\n    lat: 53.92,\n    lon: -138.85,\n    long_name: \"North Nomad\",\n    pk: 12\n  },\n  {\n    short_name: \"C46185\",\n    lat: 52.42,\n    lon: -129.79,\n    long_name: \"South Hecate Strait\",\n    pk: 13\n  },\n  {\n    short_name: \"C46204\",\n    lat: 51.38,\n    lon: -128.77,\n    long_name: \"West Sea Otter\",\n    pk: 14\n  },\n  {\n    short_name: \"C46205\",\n    lat: 54.3,\n    lon: -133.4,\n    long_name: \"West Dixon Entrance\",\n    pk: 15\n  },\n  {\n    short_name: \"C46206\",\n    lat: 48.83,\n    lon: -126,\n    long_name: \"La Perouse Bank\",\n    pk: 16\n  },\n  {\n    short_name: \"C46207\",\n    lat: 50.88,\n    lon: -129.91,\n    long_name: \"East Dellwood\",\n    pk: 17\n  },\n  {\n    short_name: \"C46208\",\n    lat: 52.51,\n    lon: -132.69,\n    long_name: \"West Moresby\",\n    pk: 18\n  }\n]\n)}\n\nfunction _HWsForDate(buoyDailyData,time1){return(\nbuoyDailyData.filter(\n  (d) =>\n    new Date(time1).toISOString().substring(0, 10) ===\n    new Date(d.result_time).toISOString().substring(0, 10)\n)\n)}\n\nfunction _dayBeforeStart(focus)\n{\n  const b = Object.assign(focus[0]);\n  const fistDate = new Date(b);\n\n  return new Date(fistDate.setDate(fistDate.getDate() - 1))\n    .toISOString()\n    .substring(0, 10);\n}\n\n\nfunction _buoyDailyData(dayBeforeStart,limitsDelayed)\n{\n  // let daysago = new Date().getDate() - 7;\n  // let st = new Date(new Date().setDate(daysago));\n\n  return fetch(\n    \"https://t6r95rekqe.execute-api.us-east-1.amazonaws.com/dev/getDailySSTStats?startDate=\" +\n      dayBeforeStart +\n      \"&endDate=\" +\n      limitsDelayed[1].toISOString().substring(0, 10) +\n      \"\"\n  )\n    .then((resp) => resp.json())\n    .then((data) => {\n      data.forEach((d) => {\n        d.ssta = d.sst - d.seas;\n        d.diff = d.thresh;\n        \n        d.diffStrong = d.thresh;\n        d.diffExtreme = d.thresh;\n        d.diffSevere = d.thresh;\n        if (d.category === \"Strong\") {\n          d.diffStrong = Math.max(d.thresh, d.sst);\n        }\n        if (d.category === \"Extreme\") {\n          d.diffExtreme = Math.max(d.thresh, d.sst);\n        }\n        if (d.category === \"Severe\") {\n          d.diffSevere = Math.max(d.thresh, d.sst);\n        }\n        if (d.category === \"Moderate\") {\n          d.diff = Math.max(d.thresh, d.sst);\n        }\n        if (d.category === null) {\n          d.category = \"none\";\n        }\n        d.date = new Date(d.result_time);\n      });\n      return data;\n    });\n}\n\n\nfunction _height(){return(\n500\n)}\n\nfunction _colorMHW(d3){return(\nd3\n  .scaleOrdinal()\n  .domain([\"none\", \"Moderate\", \"Strong\", \"Severe\",\"Extreme\"])\n  .range([\"#31a354\", \"#FEDB67\", \"#f26722\", \"#7E1416\", \"#cd3728\"])\n)}\n\nfunction _opacityMHW(d3){return(\nd3\n  .scaleOrdinal()\n  .domain([\"none\", \"Moderate\", \"Strong\", \"Severe\", \"Extreme\"])\n)}\n\nfunction _numFormat(d3){return(\nd3.format(\",d\")\n)}\n\nfunction _timeFormat(d3){return(\nd3.timeFormat(\"%Y-%m-%d\")\n)}\n\nfunction _d3(require){return(\nrequire(\"d3@6\")\n)}\n\nfunction _p(time1){return(\nnew Date(time1).toISOString().substring(0, 10)\n)}\n\nfunction _hwEvent(){return(\n[\n  { date: \"2013-10-01\", value: 1 },\n  { date: \"2013-11-01\", value: 1 },\n  { date: \"2013-12-01\", value: 1 },\n  { date: \"2014-01-01\", value: 1 },\n  { date: \"2014-02-01\", value: 1 },\n  { date: \"2014-03-01\", value: 1 },\n  { date: \"2014-04-01\", value: 1 },\n  { date: \"2014-05-01\", value: 1 },\n  { date: \"2014-06-01\", value: 1 },\n  { date: \"2014-07-01\", value: 1 },\n  { date: \"2014-08-01\", value: 1 },\n  { date: \"2014-09-01\", value: 1 },\n  { date: \"2014-10-01\", value: 1 },\n  { date: \"2014-11-01\", value: 1 },\n  { date: \"2014-12-01\", value: 1 },\n  { date: \"2015-01-01\", value: 1 },\n  { date: \"2015-02-01\", value: 1 },\n  { date: \"2015-03-01\", value: 1 },\n  { date: \"2015-04-01\", value: 1 },\n  { date: \"2015-05-01\", value: 1 },\n  { date: \"2015-06-01\", value: 1 },\n  { date: \"2015-07-01\", value: 1 },\n  { date: \"2015-08-01\", value: 1 },\n  { date: \"2015-09-01\", value: 1 },\n  { date: \"2015-10-01\", value: 1 },\n  { date: \"2015-11-01\", value: 1 },\n  { date: \"2015-12-01\", value: 1 },\n  { date: \"2016-01-01\", value: 1 },\n  { date: \"2016-02-01\", value: 1 },\n  { date: \"2016-03-01\", value: 1 },\n  { date: \"2016-04-01\", value: 1 },\n  { date: \"2016-05-01\", value: 1 },\n  { date: \"2016-06-01\", value: 1 },\n  { date: \"2016-07-01\", value: 1 },\n  { date: \"2016-08-01\", value: 1 },\n  { date: \"2016-09-01\", value: 1 },\n  { date: \"2016-10-01\", value: 1 },\n  { date: \"2016-11-01\", value: 1 },\n  { date: \"2019-08-01\", value: 1 },\n  { date: \"2019-09-01\", value: 1 },\n  { date: \"2019-10-01\", value: 1 },\n  { date: \"2019-11-01\", value: 1 }\n]\n)}\n\nfunction _alldates(d3,dateExtent){return(\nd3.timeMonth\n  .range(new Date(dateExtent[0]), new Date(dateExtent[1]))\n  .map((d) => d.toISOString().substring(0, 10))\n)}\n\nfunction _allmonths(mhwBarData){return(\n[...new Set(mhwBarData.map((d) => d.date.slice(0, 7)))]\n)}\n\nfunction _85(monthlyTots){return(\nmonthlyTots.filter((d) => d.date === \"2013-01\")\n)}\n\nfunction _monthlyTots(allmonths,cats,d3,mhwBarData)\n{\n  const out = [];\n  allmonths.forEach((month) => {\n    let t = 0;\n    for (let i = 0; i < cats.length; i++) {\n      let s = d3.sum(\n        mhwBarData.filter((d) => {\n          return +new Date(d.month) === +new Date(month);\n        }),\n        (d) => d[cats[i]]\n      );\n      // 15541891 is the total amount of points\n      out.push({ date: month, [cats[i]]: s });\n      t += s;\n      // console.log(month, [cats[i]], s);\n      // console.log(t);\n    }\n    // console.log(t);\n  });\n  return out;\n}\n\n\nfunction _monthlyGrouped(groups,cats)\n{\n  const out = [];\n  groups.forEach((d) => {\n    let sum = 0;\n    d[1].forEach((d) => {\n      sum += Object.values(d)[1];\n    });\n    // return sum;\n    out.push({\n      date: new Date(d[0]),\n      [cats[0]]: d[1][0][cats[0]] / sum,\n      [cats[1]]: d[1][1][cats[1]] / sum,\n      [cats[2]]: d[1][2][cats[2]] / sum,\n      [cats[3]]: d[1][3][cats[3]] / sum,\n      [cats[4]]: d[1][4][cats[4]] / sum,\n      sum: sum\n    });\n  });\n  return out;\n}\n\n\nfunction _cats(){return(\n[\"none\", \"Moderate\", \"Strong\", \"Extreme\", \"Severe\"]\n)}\n\nfunction _groups(d3,monthlyTots){return(\nd3.groups(monthlyTots, (d) => +new Date(d.date))\n)}\n\nasync function _mhwBarData(FileAttachment)\n{\n  const raw = await FileAttachment(\"monthlyMHW@4.json\").json();\n  const out = [];\n  Object.keys(raw).forEach((d) => {\n    for (let i = 0; i < 1; i++) {\n      let tot = raw[d].reduce((a, b) => a + b, 0);\n      out.push({\n        date: d.replace(/(\\d{4})(\\d{2})(\\d{2})/g, \"$1-$2-$3\"),\n        month: d.replace(/(\\d{4})(\\d{2})(\\d{2})/g, \"$1-$2-$3\").slice(0, 7),\n        none: raw[d][0],\n        Moderate: raw[d][1],\n        Strong: raw[d][2],\n        Extreme: raw[d][3],\n        Severe: raw[d][4]\n      });\n    }\n  });\n  return out;\n}\n\n\nfunction _tt(FileAttachment){return(\nFileAttachment(\"monthlyMHW@4.json\").json()\n)}\n\nfunction _92(dataSsta){return(\ndataSsta[\"202203\"]\n)}\n\nfunction _93(dataSstaOld){return(\ndataSstaOld[\"202204\"]\n)}\n\nfunction _dataSsta(){return(\nfetch(\n  \"https://raw.githubusercontent.com/HakaiInstitute/ssta_images/gh-pages/src/monthly.json\",\n  { Method: \"GET\" }\n).then((response) => {\n  return response.json();\n})\n)}\n\nfunction _dataSstaOld(FileAttachment){return(\nFileAttachment(\"monthly@7.json\").json()\n)}\n\nexport default function define(runtime, observer) {\n  const main = runtime.module();\n  function toString() { return this.url; }\n  const fileAttachments = new Map([\n    [\"monthly@7.json\", {url: new URL(\"./files/a3fbadf29709e974764d626a8843acf9134d9d813173218a60e5bbdf612fc8f873cb8fc46bf03b10d42dff7e66f3861625456633c0b887fee99eb6c0c0ac42d9.json\", import.meta.url), mimeType: \"application/json\", toString}],\n    [\"monthlyMHW@4.json\", {url: new URL(\"./files/4ddb55c620ff13535fa12218798e1510c0f1db6a6e897ffa6e652a22eaf74ee822f2d46311a4d888d73baa482e4b6e4fafa603c2c82635435770e6ba7fcdae87.json\", import.meta.url), mimeType: \"application/json\", toString}]\n  ]);\n  main.builtin(\"FileAttachment\", runtime.fileAttachments(name => fileAttachments.get(name)));\n  main.variable(observer()).define([\"md\"], _1);\n  main.variable(observer(\"curDate\")).define(\"curDate\", [\"md\",\"timeFormat\",\"time1\"], _curDate);\n  main.variable(observer()).define([\"md\"], _3);\n  main.variable(observer(\"endPlayDate\")).define(\"endPlayDate\", _endPlayDate);\n  main.variable(observer(\"style\")).define(\"style\", [\"html\",\"width\",\"ns\"], _style);\n  main.variable(observer()).define([\"brushedData\"], _6);\n  main.variable(observer()).define([\"md\"], _7);\n  main.variable(observer()).define([\"time1\"], _9);\n  main.variable(observer(\"viewof time1\")).define(\"viewof time1\", [\"Scrubber\",\"datesToPlot\",\"newNum\"], _time1);\n  main.variable(observer(\"time1\")).define(\"time1\", [\"Generators\", \"viewof time1\"], (G, _) => G.input(_));\n  main.variable(observer()).define([\"md\"], _11);\n  main.variable(observer(\"viewof colorView\")).define(\"viewof colorView\", [\"Inputs\",\"html\"], _colorView);\n  main.variable(observer(\"colorView\")).define(\"colorView\", [\"Generators\", \"viewof colorView\"], (G, _) => G.input(_));\n  main.define(\"initial newNum\", _newNum);\n  main.variable(observer(\"mutable newNum\")).define(\"mutable newNum\", [\"Mutable\", \"initial newNum\"], (M, _) => new M(_));\n  main.variable(observer(\"newNum\")).define(\"newNum\", [\"mutable newNum\"], _ => _.generator);\n  main.variable(observer(\"chart\")).define(\"chart\", [\"colorView\",\"focusHeight\",\"d3\",\"width\",\"margin\",\"xMHW\",\"stack\",\"brushedDataMHW\",\"colors\",\"x1MHW\",\"time1\",\"x\",\"drag\",\"brusedAllDates\",\"brushedData\",\"sstaColors\"], _chart);\n  main.variable(observer(\"drag\")).define(\"drag\", [\"d3\",\"x\",\"focus\",\"endPlayDate\",\"datesToPlot\",\"mutable newNum\",\"viewof time1\"], _drag);\n  main.variable(observer()).define([\"focus\"], _17);\n  main.define(\"initial debug1\", _debug1);\n  main.variable(observer(\"mutable debug1\")).define(\"mutable debug1\", [\"Mutable\", \"initial debug1\"], (M, _) => new M(_));\n  main.variable(observer(\"debug1\")).define(\"debug1\", [\"mutable debug1\"], _ => _.generator);\n  main.variable(observer(\"viewof focus\")).define(\"viewof focus\", [\"colorView\",\"d3\",\"width\",\"focusHeight\",\"dateExtent\",\"margin\",\"xAxis\",\"stack\",\"monthlyGrouped\",\"colors\",\"x1\",\"y\",\"data\",\"sstaColors\",\"mutable debug1\"], _focus);\n  main.variable(observer(\"focus\")).define(\"focus\", [\"Generators\", \"viewof focus\"], (G, _) => G.input(_));\n  main.variable(observer(\"legTitle\")).define(\"legTitle\", [\"md\",\"colorView\"], _legTitle);\n  main.variable(observer(\"leg\")).define(\"leg\", [\"colorView\",\"Plot\"], _leg);\n  main.variable(observer(\"viewof lineChart\")).define(\"viewof lineChart\", [\"clickedSite\",\"Plot\",\"limitsDelayed\",\"yMaxDomainToUse\",\"time1\",\"d3\",\"dateForLabel\",\"yValueForLabel\",\"buoyClicked\",\"colors\",\"dateForLabelVal\",\"currentValue\",\"siteClicked\",\"colorView\",\"md\"], _lineChart);\n  main.variable(observer(\"lineChart\")).define(\"lineChart\", [\"Generators\", \"viewof lineChart\"], (G, _) => G.input(_));\n  main.variable(observer(\"ind\")).define(\"ind\", [\"dates\",\"time1\"], _ind);\n  main.variable(observer(\"today\")).define(\"today\", [\"d3\"], _today);\n  main.variable(observer(\"start\")).define(\"start\", [\"d3\",\"today\"], _start);\n  main.variable(observer(\"limitsDelayed\")).define(\"limitsDelayed\", [\"Promises\",\"focus\"], _limitsDelayed);\n  main.variable(observer(\"limitsDelayedMHW\")).define(\"limitsDelayedMHW\", [\"Promises\",\"focus\"], _limitsDelayedMHW);\n  main.variable(observer()).define([\"md\"], _30);\n  main.variable(observer(\"focusHeight\")).define(\"focusHeight\", _focusHeight);\n  main.variable(observer(\"margin\")).define(\"margin\", _margin);\n  main.variable(observer(\"x1\")).define(\"x1\", [\"d3\",\"margin\",\"width\",\"alldates\"], _x1);\n  main.variable(observer(\"x1MHW\")).define(\"x1MHW\", [\"d3\",\"margin\",\"width\",\"brusedAllDatesMHW\"], _x1MHW);\n  main.variable(observer(\"xAxis\")).define(\"xAxis\", [\"margin\",\"d3\",\"width\"], _xAxis);\n  main.variable(observer(\"y\")).define(\"y\", [\"d3\",\"focusHeight\",\"margin\"], _y);\n  main.variable(observer(\"brushedDataMHW\")).define(\"brushedDataMHW\", [\"monthlyGrouped\",\"focus\"], _brushedDataMHW);\n  main.variable(observer(\"brusedAllDates\")).define(\"brusedAllDates\", [\"d3\",\"focus\"], _brusedAllDates);\n  main.variable(observer(\"brusedAllDatesMHW\")).define(\"brusedAllDatesMHW\", [\"d3\",\"focus\"], _brusedAllDatesMHW);\n  main.variable(observer(\"x\")).define(\"x\", [\"d3\",\"focus\",\"margin\",\"width\"], _x);\n  main.variable(observer(\"xMHW\")).define(\"xMHW\", [\"d3\",\"focus\",\"margin\",\"width\"], _xMHW);\n  main.variable(observer(\"stack\")).define(\"stack\", [\"d3\",\"cats\"], _stack);\n  main.variable(observer(\"brushedData\")).define(\"brushedData\", [\"data\",\"focus\"], _brushedData);\n  main.variable(observer(\"sstaColors\")).define(\"sstaColors\", [\"d3\"], _sstaColors);\n  main.variable(observer(\"brushHandle\")).define(\"brushHandle\", [\"arc\"], _brushHandle);\n  main.variable(observer(\"arc\")).define(\"arc\", [\"d3\"], _arc);\n  main.variable(observer(\"data\")).define(\"data\", [\"dataSsta\"], _data);\n  main.variable(observer(\"ns\")).define(\"ns\", [\"Inputs\"], _ns);\n  main.variable(observer(\"datesToPlot\")).define(\"datesToPlot\", [\"datesCopy\",\"limitsDelayed\"], _datesToPlot);\n  main.variable(observer(\"dates\")).define(\"dates\", [\"d3\",\"dateExtent\"], _dates);\n  main.variable(observer(\"datesCopy\")).define(\"datesCopy\", [\"dates\"], _datesCopy);\n  main.variable(observer(\"dateExtent\")).define(\"dateExtent\", _dateExtent);\n  main.define(\"initial siteClicked\", _siteClicked);\n  main.variable(observer(\"mutable siteClicked\")).define(\"mutable siteClicked\", [\"Mutable\", \"initial siteClicked\"], (M, _) => new M(_));\n  main.variable(observer(\"siteClicked\")).define(\"siteClicked\", [\"mutable siteClicked\"], _ => _.generator);\n  main.variable(observer()).define([\"buoys\",\"siteClickeds\"], _54);\n  main.variable(observer()).define([\"siteClickeds\"], _55);\n  main.variable(observer(\"viewof siteClickeds\")).define(\"viewof siteClickeds\", [\"Inputs\",\"buoys\"], _siteClickeds);\n  main.variable(observer(\"siteClickeds\")).define(\"siteClickeds\", [\"Generators\", \"viewof siteClickeds\"], (G, _) => G.input(_));\n  main.variable(observer(\"currentValue\")).define(\"currentValue\", [\"clickedSite\",\"time1\"], _currentValue);\n  main.variable(observer(\"yMaxDomainToUse\")).define(\"yMaxDomainToUse\", [\"clickedSite\",\"d3\"], _yMaxDomainToUse);\n  main.variable(observer(\"yValueForLabel\")).define(\"yValueForLabel\", [\"clickedSite\",\"d3\"], _yValueForLabel);\n  main.variable(observer(\"dateForLabel\")).define(\"dateForLabel\", [\"clickedSite\",\"d3\",\"limitsDelayed\"], _dateForLabel);\n  main.variable(observer(\"dateForLabelVal\")).define(\"dateForLabelVal\", [\"clickedSite\",\"d3\",\"limitsDelayed\"], _dateForLabelVal);\n  main.variable(observer(\"buoyClicked\")).define(\"buoyClicked\", [\"buoys\",\"siteClicked\"], _buoyClicked);\n  main.variable(observer()).define([\"buoyDailyData\"], _63);\n  main.variable(observer(\"clickedSite\")).define(\"clickedSite\", [\"buoyDailyData\",\"siteClicked\"], _clickedSite);\n  main.variable(observer(\"colors\")).define(\"colors\", _colors);\n  main.variable(observer(\"buoys\")).define(\"buoys\", _buoys);\n  main.variable(observer(\"HWsForDate\")).define(\"HWsForDate\", [\"buoyDailyData\",\"time1\"], _HWsForDate);\n  main.variable(observer(\"dayBeforeStart\")).define(\"dayBeforeStart\", [\"focus\"], _dayBeforeStart);\n  main.variable(observer(\"buoyDailyData\")).define(\"buoyDailyData\", [\"dayBeforeStart\",\"limitsDelayed\"], _buoyDailyData);\n  main.variable(observer(\"height\")).define(\"height\", _height);\n  main.variable(observer(\"colorMHW\")).define(\"colorMHW\", [\"d3\"], _colorMHW);\n  main.variable(observer(\"opacityMHW\")).define(\"opacityMHW\", [\"d3\"], _opacityMHW);\n  main.variable(observer(\"numFormat\")).define(\"numFormat\", [\"d3\"], _numFormat);\n  main.variable(observer(\"timeFormat\")).define(\"timeFormat\", [\"d3\"], _timeFormat);\n  main.variable(observer(\"d3\")).define(\"d3\", [\"require\"], _d3);\n  main.define(\"initial p\", [\"time1\"], _p);\n  main.variable(observer(\"mutable p\")).define(\"mutable p\", [\"Mutable\", \"initial p\"], (M, _) => new M(_));\n  main.variable(observer(\"p\")).define(\"p\", [\"mutable p\"], _ => _.generator);\n  main.variable(observer(\"hwEvent\")).define(\"hwEvent\", _hwEvent);\n  main.variable(observer(\"alldates\")).define(\"alldates\", [\"d3\",\"dateExtent\"], _alldates);\n  main.variable(observer(\"allmonths\")).define(\"allmonths\", [\"mhwBarData\"], _allmonths);\n  main.variable(observer()).define([\"monthlyTots\"], _85);\n  main.variable(observer(\"monthlyTots\")).define(\"monthlyTots\", [\"allmonths\",\"cats\",\"d3\",\"mhwBarData\"], _monthlyTots);\n  main.variable(observer(\"monthlyGrouped\")).define(\"monthlyGrouped\", [\"groups\",\"cats\"], _monthlyGrouped);\n  main.variable(observer(\"cats\")).define(\"cats\", _cats);\n  main.variable(observer(\"groups\")).define(\"groups\", [\"d3\",\"monthlyTots\"], _groups);\n  main.variable(observer(\"mhwBarData\")).define(\"mhwBarData\", [\"FileAttachment\"], _mhwBarData);\n  main.variable(observer(\"tt\")).define(\"tt\", [\"FileAttachment\"], _tt);\n  main.variable(observer()).define([\"dataSsta\"], _92);\n  main.variable(observer()).define([\"dataSstaOld\"], _93);\n  main.variable(observer(\"dataSsta\")).define(\"dataSsta\", _dataSsta);\n  main.variable(observer(\"dataSstaOld\")).define(\"dataSstaOld\", [\"FileAttachment\"], _dataSstaOld);\n  const child1 = runtime.module(define1);\n  main.import(\"Scrubber\", child1);\n  return main;\n}\n","// https://observablehq.com/@mbrownshoes/stylized-scrubber@438\nfunction _1(md){return(\nmd`# Stylized Scrubber\n\n\nThis reusable input is intended to drive animations while providing the reader interactive control on demand: the animation pauses when the user interacts with the slider, but can be resumed by clicking the play button. For examples, see [Bar Chart Race](/@mbostock/bar-chart-race-with-scrubber), [The Wealth & Health of Nations](/@mbostock/the-wealth-health-of-nations), [Solar Path](/@mbostock/solar-path), or [Animated Treemap](/@d3/animated-treemap).`\n)}\n\nfunction _2(md){return(\nmd`To use in your notebook:\n\n~~~js\nimport {Scrubber} from \"@mbostock/scrubber\"\n~~~\n`\n)}\n\nfunction _numbers(){return(\nArray.from({ length: 100 }, (_, i) => i)\n)}\n\nfunction _5(md,i){return(\nmd`The current value of *i* is ${i}.`\n)}\n\nfunction _6(md){return(\nmd`Given an array of *values* representing the discrete frames of the animation, such as an array of numbers or dates, Scrubber returns a [view-compatible input](/@observablehq/introduction-to-views). (It uses the [disposal promise](/@mbostock/disposal) to stop the animation automatically on invalidation.)`\n)}\n\nfunction _7(md){return(\nmd`## Options\n\nScrubber has several options which you can pass as the second argument.`\n)}\n\nfunction _autoplay(md){return(\nmd`The *autoplay* option, which defaults to true, specifies whether the animation plays automatically. Set it to false to require the reader to click on the play button.`\n)}\n\nfunction _9(Scrubber,numbers){return(\nScrubber(numbers, {autoplay: false})\n)}\n\nfunction _loop(md){return(\nmd`The *loop* option, which defaults to true, specifies whether the animation should automatically restart from the beginning after the end is reached. Set it to false to require the reader to click the play button to restart the animation after it ends.`\n)}\n\nfunction _13(md){return(\nmd`The *alternate* option, which defaults to false, specifies whether the animation should reverse direction when it reaches the end, rather than repeat from the start.`\n)}\n\nfunction _14(Scrubber,numbers){return(\nScrubber(numbers, {loop: false, alternate: true})\n)}\n\nfunction _delay(md){return(\nmd`The *delay* option, which defaults to null, specifies how long to wait between frames in milliseconds. A null value means to use [requestAnimationFrame](https://developer.mozilla.org/en-US/docs/Web/API/window/requestAnimationFrame), which typically means sixty times per second (about 17ms). Non-null delays use [setInterval](https://developer.mozilla.org/en-US/docs/Web/API/WindowOrWorkerGlobalScope/setInterval).`\n)}\n\nfunction _loopDelay(md){return(\nmd`The *loopDelay* option, which defaults to 0, specifies how long to wait before looping in milliseconds. This can be paired with the *initial* option to show the ending value before the animation starts anew from the beginning.`\n)}\n\nfunction _format(md){return(\nmd`The *format* option, which defaults to the identity function, specifies how to display the currently-selected value. The *format* function is passed the current value, the current (zero-based) index, and the values array.`\n)}\n\nfunction _dates(){return(\nArray.from({length: 365}, (_, i) => {\n  const date = new Date(2019, 0, 1);\n  date.setDate(i + 1);\n  return date;\n})\n)}\n\nfunction _date(Scrubber,dates){return(\nScrubber(dates, {\n  autoplay: false,\n  loop: false,\n  format: (date) => date.toLocaleString(\"en\", { month: \"long\", day: \"numeric\" })\n})\n)}\n\nfunction _num(Scrubber,numbers,newNum){return(\nScrubber(numbers, {\n  initial: newNum,\n  delay: 1000,\n  autoplay: false,\n  loopDelay: 1000\n})\n)}\n\nfunction _22($0){return(\n$0.value\n)}\n\nfunction _23(newNum){return(\nnewNum\n)}\n\nfunction _newNum(){return(\n30\n)}\n\nfunction _26($0){return(\n$0.value\n)}\n\nfunction _27($0){return(\n$0.o.form.value = 1\n)}\n\nfunction _28($0){return(\n$0.value = 1\n)}\n\nfunction _29($0){return(\n$0.o.value = 1\n)}\n\nfunction _30($0){return(\n$0.o.value\n)}\n\nfunction _31(num){return(\nnum\n)}\n\nfunction _33(md){return(\nmd`If you have suggestions for other options you’d like to see, please let me know!`\n)}\n\nfunction _34(md){return(\nmd`---\n\n## Implementation`\n)}\n\nfunction _style(html){return(\nhtml`\n<style>\n  .button {\n  border: 0;\n  background: transparent;\n  box-sizing: border-box;\n  width: 100;\n  height: 74px;\n  border-color: transparent transparent transparent #202020;\n  transition: 100ms all ease;\n  cursor: pointer;\n  border-style: solid;\n  border-width: 37px 0 37px 60px;\naccent-color:pink\n}\n.paused {\n  border-style: double;\n  border-width: 0px 0 0px 60px;\n}\n.button:hover {\n  border-color: transparent transparent transparent #404040;\n}\ninput{\n accent-color:white\n}\n\n\n  </style>\n`\n)}\n\nfunction _Scrubber(html,Inputs){return(\nfunction Scrubber(\n  values,\n  {\n    format = (value) => value,\n    index = false,\n    initial = 0,\n    delay = null,\n    autoplay = true,\n    loop = true,\n    loopDelay = null,\n    alternate = false\n  } = {}\n) {\n  values = Array.from(values);\n  let form = html`<form style=\"font: 12px var(--sans-serif); font-variant-numeric: tabular-nums; display: flex; height: 50px; align-items: center;\">\n  <button name=b class=button  type=button ></button>\n  <label style=\"display: flex; align-items: center;\">\n    <input id='dot' name=i type=range min=0 max=${\n      values.length - 1\n    } value=${initial} step=1 style=\"width: 0px;\">\n    <output name=o style=\"margin-left: 0.4em;\"></output>\n  </label>\n</form>`;\n  let frame = null;\n  let timer = null;\n  let interval = null;\n  let direction = 1;\n  function start() {\n    // form.b.textContent = \"Pause\";\n    form.b.classList.add(\"paused\");\n    if (delay === null) frame = requestAnimationFrame(tick);\n    else interval = setInterval(tick, delay);\n  }\n  function stop() {\n    // form.b.textContent = \"Play\";\n    form.b.classList.remove(\"paused\");\n    if (frame !== null) cancelAnimationFrame(frame), (frame = null);\n    if (timer !== null) clearTimeout(timer), (timer = null);\n    if (interval !== null) clearInterval(interval), (interval = null);\n  }\n  function running() {\n    return frame !== null || timer !== null || interval !== null;\n  }\n  console.log(form.i.value);\n  // form.i.value = newNum;\n  function tick() {\n    if (\n      form.i.valueAsNumber ===\n      (direction > 0 ? values.length - 1 : direction < 0 ? 0 : NaN)\n    ) {\n      if (!loop) return stop();\n      if (alternate) direction = -direction;\n      if (loopDelay !== null) {\n        if (frame !== null) cancelAnimationFrame(frame), (frame = null);\n        if (interval !== null) clearInterval(interval), (interval = null);\n        timer = setTimeout(() => (step(), start()), loopDelay);\n        return;\n      }\n    }\n    if (delay === null) frame = requestAnimationFrame(tick);\n    step();\n  }\n\n  function step() {\n    form.i.valueAsNumber =\n      (form.i.valueAsNumber + direction + values.length) % values.length;\n    form.i.dispatchEvent(new CustomEvent(\"input\", { bubbles: true }));\n  }\n  form.i.oninput = (event) => {\n    if (event && event.isTrusted && running()) stop();\n    form.value = values[form.i.valueAsNumber];\n    // mutable debug = form;\n    form.o.value = format(form.value, form.i.valueAsNumber, values);\n  };\n  form.b.onclick = () => {\n    // console.log(form.b.className);\n    if (running()) return stop();\n\n    // console.log(form.b.className);\n    // form.b.toggleClass(\"paused\");\n\n    direction =\n      alternate && form.i.valueAsNumber === values.length - 1 ? -1 : 1;\n    form.i.valueAsNumber = (form.i.valueAsNumber + direction) % values.length;\n    form.i.dispatchEvent(new CustomEvent(\"input\", { bubbles: true }));\n    start();\n  };\n  form.i.oninput();\n  if (autoplay) start();\n  else stop();\n  Inputs.disposal(form).then(stop);\n  return form;\n}\n)}\n\nexport default function define(runtime, observer) {\n  const main = runtime.module();\n  main.variable(observer()).define([\"md\"], _1);\n  main.variable(observer()).define([\"md\"], _2);\n  main.variable(observer(\"numbers\")).define(\"numbers\", _numbers);\n  main.variable(observer()).define([\"md\",\"i\"], _5);\n  main.variable(observer()).define([\"md\"], _6);\n  main.variable(observer()).define([\"md\"], _7);\n  main.variable(observer(\"autoplay\")).define(\"autoplay\", [\"md\"], _autoplay);\n  main.variable(observer()).define([\"Scrubber\",\"numbers\"], _9);\n  main.variable(observer(\"loop\")).define(\"loop\", [\"md\"], _loop);\n  main.variable(observer()).define([\"md\"], _13);\n  main.variable(observer()).define([\"Scrubber\",\"numbers\"], _14);\n  main.variable(observer(\"delay\")).define(\"delay\", [\"md\"], _delay);\n  main.variable(observer(\"loopDelay\")).define(\"loopDelay\", [\"md\"], _loopDelay);\n  main.variable(observer(\"format\")).define(\"format\", [\"md\"], _format);\n  main.variable(observer(\"dates\")).define(\"dates\", _dates);\n  main.variable(observer(\"viewof date\")).define(\"viewof date\", [\"Scrubber\",\"dates\"], _date);\n  main.variable(observer(\"date\")).define(\"date\", [\"Generators\", \"viewof date\"], (G, _) => G.input(_));\n  main.variable(observer(\"viewof num\")).define(\"viewof num\", [\"Scrubber\",\"numbers\",\"newNum\"], _num);\n  main.variable(observer(\"num\")).define(\"num\", [\"Generators\", \"viewof num\"], (G, _) => G.input(_));\n  main.variable(observer()).define([\"viewof num\"], _22);\n  main.variable(observer()).define([\"newNum\"], _23);\n  main.define(\"initial newNum\", _newNum);\n  main.variable(observer(\"mutable newNum\")).define(\"mutable newNum\", [\"Mutable\", \"initial newNum\"], (M, _) => new M(_));\n  main.variable(observer(\"newNum\")).define(\"newNum\", [\"mutable newNum\"], _ => _.generator);\n  main.variable(observer()).define([\"viewof num\"], _26);\n  main.variable(observer()).define([\"viewof num\"], _27);\n  main.variable(observer()).define([\"viewof num\"], _28);\n  main.variable(observer()).define([\"viewof num\"], _29);\n  main.variable(observer()).define([\"viewof num\"], _30);\n  main.variable(observer()).define([\"num\"], _31);\n  main.variable(observer()).define([\"md\"], _33);\n  main.variable(observer()).define([\"md\"], _34);\n  main.variable(observer(\"style\")).define(\"style\", [\"html\"], _style);\n  main.variable(observer(\"Scrubber\")).define(\"Scrubber\", [\"html\",\"Inputs\"], _Scrubber);\n  return main;\n}\n"],"sourceRoot":""}