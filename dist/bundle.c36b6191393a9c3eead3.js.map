{"version":3,"sources":["webpack://ssta/./src/buoyviz/0b936d79280ee3bd@6309.js"],"names":["_1","md","_curDate","timeFormat","time1","Date","_3","_4","d3","timeDay","offset","utcDay","_endPlayDate","_style","html","width","ns","_7","brushedData","_8","_time1","Scrubber","datesToPlot","newNum","delay","initial","autoplay","loop","format","d","_10","_colorView","Inputs","radio","value","x","_newNum","_13","_addGreybar","data","brusedAllDates","length","date","push","_16","_chart","colorView","focusHeight","margin","xMHW","stack","brushedDataMHW","colors","x1MHW","endPlayDate","drag","sstaColors","height","svg","create","attr","style","y","scaleLinear","domain","range","bottom","top","xAxis","g","call","axisBottom","ticks","tickSizeOuter","append","chartData","selectAll","join","i","console","log","get","key","toISOString","substring","bandwidth","datum","node","x2","scaleBand","left","right","padding","enter","_drag","focus","$0","$1","on","event","select","this","raise","isBelowMax","isAboveMin","ind","bisect","invert","update","_21","monthlyGrouped","_debug1","_focus","dateExtent","x1","scaleTime","brush","brushX","extent","brushed","brushended","defaultSelection","utcYear","previousS0","previousS1","gb","selection","s","property","map","utcMonth","ceil","dispatch","move","_legTitle","_leg","Plot","legend","marginLeft","marginRight","backgroundColor","color","fontSize","fontWeight","type","pivot","reverse","label","_26","alldays","table","_27","clickedSite","_28","limitsDelayed","_alldays","siteClicked","out","forEach","day","isData","find","undefined","station","sst","NaN","ssta","_30","_31","_32","_33","_34","_35","_36","_37","tempToShow","_lineChart","yMaxDomainToUse","dateForLabel","yValueForLabel","buoyClicked","dateForLabelVal","currentValue","taLabel","HWlineChart","plot","marginTop","className","marks","dot","stroke","fill","ruleX","y1","y2","max","text","SSTAlineChart","_siteClicked","_ind","dates","indexOf","_today","_start","today","async","_limitsDelayed","Promises","_limitsDelayedMHW","_47","_focusHeight","_margin","_x1","alldates","_x1MHW","brusedAllDatesMHW","_xAxis","_y","_brushedDataMHW","filter","_55","_brusedAllDates","timeMonth","_brusedAllDatesMHW","_x","_xMHW","_stack","cats","keys","_brushedData","_sstaColors","scaleDiverging","interpolateRdBu","_brushHandle","arc","_arc","innerRadius","outerRadius","startAngle","endAngle","Math","PI","_data","dataSsta","Object","slice","_ns","classList","_datesToPlot","datesCopy","_dates","_datesCopy","_dateExtent","_71","buoys","siteClickeds","long_name","pk","_72","_siteClickeds","concat","_74","_75","_tempToShow","_currentValue","toFixed","_yMaxDomainToUse","floor","_yValueForLabel","_dateForLabel","_dateForLabelVal","_buoyClicked","_83","buoyDailyData","_clickedSite","_colors","Map","_buoys","short_name","lat","lon","_HWsForDate","result_time","_dayBeforeStart","b","assign","fistDate","setDate","getDate","_buoyDailyData","dayBeforeStart","fetch","then","resp","json","seas","diff","thresh","diffStrong","diffExtreme","diffSevere","category","_height","_colorMHW","scaleOrdinal","_opacityMHW","_numFormat","_timeFormat","_d3","require","_p","_hwEvent","_alldates","_allmonths","mhwBarData","Set","_105","monthlyTots","_monthlyTots","allmonths","month","t","sum","_monthlyGrouped","groups","values","noData","none","Moderate","Strong","Extreme","Severe","_108","_109","_110","_cats","_groups","_mhwBarData","tt","raw","reduce","a","replace","_tt","Method","response","_115","_116","_dataSsta","_dataSstaOld","FileAttachment","define","runtime","observer","main","module","fileAttachments","url","URL","mimeType","toString","builtin","name","variable","G","_","input","M","generator","child1","define1","import"],"mappings":"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","file":"bundle.c36b6191393a9c3eead3.js","sourcesContent":["import define1 from \"./41364653f34651d0@442.js\";\n\nfunction _1(md){return(\nmd`# Marine heatwave charts and brush/player\n\nused to embed as a module in https://cioospacific.ca/applied-data/marine-heat-monitor/\n\ncurl -o bs.tgz \"https://api.observablehq.com/d/0b936d79280ee3bd.tgz?v=3\"\n\ntar -C src/buoyviz -xvzf bs.tgz\n\nThis notebook includes\n- loading the buoy data via api\n- data brush chart (loads from github)\n- scrubber for playing the animation in the website\n- charts for the buoys\n\n### Change log\nJune 22 2022\n- replaced the player notebook with scrubber, as font awesome used in the player was not playing well with webpack.\n\n\n`\n)}\n\nfunction _curDate(md,timeFormat,time1){return(\nmd`# ${timeFormat(new Date(time1))}`\n)}\n\nfunction _3(md){return(\nmd`date to stop playing. Ideally this should be a only a couple days in the past since data is usually updated each day`\n)}\n\nfunction _4(d3){return(\nd3.timeDay.offset(d3.utcDay(), -2)\n)}\n\nfunction _endPlayDate(d3){return(\nd3.timeDay.offset(d3.utcDay(), -2)\n)}\n\nfunction _style(html,width,ns){return(\nhtml`\n<style>\n\n  /* match the scrubber's width to our race chart */\n   // input[type=\"range\"][name=\"i\"] {\n   //   width: ${width - 90}px !important;\n   // }\n\n.${ns}{\n  font-size: 16px;  \n}\n\n\nbutton, input, textarea {\n    accent-color: #007490;\n}\n\n#butt input, textarea {\n    accent-color: green;\n}\n.brushFilter {\nbackground-color: #606060;\ncolor: \"#e0f5ee\"\n}\n\n.currentDot{\nbackground-color: none;\ncolor: \"#e0f5ee\"\n}\n\n.axisWhite line{\n  stroke: #e0f5ee;\n}\n\n.axisWhite path{\n  stroke: #e0f5ee;\n}\n\n// .selection{\n// fill: #d9d9d9;\n// fill-opacity: .6;\n// stroke: none;\n// }\n\n.radio {\n\n  color: deeppink;\n}\n  .button {\ncolor:lightgrey;\n  border: 0;\n  background: transparent;\n  box-sizing: border-box;\n  width: 100;\n  height: 74px;\n  border-color: transparent transparent transparent lightgrey;\n  transition: 100ms all ease;\n  cursor: pointer;\n  border-style: solid;\n  border-width: 37px 0 37px 60px;\ntransform: scale(.7);\n}\n.paused {\n  border-style: double;\n  border-width: 0px 0 0px 60px;\n}\n.button:hover {\n  border-color: transparent transparent transparent #8f8f8f;\n}\n// input[type=\"range\"][name=\"input\"] {\n// accent-color:blue\n\n// }\n\n#dot{\n accent-color:black\n}\n.fa-xs {\n    font-size: 5.75em;\n}\n\n\n\n</style>\n`\n)}\n\nfunction _7(brushedData){return(\nbrushedData\n)}\n\nfunction _8(md){return(\nmd`play`\n)}\n\nfunction _time1(Scrubber,datesToPlot,newNum){return(\nScrubber(datesToPlot, {\n  width: 0,\n  delay: 100,\n  initial: newNum,\n  autoplay: false,\n  loop: false,\n  format: (d) => \"\"\n})\n)}\n\nfunction _10(md){return(\nmd`anomaly or category button`\n)}\n\nfunction _colorView(Inputs,html){return(\nInputs.radio([\"Anomaly\", \"Heatwaves\"], {\n  value: \"Anomaly\",\n  // label: \"Choose category to view\",\n  format: (x) => html`<span style=\"color: white\">${x}`\n})\n)}\n\nfunction _newNum(){return(\n0\n)}\n\nfunction _13(brushedData){return(\nbrushedData\n)}\n\nfunction _addGreybar(data,brusedAllDates)\n{\n  if (\n    data[data.length - 1].date <\n    new Date(brusedAllDates[brusedAllDates.length - 1])\n  ) {\n    data.push({\n      date: new Date(brusedAllDates[brusedAllDates.length - 1]),\n      value: -99\n    });\n  }\n  return data;\n}\n\n\nfunction _16(brusedAllDates){return(\nbrusedAllDates[brusedAllDates.length - 1]\n)}\n\nfunction _chart(colorView,focusHeight,d3,width,margin,xMHW,stack,brushedDataMHW,colors,x1MHW,endPlayDate,x,time1,drag,brusedAllDates,brushedData,sstaColors)\n{\n  if (colorView === \"Heatwaves\") {\n    const height = focusHeight;\n    const svg = d3\n      .create(\"svg\")\n      .attr(\"viewBox\", [0, 0, width, height])\n      .style(\"display\", \"block\");\n\n    const y = d3\n      .scaleLinear()\n      .domain([0, 1])\n      .range([height - margin.bottom, margin.top + 5]);\n\n    const xAxis = (g, xMHW, height) =>\n      g\n        .attr(\"transform\", `translate(0,${height - margin.bottom})`)\n        .call(\n          d3\n            .axisBottom(xMHW)\n            .ticks(width / 80)\n            .tickSizeOuter(0)\n        )\n        .style(\"stroke\", \"#e0f5ee\");\n\n    svg.append(\"g\").call(xAxis, xMHW, height).attr(\"class\", \"axisWhite\");\n\n    const chartData = stack(brushedDataMHW);\n    // svg.append(\"path\")\n    const groups = svg\n      .append(\"g\")\n      // Each layer of the stack goes in a group\n      // the group contains that layer for all countries\n      .selectAll(\"g\")\n      .data(chartData)\n      .join(\"g\")\n      // rects in the same layer will all have the same color, so we can put it on the group\n      // we can use the key on the layer's array to set the color\n      .style(\"fill\", (d, i) => {\n        console.log(d);\n        return d.date > new Date(\"2022-08-01\") ? \"grey\" : colors.get(d.key);\n      });\n\n    groups\n      .selectAll(\"rect\")\n      .data((d) => d)\n      .join(\"rect\")\n      .attr(\"x\", (d) => {\n        return x1MHW(new Date(d.data.date).toISOString().substring(0, 10));\n      })\n      .attr(\"y\", (d) => y(d[1]))\n      .attr(\"height\", (d) => y(d[0]) - y(d[1]))\n      .attr(\"width\", x1MHW.bandwidth());\n    const endLine = svg\n      .append(\"line\")\n      .datum([\n        {\n          date: endPlayDate,\n          value: 1\n        }\n      ])\n      .attr(\"x1\", (d) => {\n        return x(endPlayDate);\n      })\n      .attr(\"x2\", (d) => x(endPlayDate))\n      .attr(\"y2\", y(1))\n      .attr(\"y1\", y(0))\n      .attr(\"fill\", \"none\")\n      .attr(\"stroke\", \"blue\")\n      .attr(\"stoke-width\", 1.5)\n      .attr(\"stroke-linejoin\", \"round\");\n\n    const recordLine = svg\n      .append(\"line\")\n      .datum([\n        {\n          date: time1,\n          value: 1\n        }\n      ])\n      .attr(\"x1\", (d) => {\n        return x(time1);\n      })\n      .attr(\"x2\", (d) => x(time1))\n      .attr(\"y2\", y(1))\n      .attr(\"y1\", y(0))\n      .attr(\"fill\", \"none\")\n      .attr(\"stroke\", \"deeppink\")\n      .attr(\"stoke-width\", 1.5)\n      .attr(\"stroke-linejoin\", \"round\");\n\n    const circles = svg\n      .selectAll(\"circle\")\n      .data([\n        {\n          date: time1,\n          value: 1\n        }\n      ])\n      .join(\"circle\")\n      .attr(\"cx\", (d) => {\n        return x(d.date);\n      })\n      .attr(\"cy\", (d) => y(0.98))\n      .attr(\"r\", 7)\n      .attr(\"fill\", (d) => \"deeppink\")\n      .attr(\"stroke\", (d) => \"deeppink\")\n      .call(drag);\n\n    return svg.node();\n  } else {\n    // anomaly chart\n\n    const height = focusHeight;\n    const svg = d3\n      .create(\"svg\")\n      .attr(\"viewBox\", [0, 0, width, height])\n      .style(\"display\", \"block\");\n\n    const y = d3\n      .scaleLinear()\n      .domain([0, 1])\n      .range([height - margin.bottom, margin.top + 5]);\n\n    const xAxis = (g, x, height) =>\n      g\n        .attr(\"transform\", `translate(0,${height - margin.bottom})`)\n        .call(\n          d3\n            .axisBottom(x)\n            .ticks(width / 80)\n            .tickSizeOuter(0)\n        )\n        .style(\"stroke\", \"#e0f5ee\");\n\n    svg.append(\"g\").call(xAxis, x, height).attr(\"class\", \"axisWhite\");\n\n    const x2 = d3\n      .scaleBand()\n      .range([margin.left, width - margin.right], 0.01)\n      .padding(0.01)\n      .domain(brusedAllDates);\n\n    const bars = svg\n      .selectAll(\"rect\")\n      .data(brushedData)\n      .enter()\n      .append(\"rect\")\n      .attr(\"x\", (d) => x2(d.date.toISOString().substring(0, 10)))\n      .attr(\"y\", (d) => {\n        return y(1);\n      })\n      .attr(\"width\", (d) => x2.bandwidth())\n      .attr(\"height\", (d) => y(0) - y(1))\n      .attr(\"fill\", (d) => (d.value === -99 ? \"#ddd\" : sstaColors(d.value)));\n\n    const recordLine = svg\n      .append(\"line\")\n      .datum([\n        {\n          date: time1,\n          value: 1\n        }\n      ])\n      .attr(\"x1\", (d) => {\n        return x(time1);\n      })\n      .attr(\"x2\", (d) => x(time1))\n      .attr(\"y2\", y(1))\n      .attr(\"y1\", y(0))\n      .attr(\"fill\", \"none\")\n      .attr(\"stroke\", \"deeppink\")\n      .attr(\"stoke-width\", 1.5)\n      .attr(\"stroke-linejoin\", \"round\");\n\n    const endLine = svg\n      .append(\"line\")\n      .datum([\n        {\n          date: endPlayDate,\n          value: 1\n        }\n      ])\n      .attr(\"x1\", (d) => {\n        return x(endPlayDate);\n      })\n      .attr(\"x2\", (d) => x(endPlayDate))\n      .attr(\"y2\", y(1))\n      .attr(\"y1\", y(0))\n      .attr(\"fill\", \"none\")\n      .attr(\"stroke\", \"blue\")\n      .attr(\"stoke-width\", 1.5)\n      .attr(\"stroke-linejoin\", \"round\");\n\n    const circles = svg\n      .selectAll(\"circle\")\n      .data([\n        {\n          date: time1,\n          value: 1\n        }\n      ])\n      .join(\"circle\")\n      .attr(\"cx\", (d) => {\n        return x(d.date);\n      })\n      .attr(\"cy\", (d) => y(0.98))\n      .attr(\"r\", 7)\n      .attr(\"fill\", (d) => \"deeppink\")\n      .attr(\"stroke\", (d) => \"deeppink\")\n      .call(drag);\n    return svg.node();\n  }\n}\n\n\nfunction _drag(d3,x,focus,endPlayDate,datesToPlot,$0,$1)\n{\n  function dragstarted(event, d) {\n    d3.select(this).raise().attr(\"stroke\", \"black\");\n  }\n\n  function dragged(event, d) {\n    let isBelowMax = event.x > x(+focus[0]);\n    let isAboveMin = event.x < x(+endPlayDate);\n    // mutable debug = new Date(\"2022-04-08\");\n    // console.log(d3.timeDay.offset(today, -1));\n\n    if (isBelowMax && isAboveMin) {\n      d3.select(this).attr(\"cx\", (d.x = event.x));\n      // console.log(event.x, event.dx);\n\n      const ind = d3.bisect(datesToPlot, +x.invert(event.x));\n      // mutable debug = ind;\n      $0.value = ind; // place ind we need to move the scrubber to\n      $1.update(ind);\n    }\n\n    // .attr(\"cy\", (d.y = event.y));\n  }\n\n  function dragended(event, d) {\n    d3.select(this).attr(\"stroke\", null);\n  }\n\n  return d3\n    .drag()\n    .on(\"start\", dragstarted)\n    .on(\"drag\", dragged)\n    .on(\"end\", dragended);\n}\n\n\nfunction _21(monthlyGrouped){return(\nmonthlyGrouped[115]\n)}\n\nfunction _debug1(){return(\nnull\n)}\n\nfunction _focus(colorView,d3,width,focusHeight,dateExtent,margin,xAxis,stack,monthlyGrouped,colors,x1,y,data,sstaColors,$0)\n{\n  if (colorView === \"Heatwaves\") {\n    const svg = d3\n      .create(\"svg\")\n      .attr(\"viewBox\", [0, 0, width, focusHeight])\n      .style(\"display\", \"block\");\n\n    const x = d3\n      .scaleTime()\n      .domain(dateExtent)\n      .range([margin.left, width - margin.right]);\n\n    const brush = d3\n      .brushX()\n      .extent([\n        [margin.left, 0.5],\n        [width - margin.right, focusHeight - margin.bottom + 0.5]\n      ])\n      .on(\"brush\", brushed)\n      .on(\"end\", brushended);\n\n    const defaultSelection = [\n      x(d3.utcYear.offset(x.domain()[1], -1)),\n      x.range()[1]\n    ];\n\n    svg.append(\"g\").call(xAxis, x, focusHeight).attr(\"class\", \"axisWhite\");\n    let previousS0, previousS1;\n\n    const chartData = stack(monthlyGrouped);\n\n    const groups = svg\n      .append(\"g\")\n      // Each layer of the stack goes in a group\n      // the group contains that layer for all countries\n      .selectAll(\"g\")\n      .data(chartData)\n      .join(\"g\")\n      // rects in the same layer will all have the same color, so we can put it on the group\n      // we can use the key on the layer's array to set the color\n      .style(\"fill\", (d, i) => {\n        console.log(d.key);\n        return colors.get(d.key);\n      });\n    // .attr(\"d\", area(x, y.copy().range([focusHeight - margin.bottom, 4])));\n\n    groups\n      .selectAll(\"rect\")\n      // Now we place the rects, which are the children of the layer array\n      .data((d) => d)\n      .join(\"rect\")\n      .attr(\"x\", (d) => {\n        // console.log(d.data.date);\n        return x1(new Date(d.data.date).toISOString().substring(0, 10));\n      })\n      .attr(\"y\", (d) => y(d[1]))\n      .attr(\"height\", (d) => y(d[0]) - y(d[1]))\n      .attr(\"width\", x1.bandwidth());\n\n    const gb = svg.append(\"g\").call(brush);\n    gb.call(brush.move, defaultSelection);\n\n    function brushed({ selection }) {\n      if (selection) {\n        // console.log(\"fire1\");\n        var s = selection || x.range();\n\n        svg.property(\"value\", selection.map(x.invert, x).map(d3.utcMonth.ceil));\n        svg.dispatch(\"input\");\n\n        if (((s[1] - s[0]) / width) * 120 > 30) {\n          gb.call(brush.move, [previousS0, previousS1]);\n          return;\n        }\n        previousS0 = s[0];\n        previousS1 = s[1];\n      }\n    }\n\n    function brushended({ selection }) {\n      if (!selection) {\n        gb.call(brush.move, [defaultSelection]);\n      }\n    }\n    return svg.node();\n\n    /////\n  } else {\n    const svg = d3\n      .create(\"svg\")\n      .attr(\"viewBox\", [0, 0, width, focusHeight])\n      .style(\"display\", \"block\");\n\n    const x = d3\n      .scaleTime()\n      .domain(dateExtent)\n      .range([margin.left, width - margin.right]);\n\n    const brush = d3\n      .brushX()\n      .extent([\n        [margin.left, 0.5],\n        [width - margin.right, focusHeight - margin.bottom + 0.5]\n      ])\n      .on(\"brush\", brushed)\n      .on(\"end\", brushended);\n\n    const defaultSelection = [\n      x(d3.utcYear.offset(x.domain()[1], -1)),\n      x.range()[1]\n    ];\n\n    svg.append(\"g\").call(xAxis, x, focusHeight).attr(\"class\", \"axisWhite\");\n    let previousS0, previousS1;\n    // svg.append(\"path\")\n    const bars = svg\n      .selectAll(\"rect\")\n      .data(data)\n      .enter()\n      .append(\"rect\")\n      .attr(\"x\", (d) => x1(d.date.toISOString().substring(0, 10)))\n      .attr(\"y\", (d) => {\n        return y(1);\n      })\n      .attr(\"width\", (d) => x1.bandwidth())\n      .attr(\"height\", (d) => y(0) - y(1))\n      // .attr(\"fill\", (d) => sstaColors(d.value));\n      .attr(\"fill\", (d) => (d.value === -99 ? \"#ddd\" : sstaColors(d.value)));\n    // .attr(\"d\", area(x, y.copy().range([focusHeight - margin.bottom, 4])));\n\n    const gb = svg.append(\"g\").call(brush);\n    gb.call(brush.move, defaultSelection);\n\n    function brushed({ selection }) {\n      // mutable debug1 = selection;\n      if (selection) {\n        // console.log(\"fire1\");\n        var s = selection || x.range();\n\n        svg.property(\"value\", selection.map(x.invert, x).map(d3.utcMonth.ceil));\n        svg.dispatch(\"input\");\n\n        if (\n          ((s[1] - s[0]) / width) * 120 > 30 ||\n          ((s[1] - s[0]) / width) * 120 < 2\n        ) {\n          gb.call(brush.move, [previousS0, previousS1]);\n          return;\n        }\n        previousS0 = s[0];\n        previousS1 = s[1];\n      }\n    }\n\n    function brushended({ selection }) {\n      if (!selection) {\n        $0.value = defaultSelection;\n        gb.call(brush.move, [previousS0, previousS1]); // changed from defaultSelection so that a single click doesn't mess things up\n      }\n    }\n\n    return svg.node();\n  }\n}\n\n\nfunction _legTitle(md,colorView){return(\nmd` ${\n  colorView === \"Anomaly\" ? \"Sea surface temperature anomaly\" : \" \"\n}`\n)}\n\nfunction _leg(colorView,Plot)\n{\n  return colorView === \"Anomaly\"\n    ? Plot.legend({\n        marginLeft: 10,\n        marginRight: 10,\n\n        style: {\n          backgroundColor: \"#000000\",\n          color: \"#e0f5ee\",\n          fontSize: \"16px\",\n          fontWeight: \"normal\"\n        },\n        color: {\n          type: \"diverging\",\n          domain: [-4, 4],\n          pivot: 0,\n          reverse: true,\n          legend: true,\n          label: \"\"\n        }\n      })\n    : Plot.legend({\n        color: {\n          type: \"categorical\",\n          domain: [\"No heatwave\", \"Moderate\", \"Strong\", \"Severe\", \"Extreme\"],\n          range: [\"lightblue\", \"#FEDB67\", \"#f26722\", \"#cd3728\", \"#7E1416\"] // use the \"accent\" scheme\n        },\n        style: {\n          backgroundColor: \"#000000\",\n          color: \"#e0f5ee\",\n          fontSize: \"16px\",\n          fontWeight: \"normal\"\n        }\n      });\n}\n\n\nfunction _26(Inputs,alldays){return(\nInputs.table(alldays)\n)}\n\nfunction _27(clickedSite){return(\nclickedSite\n)}\n\nfunction _28(clickedSite,limitsDelayed){return(\nnew Date(clickedSite[0].date) < new Date(limitsDelayed[1])\n)}\n\nfunction _alldays(d3,focus,clickedSite,siteClicked)\n{\n  const alldays = d3.timeDay\n    .range(new Date(focus[0]), focus[1])\n    .map((d) => d.toISOString().substring(0, 10));\n  const out = [];\n  alldays.forEach((day, i) => {\n    let isData = clickedSite.find((d) => +d.date === +new Date(day));\n\n    isData === undefined\n      ? out.push({\n          station: siteClicked,\n          sst: NaN,\n          ssta: NaN,\n          date: day\n        })\n      : out.push(isData);\n  });\n\n  return out;\n}\n\n\nfunction _30(alldays){return(\nalldays\n)}\n\nfunction _31(alldays){return(\nconsole.log(new Date(alldays[0]))\n)}\n\nfunction _32(clickedSite){return(\nconsole.log(clickedSite[0].date)\n)}\n\nfunction _33(clickedSite,alldays){return(\n+clickedSite[0].date === +new Date(alldays[0])\n)}\n\nfunction _34(alldays){return(\nalldays.length\n)}\n\nfunction _35(alldays){return(\nalldays\n)}\n\nfunction _36(clickedSite,alldays){return(\nclickedSite.find((d) => +d.date === +new Date(alldays[0]))\n)}\n\nfunction _37(tempToShow){return(\ntempToShow === undefined\n)}\n\nfunction _lineChart(alldays,tempToShow,Plot,limitsDelayed,yMaxDomainToUse,time1,d3,dateForLabel,yValueForLabel,buoyClicked,colors,dateForLabelVal,currentValue,colorView,md)\n{\n  const noData = \"No data during time period selected\";\n  const taLabel =\n    alldays.length === 0 || tempToShow === undefined\n      ? \"\"\n      : \"Temperature anomaly (°C)\";\n  const HWlineChart = Plot.plot({\n    x: {\n      domain: [limitsDelayed[0], limitsDelayed[1]]\n    },\n    y: {\n      label: \"↑ SST (°C)\",\n      domain: [0, yMaxDomainToUse]\n    },\n    style: {\n      backgroundColor: \"#000000\",\n      color: \"#e0f5ee\",\n      // fontFamily: \"system-ui\",\n      fontSize: 10\n      // overflow: \"visible\"\n    },\n    height: 500,\n    marginTop: 20,\n    className: \"hwclass\",\n    // y: {\n    //   nice: true\n    // },\n    // x: {\n    //   nice: true\n    // },\n    marks: [\n      Plot.dot(alldays, {\n        x: \"date\",\n        y: \"sst\",\n        stroke: \"category\",\n        fill: \"category\"\n      }),\n      // Plot.line(clickedSite, {\n      //   x: \"date\",\n      //   y: \"sst\",\n      //   stroke: \"#ccc\",\n      //   curve: \"step\",\n      //   strokeWidth: 0.5\n      // }),\n      // vertical rule to mark date/time of event\n      Plot.ruleX([time1], {\n        stroke: \"white\",\n        y1: 0,\n        y2: d3.max(alldays, (d) => d.sst)\n      }),\n      Plot.text(\n        [\n          {\n            x: dateForLabel,\n            y: yValueForLabel,\n            text: buoyClicked\n          }\n        ],\n        {\n          x: \"x\",\n          y: \"y\",\n          text: \"text\",\n          fontSize: 16\n        }\n      )\n    ],\n    color: {\n      domain: [\"none\", \"Moderate\", \"Strong\", \"Severe\", \"Extreme\"],\n      range: [\n        colors.get(\"none\"),\n        colors.get(\"Moderate\"),\n        colors.get(\"Strong\"),\n        colors.get(\"Severe\"),\n        colors.get(\"Extreme\")\n      ]\n      // legend: true\n    },\n\n    width: 500,\n    height: 300\n    // marginBottom: 70,\n    // label: buoyClicked\n    // title: \"some stie\"\n  });\n\n  const SSTAlineChart = Plot.plot({\n    x: {\n      domain: [limitsDelayed[0], limitsDelayed[1]]\n    },\n    y: {\n      label: \"↑ SST (°C)\",\n      domain: [0, yMaxDomainToUse]\n    },\n    style: {\n      backgroundColor: \"#000000\",\n      color: \"#e0f5ee\",\n      // fontFamily: \"system-ui\",\n      fontSize: 10\n      // overflow: \"visible\"\n    },\n    height: 500,\n    marginTop: 20,\n    className: \"hwclass\",\n    // y: {\n    //   nice: true\n    // },\n    // x: {\n    //   nice: true\n    // },\n    marks: [\n      Plot.dot(alldays, {\n        x: \"date\",\n        y: \"sst\",\n        stroke: \"ssta\",\n        fill: \"ssta\"\n      }),\n      // Plot.line(clickedSite, {\n      //   x: \"date\",\n      //   y: \"sst\",\n      //   stroke: \"#ccc\",\n      //   curve: \"step\",\n      //   strokeWidth: 0.5\n      // }),\n      // vertical rule to mark date/time of event\n      Plot.ruleX([time1], {\n        stroke: \"white\",\n        y1: 0,\n        y2: d3.max(alldays, (d) => d.sst)\n      }),\n      Plot.text(\n        [\n          {\n            x: dateForLabel,\n            y: yValueForLabel,\n            text: buoyClicked\n          }\n        ],\n        {\n          x: \"x\",\n          y: \"y\",\n          text: \"text\",\n          fontSize: 16\n        }\n      ),\n      Plot.text(\n        [\n          {\n            x: dateForLabelVal,\n            y: yValueForLabel,\n            text: taLabel\n          }\n        ],\n        {\n          x: \"x\",\n          y: \"y\",\n          text: \"text\",\n          fontSize: 10\n        }\n      ),\n      Plot.text(\n        [\n          {\n            x: dateForLabelVal,\n            y: yValueForLabel - 1,\n            text: currentValue\n          }\n        ],\n        {\n          x: \"x\",\n          y: \"y\",\n          text: \"text\",\n          fontSize: 10\n        }\n      )\n    ],\n    color: {\n      type: \"diverging\",\n      domain: [-4, 4],\n      pivot: 0,\n      reverse: true\n      // legend: true,\n      // label: \"SSTA (°C) →\"\n    },\n\n    width: 500,\n    height: 300\n    // marginBottom: 70,\n    // label: buoyClicked\n    // title: \"some stie\"\n  });\n  if (alldays !== null) {\n    return colorView === \"Anomaly\" ? SSTAlineChart : HWlineChart;\n  } else {\n    return md``;\n  }\n}\n\n\nfunction _siteClicked(){return(\n16\n)}\n\nfunction _ind(dates,time1){return(\ndates.indexOf(time1)\n)}\n\nfunction _today(d3){return(\nd3.timeDay.offset(d3.utcDay(), -2)\n)}\n\nfunction _start(d3,today){return(\nd3.timeDay.offset(today, -365)\n)}\n\nasync function _limitsDelayed(Promises,focus)\n{\n  await Promises.delay(1000, \"\"); // delay returning\n  return focus;\n}\n\n\nasync function _limitsDelayedMHW(Promises,focus)\n{\n  await Promises.delay(1000, \"\"); // delay returning\n  return focus;\n}\n\n\nfunction _47(md){return(\nmd`## bar charts`\n)}\n\nfunction _focusHeight(){return(\n60\n)}\n\nfunction _margin(){return(\n{ top: 4, right: 20, bottom: 30, left: 10 }\n)}\n\nfunction _x1(d3,margin,width,alldates){return(\nd3\n  .scaleBand()\n  .range([margin.left, width - margin.right], 0.01)\n  .padding(0.1)\n  .domain(alldates)\n)}\n\nfunction _x1MHW(d3,margin,width,brusedAllDatesMHW){return(\nd3\n  .scaleBand()\n  .range([margin.left, width - margin.right], 0.01)\n  .padding(0.01)\n  .domain(brusedAllDatesMHW)\n)}\n\nfunction _xAxis(margin,d3,width){return(\n(g, x, height) =>\n  g\n    .attr(\"transform\", `translate(0,${height - margin.bottom})`)\n    .call(\n      d3\n        .axisBottom(x)\n        .ticks(width / 80)\n        .tickSizeOuter(0)\n    )\n    .style(\"stroke\", \"#e0f5ee\")\n)}\n\nfunction _y(d3,focusHeight,margin){return(\nd3\n  .scaleLinear()\n  .domain([0, 1])\n  .range([focusHeight - margin.bottom, margin.top])\n)}\n\nfunction _brushedDataMHW(monthlyGrouped,focus){return(\nmonthlyGrouped.filter(\n  (d) => d.date >= focus[0] && new Date(d.date) < new Date(focus[1])\n)\n)}\n\nfunction _55(monthlyGrouped){return(\nmonthlyGrouped\n)}\n\nfunction _brusedAllDates(d3,focus){return(\nd3.timeMonth\n  .range(new Date(focus[0]), focus[1])\n  .map((d) => d.toISOString().substring(0, 10))\n)}\n\nfunction _brusedAllDatesMHW(d3,focus){return(\nd3.timeMonth\n  .range(new Date(focus[0]), new Date(focus[1]))\n  .map((d) => d.toISOString().substring(0, 10))\n)}\n\nfunction _x(d3,focus,margin,width){return(\nd3\n  .scaleTime()\n  .domain(focus)\n  .range([margin.left, width - margin.right])\n)}\n\nfunction _xMHW(d3,focus,margin,width){return(\nd3\n    .scaleTime()\n    .domain(focus)\n    .range([margin.left, width - margin.right])\n)}\n\nfunction _stack(d3,cats){return(\nd3.stack().keys(cats)\n)}\n\nfunction _brushedData(data,focus){return(\ndata.filter(\n  (d) => d.date >= focus[0] && new Date(d.date) < new Date(focus[1])\n)\n)}\n\nfunction _sstaColors(d3){return(\nd3.scaleDiverging(d3.interpolateRdBu).domain([4, 0, -4])\n)}\n\nfunction _brushHandle(arc){return(\n(g, selection, margin, height) =>\n  g\n    .selectAll(\".handle--custom\")\n    .data([{ type: \"w\" }, { type: \"e\" }])\n    .join((enter) =>\n      enter\n        .append(\"path\")\n        .attr(\"class\", \"handle--custom\")\n        .attr(\"fill\", \"#afafaf\")\n        .attr(\"fill-opacity\", 0.8)\n        .attr(\"stroke\", \"#000\")\n        .attr(\"stroke-width\", 1)\n        .attr(\"cursor\", \"ew-resize\")\n        .attr(\"d\", arc)\n    )\n    .attr(\"display\", selection === null ? \"none\" : null)\n    .attr(\n      \"transform\",\n      selection === null\n        ? null\n        : (d, i) =>\n            `translate(${selection[i]},${\n              (height + margin.top - margin.bottom) / 2\n            })`\n    )\n)}\n\nfunction _arc(d3)\n{\n  let height = 50;\n  let margin = { top: 10, right: 20, bottom: 20, left: 95 };\n  return d3\n    .arc()\n    .innerRadius(0)\n    .outerRadius((height - margin.top - margin.bottom) / 2)\n    .startAngle(0)\n    .endAngle((d, i) => (i ? Math.PI : -Math.PI));\n}\n\n\nfunction _data(dataSsta)\n{\n  const out = [];\n  Object.keys(dataSsta).forEach((d) => {\n    out.push({\n      date: new Date(d.slice(0, 4) + \"-\" + d.slice(-2)),\n      value: dataSsta[d][0]\n    });\n  });\n  return out;\n}\n\n\nfunction _ns(Inputs){return(\nInputs.text().classList[0]\n)}\n\nfunction _datesToPlot(datesCopy,limitsDelayed){return(\ndatesCopy.filter(\n  (d) => d >= limitsDelayed[0] && d <= limitsDelayed[1]\n)\n)}\n\nfunction _dates(d3,dateExtent){return(\nd3.timeDay\n  .range(new Date(dateExtent[0]), new Date(dateExtent[1]))\n  .map((d) => +d)\n)}\n\nfunction _datesCopy(dates){return(\n[...dates]\n)}\n\nfunction _dateExtent(){return(\n[new Date(\"2013-01-01\"), new Date()]\n)}\n\nfunction _71(buoys,siteClickeds){return(\nbuoys.find((d) => d.long_name === siteClickeds).pk\n)}\n\nfunction _72(siteClickeds){return(\nsiteClickeds\n)}\n\nfunction _siteClickeds(Inputs,buoys){return(\nInputs.select(\n  [null].concat(buoys.map((d) => d.long_name)),\n  {\n    label: \"site\",\n    value: \"North Hecate Strait\"\n  }\n)\n)}\n\nfunction _74(clickedSite){return(\nclickedSite\n)}\n\nfunction _75(time1){return(\nnew Date(time1).toISOString().substring(0, 10)\n)}\n\nfunction _tempToShow(clickedSite,time1){return(\nclickedSite.find(\n  (d) =>\n    new Date(d.date).toISOString().substring(0, 10) ===\n    new Date(time1).toISOString().substring(0, 10)\n)\n)}\n\nfunction _currentValue(clickedSite,tempToShow)\n{\n  let value;\n  if (clickedSite.length !== 0 && tempToShow !== undefined) {\n    value = tempToShow.ssta.toFixed(2);\n  } else {\n    value = \"\";\n  }\n\n  // if (clickedSite.length === 0) value = \"\";\n  return value;\n}\n\n\nfunction _yMaxDomainToUse(clickedSite,d3)\n{\n  return clickedSite[Math.floor(clickedSite.length / 1.2)] === undefined ?\n    18 :  d3.max(clickedSite, (d) => d.sst) * 1.1\n}\n\n\nfunction _yValueForLabel(clickedSite,d3)\n{\n  return clickedSite[Math.floor(clickedSite.length / 1.2)] === undefined\n    ? 18\n    : d3.max(clickedSite, (d) => d.sst) * 1.1;\n}\n\n\nfunction _dateForLabel(clickedSite,d3,limitsDelayed)\n{\n  return clickedSite[Math.floor(clickedSite.length / 1.2)] === undefined\n    ? d3.timeDay.offset(limitsDelayed[0], 30)\n    : clickedSite[Math.floor(clickedSite.length * 0.2)].date;\n}\n\n\nfunction _dateForLabelVal(clickedSite,d3,limitsDelayed)\n{\n  return clickedSite[Math.floor(clickedSite.length / 2)] === undefined\n    ? d3.timeDay.offset(limitsDelayed[0], 30)\n    : clickedSite[Math.floor(clickedSite.length * 0.8)].date;\n}\n\n\nfunction _buoyClicked(buoys,siteClicked){return(\nbuoys.find((d) => d.pk === siteClicked).long_name\n)}\n\nfunction _83(buoyDailyData){return(\nbuoyDailyData[buoyDailyData.length - 1]\n)}\n\nfunction _clickedSite(buoyDailyData,siteClicked){return(\nbuoyDailyData.filter((d) => d.station === siteClicked)\n)}\n\nfunction _colors(){return(\nnew Map([\n  [\"avg\", \"#5b6187\"],\n  [\"thresh\", \"#FEDB67\"],\n  [\"below\", \"#89119c\"], // actuals below forecast\n  [\"above\", \"pink\"], // actuals above forecast\n  [\"none\", \"lightblue\"],\n  [\"Moderate\", \"#FEDB67\"],\n  [\"Strong\", \"#f26722\"],\n  [\"Severe\", \"#cd3728\"],\n  [\"Extreme\", \"#7E1416\"],\n  [\"noData\", \"#ddd\"],\n  [\"seas\", \"pink\"]\n])\n)}\n\nfunction _buoys(){return(\n[\n  {\n    short_name: \"C46004\",\n    lat: 50.94,\n    lon: -135.87,\n    long_name: \"Middle Nomad\",\n    pk: 1\n  },\n  {\n    short_name: \"C46036\",\n    lat: 48.3,\n    lon: -133.86,\n    long_name: \"South Nomad\",\n    pk: 2\n  },\n  {\n    short_name: \"C46131\",\n    lat: 49.91,\n    lon: -124.99,\n    long_name: \"Sentry Shoal\",\n    pk: 3\n  },\n  {\n    short_name: \"C46132\",\n    lat: 49.74,\n    lon: -127.93,\n    long_name: \"South Brooks\",\n    pk: 4\n  },\n  // {\n  //   short_name: \"C46134\",\n  //   lat: 48.66,\n  //   lon: -123.48,\n  //   long_name: \"Pat Bay Test Buoy\",\n  //   pk: 5\n  // },\n  {\n    short_name: \"C46145\",\n    lat: 54.38,\n    lon: -132.42,\n    long_name: \"Central Dixon Entran\",\n    pk: 6\n  },\n  {\n    short_name: \"C46146\",\n    lat: 49.34,\n    lon: -123.73,\n    long_name: \"Halibut Bank\",\n    pk: 7\n  },\n  {\n    short_name: \"C46147\",\n    lat: 51.83,\n    lon: -131.23,\n    long_name: \"South Moresby\",\n    pk: 8\n  },\n  // {\n  //   short_name: \"C46181\",\n  //   lat: 53.82,\n  //   lon: -128.84,\n  //   long_name: \"Nanakwa Shoal\",\n  //   pk: 9\n  // },\n  // {\n  //   short_name: \"C46182\",\n  //   lat: 49.48,\n  //   lon: -123.29,\n  //   long_name: \"Pam Rocks\",\n  //   pk: 10\n  // },\n  {\n    short_name: \"C46183\",\n    lat: 53.57,\n    lon: -131.14,\n    long_name: \"North Hecate Strait\",\n    pk: 11\n  },\n  {\n    short_name: \"C46184\",\n    lat: 53.92,\n    lon: -138.85,\n    long_name: \"North Nomad\",\n    pk: 12\n  },\n  {\n    short_name: \"C46185\",\n    lat: 52.42,\n    lon: -129.79,\n    long_name: \"South Hecate Strait\",\n    pk: 13\n  },\n  {\n    short_name: \"C46204\",\n    lat: 51.38,\n    lon: -128.77,\n    long_name: \"West Sea Otter\",\n    pk: 14\n  },\n  {\n    short_name: \"C46205\",\n    lat: 54.3,\n    lon: -133.4,\n    long_name: \"West Dixon Entrance\",\n    pk: 15\n  },\n  {\n    short_name: \"C46206\",\n    lat: 48.83,\n    lon: -126,\n    long_name: \"La Perouse Bank\",\n    pk: 16\n  },\n  {\n    short_name: \"C46207\",\n    lat: 50.88,\n    lon: -129.91,\n    long_name: \"East Dellwood\",\n    pk: 17\n  },\n  {\n    short_name: \"C46208\",\n    lat: 52.51,\n    lon: -132.69,\n    long_name: \"West Moresby\",\n    pk: 18\n  }\n]\n)}\n\nfunction _HWsForDate(buoyDailyData,time1){return(\nbuoyDailyData.filter(\n  (d) =>\n    new Date(time1).toISOString().substring(0, 10) ===\n    new Date(d.result_time).toISOString().substring(0, 10)\n)\n)}\n\nfunction _dayBeforeStart(focus)\n{\n  const b = Object.assign(focus[0]);\n  const fistDate = new Date(b);\n\n  return new Date(fistDate.setDate(fistDate.getDate() - 1))\n    .toISOString()\n    .substring(0, 10);\n}\n\n\nfunction _buoyDailyData(dayBeforeStart,limitsDelayed)\n{\n  // let daysago = new Date().getDate() - 7;\n  // let st = new Date(new Date().setDate(daysago));\n\n  return fetch(\n    \"https://t6r95rekqe.execute-api.us-east-1.amazonaws.com/dev/getDailySSTStats?startDate=\" +\n      dayBeforeStart +\n      \"&endDate=\" +\n      limitsDelayed[1].toISOString().substring(0, 10) +\n      \"\"\n  )\n    .then((resp) => resp.json())\n    .then((data) => {\n      data.forEach((d) => {\n        d.ssta = d.sst - d.seas;\n        d.diff = d.thresh;\n        \n        d.diffStrong = d.thresh;\n        d.diffExtreme = d.thresh;\n        d.diffSevere = d.thresh;\n        if (d.category === \"Strong\") {\n          d.diffStrong = Math.max(d.thresh, d.sst);\n        }\n        if (d.category === \"Extreme\") {\n          d.diffExtreme = Math.max(d.thresh, d.sst);\n        }\n        if (d.category === \"Severe\") {\n          d.diffSevere = Math.max(d.thresh, d.sst);\n        }\n        if (d.category === \"Moderate\") {\n          d.diff = Math.max(d.thresh, d.sst);\n        }\n        if (d.category === null) {\n          d.category = \"none\";\n        }\n        d.date = new Date(d.result_time);\n      });\n      return data;\n    });\n}\n\n\nfunction _height(){return(\n500\n)}\n\nfunction _colorMHW(d3){return(\nd3\n  .scaleOrdinal()\n  .domain([\"none\", \"Moderate\", \"Strong\", \"Severe\",\"Extreme\"])\n  .range([\"#31a354\", \"#FEDB67\", \"#f26722\", \"#7E1416\", \"#cd3728\"])\n)}\n\nfunction _opacityMHW(d3){return(\nd3\n  .scaleOrdinal()\n  .domain([\"none\", \"Moderate\", \"Strong\", \"Severe\", \"Extreme\"])\n)}\n\nfunction _numFormat(d3){return(\nd3.format(\",d\")\n)}\n\nfunction _timeFormat(d3){return(\nd3.timeFormat(\"%Y-%m-%d\")\n)}\n\nfunction _d3(require){return(\nrequire(\"d3@6\")\n)}\n\nfunction _p(time1){return(\nnew Date(time1).toISOString().substring(0, 10)\n)}\n\nfunction _hwEvent(){return(\n[\n  { date: \"2013-10-01\", value: 1 },\n  { date: \"2013-11-01\", value: 1 },\n  { date: \"2013-12-01\", value: 1 },\n  { date: \"2014-01-01\", value: 1 },\n  { date: \"2014-02-01\", value: 1 },\n  { date: \"2014-03-01\", value: 1 },\n  { date: \"2014-04-01\", value: 1 },\n  { date: \"2014-05-01\", value: 1 },\n  { date: \"2014-06-01\", value: 1 },\n  { date: \"2014-07-01\", value: 1 },\n  { date: \"2014-08-01\", value: 1 },\n  { date: \"2014-09-01\", value: 1 },\n  { date: \"2014-10-01\", value: 1 },\n  { date: \"2014-11-01\", value: 1 },\n  { date: \"2014-12-01\", value: 1 },\n  { date: \"2015-01-01\", value: 1 },\n  { date: \"2015-02-01\", value: 1 },\n  { date: \"2015-03-01\", value: 1 },\n  { date: \"2015-04-01\", value: 1 },\n  { date: \"2015-05-01\", value: 1 },\n  { date: \"2015-06-01\", value: 1 },\n  { date: \"2015-07-01\", value: 1 },\n  { date: \"2015-08-01\", value: 1 },\n  { date: \"2015-09-01\", value: 1 },\n  { date: \"2015-10-01\", value: 1 },\n  { date: \"2015-11-01\", value: 1 },\n  { date: \"2015-12-01\", value: 1 },\n  { date: \"2016-01-01\", value: 1 },\n  { date: \"2016-02-01\", value: 1 },\n  { date: \"2016-03-01\", value: 1 },\n  { date: \"2016-04-01\", value: 1 },\n  { date: \"2016-05-01\", value: 1 },\n  { date: \"2016-06-01\", value: 1 },\n  { date: \"2016-07-01\", value: 1 },\n  { date: \"2016-08-01\", value: 1 },\n  { date: \"2016-09-01\", value: 1 },\n  { date: \"2016-10-01\", value: 1 },\n  { date: \"2016-11-01\", value: 1 },\n  { date: \"2019-08-01\", value: 1 },\n  { date: \"2019-09-01\", value: 1 },\n  { date: \"2019-10-01\", value: 1 },\n  { date: \"2019-11-01\", value: 1 }\n]\n)}\n\nfunction _alldates(d3,dateExtent){return(\nd3.timeMonth\n  .range(new Date(dateExtent[0]), new Date(dateExtent[1]))\n  .map((d) => d.toISOString().substring(0, 10))\n)}\n\nfunction _allmonths(mhwBarData){return(\n[...new Set(mhwBarData.map((d) => d.date.slice(0, 7)))]\n)}\n\nfunction _105(monthlyTots){return(\nmonthlyTots.filter((d) => d.date === \"2013-01\")\n)}\n\nfunction _monthlyTots(allmonths,cats,d3,mhwBarData)\n{\n  const out = [];\n  allmonths.forEach((month) => {\n    let t = 0;\n    for (let i = 0; i < cats.length; i++) {\n      let s = d3.sum(\n        mhwBarData.filter((d) => {\n          return +new Date(d.month) === +new Date(month);\n        }),\n        (d) => d[cats[i]]\n      );\n      // 15541891 is the total amount of points\n      out.push({ date: month, [cats[i]]: s });\n      t += s;\n      // console.log(month, [cats[i]], s);\n      // console.log(t);\n    }\n    // console.log(t);\n  });\n  return out;\n}\n\n\nfunction _monthlyGrouped(groups,cats)\n{\n  const out = [];\n  groups.forEach((d) => {\n    let sum = 0;\n    d[1].forEach((d) => {\n      sum += Object.values(d)[1];\n    });\n    // return sum;\n    out.push({\n      date: new Date(d[0]),\n      [cats[0]]: d[1][0][cats[0]] / sum,\n      [cats[1]]: d[1][1][cats[1]] / sum,\n      [cats[2]]: d[1][2][cats[2]] / sum,\n      [cats[3]]: d[1][3][cats[3]] / sum,\n      [cats[4]]: d[1][4][cats[4]] / sum,\n      noData: 0,\n      sum: sum\n    });\n  });\n\n  // remove current month's incomplete data with -999\n  const corrected = out.map((d) => {\n    if (\n      new Date(d.date).toISOString().substring(0, 7) ===\n      new Date().toISOString().substring(0, 7)\n    ) {\n      (d.none = 0),\n        (d.Moderate = 0),\n        (d.Strong = 0),\n        (d.Extreme = 0),\n        (d.Severe = 0),\n        (d.noData = 1);\n    }\n    return d;\n  });\n\n  return corrected;\n}\n\n\nfunction _108(monthlyGrouped){return(\nmonthlyGrouped[115]\n)}\n\nfunction _109(monthlyGrouped){return(\nmonthlyGrouped[115].date\n)}\n\nfunction _110(){return(\nnew Date().toISOString().substring(0, 7)\n)}\n\nfunction _cats(){return(\n[\"none\", \"Moderate\", \"Strong\", \"Extreme\", \"Severe\", \"noData\"]\n)}\n\nfunction _groups(d3,monthlyTots){return(\nd3.groups(monthlyTots, (d) => +new Date(d.date))\n)}\n\nfunction _mhwBarData(tt)\n{\n  // const raw = await FileAttachment(\"monthlyMHW@4.json\").json();\n  const raw = tt;\n  const out = [];\n  Object.keys(raw).forEach((d) => {\n    for (let i = 0; i < 1; i++) {\n      let tot = raw[d].reduce((a, b) => a + b, 0);\n      out.push({\n        date: d.replace(/(\\d{4})(\\d{2})(\\d{2})/g, \"$1-$2-$3\"),\n        month: d.replace(/(\\d{4})(\\d{2})(\\d{2})/g, \"$1-$2-$3\").slice(0, 7),\n        none: raw[d][0],\n        Moderate: raw[d][1],\n        Strong: raw[d][2],\n        Extreme: raw[d][3],\n        Severe: raw[d][4]\n      });\n    }\n  });\n  return out;\n}\n\n\nfunction _tt(){return(\nfetch(\n  \"https://raw.githubusercontent.com/HakaiInstitute/ssta_images/gh-pages/src/monthlyMHW.json\",\n  { Method: \"GET\" }\n).then((response) => {\n  return response.json();\n})\n)}\n\nfunction _115(dataSsta){return(\ndataSsta[\"202203\"]\n)}\n\nfunction _116(dataSsta){return(\ndataSsta[\"202207\"]\n)}\n\nfunction _dataSsta(){return(\nfetch(\n  \"https://raw.githubusercontent.com/HakaiInstitute/ssta_images/gh-pages/src/monthly.json\",\n  { Method: \"GET\" }\n).then((response) => {\n  return response.json();\n})\n)}\n\nfunction _dataSstaOld(FileAttachment){return(\nFileAttachment(\"monthly@7.json\").json()\n)}\n\nexport default function define(runtime, observer) {\n  const main = runtime.module();\n  function toString() { return this.url; }\n  const fileAttachments = new Map([\n    [\"monthly@7.json\", {url: new URL(\"./files/a3fbadf29709e974764d626a8843acf9134d9d813173218a60e5bbdf612fc8f873cb8fc46bf03b10d42dff7e66f3861625456633c0b887fee99eb6c0c0ac42d9.json\", import.meta.url), mimeType: \"application/json\", toString}]\n  ]);\n  main.builtin(\"FileAttachment\", runtime.fileAttachments(name => fileAttachments.get(name)));\n  main.variable(observer()).define([\"md\"], _1);\n  main.variable(observer(\"curDate\")).define(\"curDate\", [\"md\",\"timeFormat\",\"time1\"], _curDate);\n  main.variable(observer()).define([\"md\"], _3);\n  main.variable(observer()).define([\"d3\"], _4);\n  main.variable(observer(\"endPlayDate\")).define(\"endPlayDate\", [\"d3\"], _endPlayDate);\n  main.variable(observer(\"style\")).define(\"style\", [\"html\",\"width\",\"ns\"], _style);\n  main.variable(observer()).define([\"brushedData\"], _7);\n  main.variable(observer()).define([\"md\"], _8);\n  main.variable(observer(\"viewof time1\")).define(\"viewof time1\", [\"Scrubber\",\"datesToPlot\",\"newNum\"], _time1);\n  main.variable(observer(\"time1\")).define(\"time1\", [\"Generators\", \"viewof time1\"], (G, _) => G.input(_));\n  main.variable(observer()).define([\"md\"], _10);\n  main.variable(observer(\"viewof colorView\")).define(\"viewof colorView\", [\"Inputs\",\"html\"], _colorView);\n  main.variable(observer(\"colorView\")).define(\"colorView\", [\"Generators\", \"viewof colorView\"], (G, _) => G.input(_));\n  main.define(\"initial newNum\", _newNum);\n  main.variable(observer(\"mutable newNum\")).define(\"mutable newNum\", [\"Mutable\", \"initial newNum\"], (M, _) => new M(_));\n  main.variable(observer(\"newNum\")).define(\"newNum\", [\"mutable newNum\"], _ => _.generator);\n  main.variable(observer()).define([\"brushedData\"], _13);\n  main.variable(observer(\"addGreybar\")).define(\"addGreybar\", [\"data\",\"brusedAllDates\"], _addGreybar);\n  main.variable(observer()).define([\"brusedAllDates\"], _16);\n  main.variable(observer(\"chart\")).define(\"chart\", [\"colorView\",\"focusHeight\",\"d3\",\"width\",\"margin\",\"xMHW\",\"stack\",\"brushedDataMHW\",\"colors\",\"x1MHW\",\"endPlayDate\",\"x\",\"time1\",\"drag\",\"brusedAllDates\",\"brushedData\",\"sstaColors\"], _chart);\n  main.variable(observer(\"drag\")).define(\"drag\", [\"d3\",\"x\",\"focus\",\"endPlayDate\",\"datesToPlot\",\"mutable newNum\",\"viewof time1\"], _drag);\n  main.variable(observer()).define([\"monthlyGrouped\"], _21);\n  main.define(\"initial debug1\", _debug1);\n  main.variable(observer(\"mutable debug1\")).define(\"mutable debug1\", [\"Mutable\", \"initial debug1\"], (M, _) => new M(_));\n  main.variable(observer(\"debug1\")).define(\"debug1\", [\"mutable debug1\"], _ => _.generator);\n  main.variable(observer(\"viewof focus\")).define(\"viewof focus\", [\"colorView\",\"d3\",\"width\",\"focusHeight\",\"dateExtent\",\"margin\",\"xAxis\",\"stack\",\"monthlyGrouped\",\"colors\",\"x1\",\"y\",\"data\",\"sstaColors\",\"mutable debug1\"], _focus);\n  main.variable(observer(\"focus\")).define(\"focus\", [\"Generators\", \"viewof focus\"], (G, _) => G.input(_));\n  main.variable(observer(\"legTitle\")).define(\"legTitle\", [\"md\",\"colorView\"], _legTitle);\n  main.variable(observer(\"leg\")).define(\"leg\", [\"colorView\",\"Plot\"], _leg);\n  main.variable(observer()).define([\"Inputs\",\"alldays\"], _26);\n  main.variable(observer()).define([\"clickedSite\"], _27);\n  main.variable(observer()).define([\"clickedSite\",\"limitsDelayed\"], _28);\n  main.variable(observer(\"alldays\")).define(\"alldays\", [\"d3\",\"focus\",\"clickedSite\",\"siteClicked\"], _alldays);\n  main.variable(observer()).define([\"alldays\"], _30);\n  main.variable(observer()).define([\"alldays\"], _31);\n  main.variable(observer()).define([\"clickedSite\"], _32);\n  main.variable(observer()).define([\"clickedSite\",\"alldays\"], _33);\n  main.variable(observer()).define([\"alldays\"], _34);\n  main.variable(observer()).define([\"alldays\"], _35);\n  main.variable(observer()).define([\"clickedSite\",\"alldays\"], _36);\n  main.variable(observer()).define([\"tempToShow\"], _37);\n  main.variable(observer(\"viewof lineChart\")).define(\"viewof lineChart\", [\"alldays\",\"tempToShow\",\"Plot\",\"limitsDelayed\",\"yMaxDomainToUse\",\"time1\",\"d3\",\"dateForLabel\",\"yValueForLabel\",\"buoyClicked\",\"colors\",\"dateForLabelVal\",\"currentValue\",\"colorView\",\"md\"], _lineChart);\n  main.variable(observer(\"lineChart\")).define(\"lineChart\", [\"Generators\", \"viewof lineChart\"], (G, _) => G.input(_));\n  main.define(\"initial siteClicked\", _siteClicked);\n  main.variable(observer(\"mutable siteClicked\")).define(\"mutable siteClicked\", [\"Mutable\", \"initial siteClicked\"], (M, _) => new M(_));\n  main.variable(observer(\"siteClicked\")).define(\"siteClicked\", [\"mutable siteClicked\"], _ => _.generator);\n  main.variable(observer(\"ind\")).define(\"ind\", [\"dates\",\"time1\"], _ind);\n  main.variable(observer(\"today\")).define(\"today\", [\"d3\"], _today);\n  main.variable(observer(\"start\")).define(\"start\", [\"d3\",\"today\"], _start);\n  main.variable(observer(\"limitsDelayed\")).define(\"limitsDelayed\", [\"Promises\",\"focus\"], _limitsDelayed);\n  main.variable(observer(\"limitsDelayedMHW\")).define(\"limitsDelayedMHW\", [\"Promises\",\"focus\"], _limitsDelayedMHW);\n  main.variable(observer()).define([\"md\"], _47);\n  main.variable(observer(\"focusHeight\")).define(\"focusHeight\", _focusHeight);\n  main.variable(observer(\"margin\")).define(\"margin\", _margin);\n  main.variable(observer(\"x1\")).define(\"x1\", [\"d3\",\"margin\",\"width\",\"alldates\"], _x1);\n  main.variable(observer(\"x1MHW\")).define(\"x1MHW\", [\"d3\",\"margin\",\"width\",\"brusedAllDatesMHW\"], _x1MHW);\n  main.variable(observer(\"xAxis\")).define(\"xAxis\", [\"margin\",\"d3\",\"width\"], _xAxis);\n  main.variable(observer(\"y\")).define(\"y\", [\"d3\",\"focusHeight\",\"margin\"], _y);\n  main.variable(observer(\"brushedDataMHW\")).define(\"brushedDataMHW\", [\"monthlyGrouped\",\"focus\"], _brushedDataMHW);\n  main.variable(observer()).define([\"monthlyGrouped\"], _55);\n  main.variable(observer(\"brusedAllDates\")).define(\"brusedAllDates\", [\"d3\",\"focus\"], _brusedAllDates);\n  main.variable(observer(\"brusedAllDatesMHW\")).define(\"brusedAllDatesMHW\", [\"d3\",\"focus\"], _brusedAllDatesMHW);\n  main.variable(observer(\"x\")).define(\"x\", [\"d3\",\"focus\",\"margin\",\"width\"], _x);\n  main.variable(observer(\"xMHW\")).define(\"xMHW\", [\"d3\",\"focus\",\"margin\",\"width\"], _xMHW);\n  main.variable(observer(\"stack\")).define(\"stack\", [\"d3\",\"cats\"], _stack);\n  main.variable(observer(\"brushedData\")).define(\"brushedData\", [\"data\",\"focus\"], _brushedData);\n  main.variable(observer(\"sstaColors\")).define(\"sstaColors\", [\"d3\"], _sstaColors);\n  main.variable(observer(\"brushHandle\")).define(\"brushHandle\", [\"arc\"], _brushHandle);\n  main.variable(observer(\"arc\")).define(\"arc\", [\"d3\"], _arc);\n  main.variable(observer(\"data\")).define(\"data\", [\"dataSsta\"], _data);\n  main.variable(observer(\"ns\")).define(\"ns\", [\"Inputs\"], _ns);\n  main.variable(observer(\"datesToPlot\")).define(\"datesToPlot\", [\"datesCopy\",\"limitsDelayed\"], _datesToPlot);\n  main.variable(observer(\"dates\")).define(\"dates\", [\"d3\",\"dateExtent\"], _dates);\n  main.variable(observer(\"datesCopy\")).define(\"datesCopy\", [\"dates\"], _datesCopy);\n  main.variable(observer(\"dateExtent\")).define(\"dateExtent\", _dateExtent);\n  main.variable(observer()).define([\"buoys\",\"siteClickeds\"], _71);\n  main.variable(observer()).define([\"siteClickeds\"], _72);\n  main.variable(observer(\"viewof siteClickeds\")).define(\"viewof siteClickeds\", [\"Inputs\",\"buoys\"], _siteClickeds);\n  main.variable(observer(\"siteClickeds\")).define(\"siteClickeds\", [\"Generators\", \"viewof siteClickeds\"], (G, _) => G.input(_));\n  main.variable(observer()).define([\"clickedSite\"], _74);\n  main.variable(observer()).define([\"time1\"], _75);\n  main.variable(observer(\"tempToShow\")).define(\"tempToShow\", [\"clickedSite\",\"time1\"], _tempToShow);\n  main.variable(observer(\"currentValue\")).define(\"currentValue\", [\"clickedSite\",\"tempToShow\"], _currentValue);\n  main.variable(observer(\"yMaxDomainToUse\")).define(\"yMaxDomainToUse\", [\"clickedSite\",\"d3\"], _yMaxDomainToUse);\n  main.variable(observer(\"yValueForLabel\")).define(\"yValueForLabel\", [\"clickedSite\",\"d3\"], _yValueForLabel);\n  main.variable(observer(\"dateForLabel\")).define(\"dateForLabel\", [\"clickedSite\",\"d3\",\"limitsDelayed\"], _dateForLabel);\n  main.variable(observer(\"dateForLabelVal\")).define(\"dateForLabelVal\", [\"clickedSite\",\"d3\",\"limitsDelayed\"], _dateForLabelVal);\n  main.variable(observer(\"buoyClicked\")).define(\"buoyClicked\", [\"buoys\",\"siteClicked\"], _buoyClicked);\n  main.variable(observer()).define([\"buoyDailyData\"], _83);\n  main.variable(observer(\"clickedSite\")).define(\"clickedSite\", [\"buoyDailyData\",\"siteClicked\"], _clickedSite);\n  main.variable(observer(\"colors\")).define(\"colors\", _colors);\n  main.variable(observer(\"buoys\")).define(\"buoys\", _buoys);\n  main.variable(observer(\"HWsForDate\")).define(\"HWsForDate\", [\"buoyDailyData\",\"time1\"], _HWsForDate);\n  main.variable(observer(\"dayBeforeStart\")).define(\"dayBeforeStart\", [\"focus\"], _dayBeforeStart);\n  main.variable(observer(\"buoyDailyData\")).define(\"buoyDailyData\", [\"dayBeforeStart\",\"limitsDelayed\"], _buoyDailyData);\n  main.variable(observer(\"height\")).define(\"height\", _height);\n  main.variable(observer(\"colorMHW\")).define(\"colorMHW\", [\"d3\"], _colorMHW);\n  main.variable(observer(\"opacityMHW\")).define(\"opacityMHW\", [\"d3\"], _opacityMHW);\n  main.variable(observer(\"numFormat\")).define(\"numFormat\", [\"d3\"], _numFormat);\n  main.variable(observer(\"timeFormat\")).define(\"timeFormat\", [\"d3\"], _timeFormat);\n  main.variable(observer(\"d3\")).define(\"d3\", [\"require\"], _d3);\n  main.define(\"initial p\", [\"time1\"], _p);\n  main.variable(observer(\"mutable p\")).define(\"mutable p\", [\"Mutable\", \"initial p\"], (M, _) => new M(_));\n  main.variable(observer(\"p\")).define(\"p\", [\"mutable p\"], _ => _.generator);\n  main.variable(observer(\"hwEvent\")).define(\"hwEvent\", _hwEvent);\n  main.variable(observer(\"alldates\")).define(\"alldates\", [\"d3\",\"dateExtent\"], _alldates);\n  main.variable(observer(\"allmonths\")).define(\"allmonths\", [\"mhwBarData\"], _allmonths);\n  main.variable(observer()).define([\"monthlyTots\"], _105);\n  main.variable(observer(\"monthlyTots\")).define(\"monthlyTots\", [\"allmonths\",\"cats\",\"d3\",\"mhwBarData\"], _monthlyTots);\n  main.variable(observer(\"monthlyGrouped\")).define(\"monthlyGrouped\", [\"groups\",\"cats\"], _monthlyGrouped);\n  main.variable(observer()).define([\"monthlyGrouped\"], _108);\n  main.variable(observer()).define([\"monthlyGrouped\"], _109);\n  main.variable(observer()).define(_110);\n  main.variable(observer(\"cats\")).define(\"cats\", _cats);\n  main.variable(observer(\"groups\")).define(\"groups\", [\"d3\",\"monthlyTots\"], _groups);\n  main.variable(observer(\"mhwBarData\")).define(\"mhwBarData\", [\"tt\"], _mhwBarData);\n  main.variable(observer(\"tt\")).define(\"tt\", _tt);\n  main.variable(observer()).define([\"dataSsta\"], _115);\n  main.variable(observer()).define([\"dataSsta\"], _116);\n  main.variable(observer(\"dataSsta\")).define(\"dataSsta\", _dataSsta);\n  main.variable(observer(\"dataSstaOld\")).define(\"dataSstaOld\", [\"FileAttachment\"], _dataSstaOld);\n  const child1 = runtime.module(define1);\n  main.import(\"Scrubber\", child1);\n  return main;\n}\n"],"sourceRoot":""}