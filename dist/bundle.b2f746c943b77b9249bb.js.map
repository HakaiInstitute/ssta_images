{"version":3,"sources":["webpack://ssta/./src/buoyviz/0b936d79280ee3bd@6294.js"],"names":["_1","md","_curDate","timeFormat","time1","Date","_3","_4","d3","timeDay","offset","utcDay","_endPlayDate","_style","html","width","ns","_7","brushedData","_8","_time1","Scrubber","datesToPlot","newNum","delay","initial","autoplay","loop","format","d","_10","_colorView","Inputs","radio","value","x","_newNum","_13","_addGreybar","brusedAllDates","length","date","push","_16","_18","_20","brushedDataMHW","_21","stack","_22","_23","_chart","colorView","focusHeight","margin","xMHW","colors","x1MHW","endPlayDate","drag","sstaColors","height","svg","create","attr","style","y","scaleLinear","domain","range","bottom","top","xAxis","g","call","axisBottom","ticks","tickSizeOuter","append","chartData","selectAll","data","join","i","console","log","get","key","toISOString","substring","bandwidth","datum","node","x2","scaleBand","left","right","padding","enter","_drag","focus","$0","$1","on","event","select","this","raise","isBelowMax","isAboveMin","ind","bisect","invert","update","_26","monthlyGrouped","_debug1","_focus","dateExtent","x1","scaleTime","brush","brushX","extent","brushed","brushended","defaultSelection","utcYear","previousS0","previousS1","gb","selection","s","property","map","utcMonth","ceil","dispatch","move","_legTitle","_leg","Plot","legend","marginLeft","marginRight","backgroundColor","color","fontSize","fontWeight","type","pivot","reverse","label","_31","alldays","table","_32","clickedSite","_33","limitsDelayed","_alldays","siteClicked","out","forEach","day","isData","find","undefined","station","sst","NaN","ssta","_35","_36","_37","_38","_39","_40","_41","_42","tempToShow","_lineChart","yMaxDomainToUse","dateForLabel","yValueForLabel","buoyClicked","dateForLabelVal","currentValue","taLabel","HWlineChart","plot","marginTop","className","marks","dot","stroke","fill","ruleX","y1","y2","max","text","SSTAlineChart","_siteClicked","_ind","dates","indexOf","_today","_start","today","async","_limitsDelayed","Promises","_limitsDelayedMHW","_52","_focusHeight","_margin","_x1","alldates","_x1MHW","brusedAllDatesMHW","_xAxis","_y","_brushedDataMHW","filter","_60","_brusedAllDates","timeMonth","_brusedAllDatesMHW","_x","_xMHW","_stack","cats","keys","_brushedData","_sstaColors","scaleDiverging","interpolateRdBu","_brushHandle","arc","_arc","innerRadius","outerRadius","startAngle","endAngle","Math","PI","_data","dataSsta","Object","slice","_ns","classList","_datesToPlot","datesCopy","_dates","_datesCopy","_dateExtent","_76","buoys","siteClickeds","long_name","pk","_77","_siteClickeds","concat","_79","_80","_tempToShow","_currentValue","toFixed","_yMaxDomainToUse","floor","_yValueForLabel","_dateForLabel","_dateForLabelVal","_buoyClicked","_88","buoyDailyData","_clickedSite","_colors","Map","_buoys","short_name","lat","lon","_HWsForDate","result_time","_dayBeforeStart","b","assign","fistDate","setDate","getDate","_buoyDailyData","dayBeforeStart","fetch","then","resp","json","seas","diff","thresh","diffStrong","diffExtreme","diffSevere","category","_height","_colorMHW","scaleOrdinal","_opacityMHW","_numFormat","_timeFormat","_d3","require","_p","_hwEvent","_alldates","_allmonths","mhwBarData","Set","_110","monthlyTots","_monthlyTots","allmonths","month","t","sum","_monthlyGrouped","groups","values","noData","none","Moderate","Strong","Extreme","Severe","_113","_114","_115","_cats","_groups","_mhwBarData","tt","raw","reduce","a","replace","_tt","Method","response","_120","_121","_dataSsta","_dataSstaOld","FileAttachment","define","runtime","observer","main","module","fileAttachments","url","URL","mimeType","toString","builtin","name","variable","G","_","input","M","generator","child1","define1","import"],"mappings":"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","file":"bundle.b2f746c943b77b9249bb.js","sourcesContent":["import define1 from \"./41364653f34651d0@442.js\";\n\nfunction _1(md){return(\nmd`# Marine heatwave charts and brush/player\n\nused to embed as a module in https://cioospacific.ca/applied-data/marine-heat-monitor/\n\ncurl -o bs.tgz \"https://api.observablehq.com/d/0b936d79280ee3bd.tgz?v=3\"\n\ntar -C src/buoyviz -xvzf bs.tgz\n\nThis notebook includes\n- loading the buoy data via api\n- data brush chart (loads from github)\n- scrubber for playing the animation in the website\n- charts for the buoys\n\n### Change log\nJune 22 2022\n- replaced the player notebook with scrubber, as font awesome used in the player was not playing well with webpack.\n\n\n`\n)}\n\nfunction _curDate(md,timeFormat,time1){return(\nmd`# ${timeFormat(new Date(time1))}`\n)}\n\nfunction _3(md){return(\nmd`date to stop playing. Ideally this should be a only a couple days in the past since data is usually updated each day`\n)}\n\nfunction _4(d3){return(\nd3.timeDay.offset(d3.utcDay(), -2)\n)}\n\nfunction _endPlayDate(d3){return(\nd3.timeDay.offset(d3.utcDay(), -2)\n)}\n\nfunction _style(html,width,ns){return(\nhtml`\n<style>\n\n  /* match the scrubber's width to our race chart */\n   // input[type=\"range\"][name=\"i\"] {\n   //   width: ${width - 90}px !important;\n   // }\n\n.${ns}{\n  font-size: 16px;  \n}\n\n\nbutton, input, textarea {\n    accent-color: #007490;\n}\n\n#butt input, textarea {\n    accent-color: green;\n}\n.brushFilter {\nbackground-color: #606060;\ncolor: \"#e0f5ee\"\n}\n\n.currentDot{\nbackground-color: none;\ncolor: \"#e0f5ee\"\n}\n\n.axisWhite line{\n  stroke: #e0f5ee;\n}\n\n.axisWhite path{\n  stroke: #e0f5ee;\n}\n\n// .selection{\n// fill: #d9d9d9;\n// fill-opacity: .6;\n// stroke: none;\n// }\n\n.radio {\n\n  color: deeppink;\n}\n  .button {\ncolor:lightgrey;\n  border: 0;\n  background: transparent;\n  box-sizing: border-box;\n  width: 100;\n  height: 74px;\n  border-color: transparent transparent transparent lightgrey;\n  transition: 100ms all ease;\n  cursor: pointer;\n  border-style: solid;\n  border-width: 37px 0 37px 60px;\ntransform: scale(.7);\n}\n.paused {\n  border-style: double;\n  border-width: 0px 0 0px 60px;\n}\n.button:hover {\n  border-color: transparent transparent transparent #8f8f8f;\n}\n// input[type=\"range\"][name=\"input\"] {\n// accent-color:blue\n\n// }\n\n#dot{\n accent-color:black\n}\n.fa-xs {\n    font-size: 5.75em;\n}\n\n\n\n</style>\n`\n)}\n\nfunction _7(brushedData){return(\nbrushedData\n)}\n\nfunction _8(md){return(\nmd`play`\n)}\n\nfunction _time1(Scrubber,datesToPlot,newNum){return(\nScrubber(datesToPlot, {\n  width: 0,\n  delay: 100,\n  initial: newNum,\n  autoplay: false,\n  loop: false,\n  format: (d) => \"\"\n})\n)}\n\nfunction _10(md){return(\nmd`anomaly or category button`\n)}\n\nfunction _colorView(Inputs,html){return(\nInputs.radio([\"Anomaly\", \"Heatwaves\"], {\n  value: \"Anomaly\",\n  // label: \"Choose category to view\",\n  format: (x) => html`<span style=\"color: white\">${x}`\n})\n)}\n\nfunction _newNum(){return(\n0\n)}\n\nfunction _13(brushedData){return(\nbrushedData\n)}\n\nfunction _addGreybar(brushedData,brusedAllDates)\n{\n  if (\n    brushedData[brushedData.length - 1].date <\n    new Date(brusedAllDates[brusedAllDates.length - 1])\n  ) {\n    brushedData.push({\n      date: new Date(brusedAllDates[brusedAllDates.length - 1]),\n      value: -99\n    });\n  }\n  return brushedData;\n}\n\n\nfunction _16(brusedAllDates){return(\nbrusedAllDates[brusedAllDates.length - 1]\n)}\n\nfunction _18(brusedAllDates){return(\nbrusedAllDates\n)}\n\nfunction _20(brushedDataMHW){return(\nbrushedDataMHW\n)}\n\nfunction _21(stack,brushedDataMHW){return(\nstack(brushedDataMHW)\n)}\n\nfunction _22(brusedAllDates){return(\nnew Date(brusedAllDates[brusedAllDates.length - 1])\n)}\n\nfunction _23(brusedAllDates,brushedDataMHW){return(\nbrusedAllDates[brusedAllDates.length - 1] === brushedDataMHW[11].date\n)}\n\nfunction _chart(colorView,focusHeight,d3,width,margin,xMHW,stack,brushedDataMHW,colors,x1MHW,endPlayDate,x,time1,drag,brusedAllDates,brushedData,sstaColors)\n{\n  if (colorView === \"Heatwaves\") {\n    const height = focusHeight;\n    const svg = d3\n      .create(\"svg\")\n      .attr(\"viewBox\", [0, 0, width, height])\n      .style(\"display\", \"block\");\n\n    const y = d3\n      .scaleLinear()\n      .domain([0, 1])\n      .range([height - margin.bottom, margin.top + 5]);\n\n    const xAxis = (g, xMHW, height) =>\n      g\n        .attr(\"transform\", `translate(0,${height - margin.bottom})`)\n        .call(\n          d3\n            .axisBottom(xMHW)\n            .ticks(width / 80)\n            .tickSizeOuter(0)\n        )\n        .style(\"stroke\", \"#e0f5ee\");\n\n    svg.append(\"g\").call(xAxis, xMHW, height).attr(\"class\", \"axisWhite\");\n\n    const chartData = stack(brushedDataMHW);\n    // svg.append(\"path\")\n    const groups = svg\n      .append(\"g\")\n      // Each layer of the stack goes in a group\n      // the group contains that layer for all countries\n      .selectAll(\"g\")\n      .data(chartData)\n      .join(\"g\")\n      // rects in the same layer will all have the same color, so we can put it on the group\n      // we can use the key on the layer's array to set the color\n      .style(\"fill\", (d, i) => {\n        console.log(d);\n        return d.date > new Date(\"2022-08-01\") ? \"grey\" : colors.get(d.key);\n      });\n\n    groups\n      .selectAll(\"rect\")\n      .data((d) => d)\n      .join(\"rect\")\n      .attr(\"x\", (d) => {\n        return x1MHW(new Date(d.data.date).toISOString().substring(0, 10));\n      })\n      .attr(\"y\", (d) => y(d[1]))\n      .attr(\"height\", (d) => y(d[0]) - y(d[1]))\n      .attr(\"width\", x1MHW.bandwidth());\n    const endLine = svg\n      .append(\"line\")\n      .datum([\n        {\n          date: endPlayDate,\n          value: 1\n        }\n      ])\n      .attr(\"x1\", (d) => {\n        return x(endPlayDate);\n      })\n      .attr(\"x2\", (d) => x(endPlayDate))\n      .attr(\"y2\", y(1))\n      .attr(\"y1\", y(0))\n      .attr(\"fill\", \"none\")\n      .attr(\"stroke\", \"blue\")\n      .attr(\"stoke-width\", 1.5)\n      .attr(\"stroke-linejoin\", \"round\");\n\n    const recordLine = svg\n      .append(\"line\")\n      .datum([\n        {\n          date: time1,\n          value: 1\n        }\n      ])\n      .attr(\"x1\", (d) => {\n        return x(time1);\n      })\n      .attr(\"x2\", (d) => x(time1))\n      .attr(\"y2\", y(1))\n      .attr(\"y1\", y(0))\n      .attr(\"fill\", \"none\")\n      .attr(\"stroke\", \"deeppink\")\n      .attr(\"stoke-width\", 1.5)\n      .attr(\"stroke-linejoin\", \"round\");\n\n    const circles = svg\n      .selectAll(\"circle\")\n      .data([\n        {\n          date: time1,\n          value: 1\n        }\n      ])\n      .join(\"circle\")\n      .attr(\"cx\", (d) => {\n        return x(d.date);\n      })\n      .attr(\"cy\", (d) => y(0.98))\n      .attr(\"r\", 7)\n      .attr(\"fill\", (d) => \"deeppink\")\n      .attr(\"stroke\", (d) => \"deeppink\")\n      .call(drag);\n\n    return svg.node();\n  } else {\n    // anomaly chart\n\n    const height = focusHeight;\n    const svg = d3\n      .create(\"svg\")\n      .attr(\"viewBox\", [0, 0, width, height])\n      .style(\"display\", \"block\");\n\n    const y = d3\n      .scaleLinear()\n      .domain([0, 1])\n      .range([height - margin.bottom, margin.top + 5]);\n\n    const xAxis = (g, x, height) =>\n      g\n        .attr(\"transform\", `translate(0,${height - margin.bottom})`)\n        .call(\n          d3\n            .axisBottom(x)\n            .ticks(width / 80)\n            .tickSizeOuter(0)\n        )\n        .style(\"stroke\", \"#e0f5ee\");\n\n    svg.append(\"g\").call(xAxis, x, height).attr(\"class\", \"axisWhite\");\n\n    const x2 = d3\n      .scaleBand()\n      .range([margin.left, width - margin.right], 0.01)\n      .padding(0.01)\n      .domain(brusedAllDates);\n\n    const bars = svg\n      .selectAll(\"rect\")\n      .data(brushedData)\n      .enter()\n      .append(\"rect\")\n      .attr(\"x\", (d) => x2(d.date.toISOString().substring(0, 10)))\n      .attr(\"y\", (d) => {\n        return y(1);\n      })\n      .attr(\"width\", (d) => x2.bandwidth())\n      .attr(\"height\", (d) => y(0) - y(1))\n      .attr(\"fill\", (d) => (d.value === -99 ? \"#ddd\" : sstaColors(d.value)));\n\n    const recordLine = svg\n      .append(\"line\")\n      .datum([\n        {\n          date: time1,\n          value: 1\n        }\n      ])\n      .attr(\"x1\", (d) => {\n        return x(time1);\n      })\n      .attr(\"x2\", (d) => x(time1))\n      .attr(\"y2\", y(1))\n      .attr(\"y1\", y(0))\n      .attr(\"fill\", \"none\")\n      .attr(\"stroke\", \"deeppink\")\n      .attr(\"stoke-width\", 1.5)\n      .attr(\"stroke-linejoin\", \"round\");\n\n    const endLine = svg\n      .append(\"line\")\n      .datum([\n        {\n          date: endPlayDate,\n          value: 1\n        }\n      ])\n      .attr(\"x1\", (d) => {\n        return x(endPlayDate);\n      })\n      .attr(\"x2\", (d) => x(endPlayDate))\n      .attr(\"y2\", y(1))\n      .attr(\"y1\", y(0))\n      .attr(\"fill\", \"none\")\n      .attr(\"stroke\", \"blue\")\n      .attr(\"stoke-width\", 1.5)\n      .attr(\"stroke-linejoin\", \"round\");\n\n    const circles = svg\n      .selectAll(\"circle\")\n      .data([\n        {\n          date: time1,\n          value: 1\n        }\n      ])\n      .join(\"circle\")\n      .attr(\"cx\", (d) => {\n        return x(d.date);\n      })\n      .attr(\"cy\", (d) => y(0.98))\n      .attr(\"r\", 7)\n      .attr(\"fill\", (d) => \"deeppink\")\n      .attr(\"stroke\", (d) => \"deeppink\")\n      .call(drag);\n    return svg.node();\n  }\n}\n\n\nfunction _drag(d3,x,focus,endPlayDate,datesToPlot,$0,$1)\n{\n  function dragstarted(event, d) {\n    d3.select(this).raise().attr(\"stroke\", \"black\");\n  }\n\n  function dragged(event, d) {\n    let isBelowMax = event.x > x(+focus[0]);\n    let isAboveMin = event.x < x(+endPlayDate);\n    // mutable debug = new Date(\"2022-04-08\");\n    // console.log(d3.timeDay.offset(today, -1));\n\n    if (isBelowMax && isAboveMin) {\n      d3.select(this).attr(\"cx\", (d.x = event.x));\n      // console.log(event.x, event.dx);\n\n      const ind = d3.bisect(datesToPlot, +x.invert(event.x));\n      // mutable debug = ind;\n      $0.value = ind; // place ind we need to move the scrubber to\n      $1.update(ind);\n    }\n\n    // .attr(\"cy\", (d.y = event.y));\n  }\n\n  function dragended(event, d) {\n    d3.select(this).attr(\"stroke\", null);\n  }\n\n  return d3\n    .drag()\n    .on(\"start\", dragstarted)\n    .on(\"drag\", dragged)\n    .on(\"end\", dragended);\n}\n\n\nfunction _26(monthlyGrouped){return(\nmonthlyGrouped[115]\n)}\n\nfunction _debug1(){return(\nnull\n)}\n\nfunction _focus(colorView,d3,width,focusHeight,dateExtent,margin,xAxis,stack,monthlyGrouped,colors,x1,y,data,sstaColors,$0)\n{\n  if (colorView === \"Heatwaves\") {\n    const svg = d3\n      .create(\"svg\")\n      .attr(\"viewBox\", [0, 0, width, focusHeight])\n      .style(\"display\", \"block\");\n\n    const x = d3\n      .scaleTime()\n      .domain(dateExtent)\n      .range([margin.left, width - margin.right]);\n\n    const brush = d3\n      .brushX()\n      .extent([\n        [margin.left, 0.5],\n        [width - margin.right, focusHeight - margin.bottom + 0.5]\n      ])\n      .on(\"brush\", brushed)\n      .on(\"end\", brushended);\n\n    const defaultSelection = [\n      x(d3.utcYear.offset(x.domain()[1], -1)),\n      x.range()[1]\n    ];\n\n    svg.append(\"g\").call(xAxis, x, focusHeight).attr(\"class\", \"axisWhite\");\n    let previousS0, previousS1;\n\n    const chartData = stack(monthlyGrouped);\n\n    const groups = svg\n      .append(\"g\")\n      // Each layer of the stack goes in a group\n      // the group contains that layer for all countries\n      .selectAll(\"g\")\n      .data(chartData)\n      .join(\"g\")\n      // rects in the same layer will all have the same color, so we can put it on the group\n      // we can use the key on the layer's array to set the color\n      .style(\"fill\", (d, i) => {\n        console.log(d.key);\n        return colors.get(d.key);\n      });\n    // .attr(\"d\", area(x, y.copy().range([focusHeight - margin.bottom, 4])));\n\n    groups\n      .selectAll(\"rect\")\n      // Now we place the rects, which are the children of the layer array\n      .data((d) => d)\n      .join(\"rect\")\n      .attr(\"x\", (d) => {\n        // console.log(d.data.date);\n        return x1(new Date(d.data.date).toISOString().substring(0, 10));\n      })\n      .attr(\"y\", (d) => y(d[1]))\n      .attr(\"height\", (d) => y(d[0]) - y(d[1]))\n      .attr(\"width\", x1.bandwidth());\n\n    const gb = svg.append(\"g\").call(brush);\n    gb.call(brush.move, defaultSelection);\n\n    function brushed({ selection }) {\n      if (selection) {\n        // console.log(\"fire1\");\n        var s = selection || x.range();\n\n        svg.property(\"value\", selection.map(x.invert, x).map(d3.utcMonth.ceil));\n        svg.dispatch(\"input\");\n\n        if (((s[1] - s[0]) / width) * 120 > 30) {\n          gb.call(brush.move, [previousS0, previousS1]);\n          return;\n        }\n        previousS0 = s[0];\n        previousS1 = s[1];\n      }\n    }\n\n    function brushended({ selection }) {\n      if (!selection) {\n        gb.call(brush.move, [defaultSelection]);\n      }\n    }\n    return svg.node();\n\n    /////\n  } else {\n    const svg = d3\n      .create(\"svg\")\n      .attr(\"viewBox\", [0, 0, width, focusHeight])\n      .style(\"display\", \"block\");\n\n    const x = d3\n      .scaleTime()\n      .domain(dateExtent)\n      .range([margin.left, width - margin.right]);\n\n    const brush = d3\n      .brushX()\n      .extent([\n        [margin.left, 0.5],\n        [width - margin.right, focusHeight - margin.bottom + 0.5]\n      ])\n      .on(\"brush\", brushed)\n      .on(\"end\", brushended);\n\n    const defaultSelection = [\n      x(d3.utcYear.offset(x.domain()[1], -1)),\n      x.range()[1]\n    ];\n\n    svg.append(\"g\").call(xAxis, x, focusHeight).attr(\"class\", \"axisWhite\");\n    let previousS0, previousS1;\n    // svg.append(\"path\")\n    const bars = svg\n      .selectAll(\"rect\")\n      .data(data)\n      .enter()\n      .append(\"rect\")\n      .attr(\"x\", (d) => x1(d.date.toISOString().substring(0, 10)))\n      .attr(\"y\", (d) => {\n        return y(1);\n      })\n      .attr(\"width\", (d) => x1.bandwidth())\n      .attr(\"height\", (d) => y(0) - y(1))\n      .attr(\"fill\", (d) => sstaColors(d.value));\n    // .attr(\"d\", area(x, y.copy().range([focusHeight - margin.bottom, 4])));\n\n    const gb = svg.append(\"g\").call(brush);\n    gb.call(brush.move, defaultSelection);\n\n    function brushed({ selection }) {\n      // mutable debug1 = selection;\n      if (selection) {\n        // console.log(\"fire1\");\n        var s = selection || x.range();\n\n        svg.property(\"value\", selection.map(x.invert, x).map(d3.utcMonth.ceil));\n        svg.dispatch(\"input\");\n\n        if (\n          ((s[1] - s[0]) / width) * 120 > 30 ||\n          ((s[1] - s[0]) / width) * 120 < 2\n        ) {\n          gb.call(brush.move, [previousS0, previousS1]);\n          return;\n        }\n        previousS0 = s[0];\n        previousS1 = s[1];\n      }\n    }\n\n    function brushended({ selection }) {\n      if (!selection) {\n        $0.value = defaultSelection;\n        gb.call(brush.move, [previousS0, previousS1]); // changed from defaultSelection so that a single click doesn't mess things up\n      }\n    }\n\n    return svg.node();\n  }\n}\n\n\nfunction _legTitle(md,colorView){return(\nmd` ${\n  colorView === \"Anomaly\" ? \"Sea surface temperature anomaly\" : \" \"\n}`\n)}\n\nfunction _leg(colorView,Plot)\n{\n  return colorView === \"Anomaly\"\n    ? Plot.legend({\n        marginLeft: 10,\n        marginRight: 10,\n\n        style: {\n          backgroundColor: \"#000000\",\n          color: \"#e0f5ee\",\n          fontSize: \"16px\",\n          fontWeight: \"normal\"\n        },\n        color: {\n          type: \"diverging\",\n          domain: [-4, 4],\n          pivot: 0,\n          reverse: true,\n          legend: true,\n          label: \"\"\n        }\n      })\n    : Plot.legend({\n        color: {\n          type: \"categorical\",\n          domain: [\"No heatwave\", \"Moderate\", \"Strong\", \"Severe\", \"Extreme\"],\n          range: [\"lightblue\", \"#FEDB67\", \"#f26722\", \"#cd3728\", \"#7E1416\"] // use the \"accent\" scheme\n        },\n        style: {\n          backgroundColor: \"#000000\",\n          color: \"#e0f5ee\",\n          fontSize: \"16px\",\n          fontWeight: \"normal\"\n        }\n      });\n}\n\n\nfunction _31(Inputs,alldays){return(\nInputs.table(alldays)\n)}\n\nfunction _32(clickedSite){return(\nclickedSite\n)}\n\nfunction _33(clickedSite,limitsDelayed){return(\nnew Date(clickedSite[0].date) < new Date(limitsDelayed[1])\n)}\n\nfunction _alldays(d3,focus,clickedSite,siteClicked)\n{\n  const alldays = d3.timeDay\n    .range(new Date(focus[0]), focus[1])\n    .map((d) => d.toISOString().substring(0, 10));\n  const out = [];\n  alldays.forEach((day, i) => {\n    let isData = clickedSite.find((d) => +d.date === +new Date(day));\n\n    isData === undefined\n      ? out.push({\n          station: siteClicked,\n          sst: NaN,\n          ssta: NaN,\n          date: day\n        })\n      : out.push(isData);\n  });\n\n  return out;\n}\n\n\nfunction _35(alldays){return(\nalldays\n)}\n\nfunction _36(alldays){return(\nconsole.log(new Date(alldays[0]))\n)}\n\nfunction _37(clickedSite){return(\nconsole.log(clickedSite[0].date)\n)}\n\nfunction _38(clickedSite,alldays){return(\n+clickedSite[0].date === +new Date(alldays[0])\n)}\n\nfunction _39(alldays){return(\nalldays.length\n)}\n\nfunction _40(alldays){return(\nalldays\n)}\n\nfunction _41(clickedSite,alldays){return(\nclickedSite.find((d) => +d.date === +new Date(alldays[0]))\n)}\n\nfunction _42(tempToShow){return(\ntempToShow === undefined\n)}\n\nfunction _lineChart(alldays,tempToShow,Plot,limitsDelayed,yMaxDomainToUse,time1,d3,dateForLabel,yValueForLabel,buoyClicked,colors,dateForLabelVal,currentValue,colorView,md)\n{\n  const noData = \"No data during time period selected\";\n  const taLabel =\n    alldays.length === 0 || tempToShow === undefined\n      ? \"\"\n      : \"Temperature anomaly (C)\";\n  const HWlineChart = Plot.plot({\n    x: {\n      domain: [limitsDelayed[0], limitsDelayed[1]]\n    },\n    y: {\n      label: \" SST (C)\",\n      domain: [0, yMaxDomainToUse]\n    },\n    style: {\n      backgroundColor: \"#000000\",\n      color: \"#e0f5ee\",\n      // fontFamily: \"system-ui\",\n      fontSize: 10\n      // overflow: \"visible\"\n    },\n    height: 500,\n    marginTop: 20,\n    className: \"hwclass\",\n    // y: {\n    //   nice: true\n    // },\n    // x: {\n    //   nice: true\n    // },\n    marks: [\n      Plot.dot(alldays, {\n        x: \"date\",\n        y: \"sst\",\n        stroke: \"category\",\n        fill: \"category\"\n      }),\n      // Plot.line(clickedSite, {\n      //   x: \"date\",\n      //   y: \"sst\",\n      //   stroke: \"#ccc\",\n      //   curve: \"step\",\n      //   strokeWidth: 0.5\n      // }),\n      // vertical rule to mark date/time of event\n      Plot.ruleX([time1], {\n        stroke: \"white\",\n        y1: 0,\n        y2: d3.max(alldays, (d) => d.sst)\n      }),\n      Plot.text(\n        [\n          {\n            x: dateForLabel,\n            y: yValueForLabel,\n            text: buoyClicked\n          }\n        ],\n        {\n          x: \"x\",\n          y: \"y\",\n          text: \"text\",\n          fontSize: 16\n        }\n      )\n    ],\n    color: {\n      domain: [\"none\", \"Moderate\", \"Strong\", \"Severe\", \"Extreme\"],\n      range: [\n        colors.get(\"none\"),\n        colors.get(\"Moderate\"),\n        colors.get(\"Strong\"),\n        colors.get(\"Severe\"),\n        colors.get(\"Extreme\")\n      ]\n      // legend: true\n    },\n\n    width: 500,\n    height: 300\n    // marginBottom: 70,\n    // label: buoyClicked\n    // title: \"some stie\"\n  });\n\n  const SSTAlineChart = Plot.plot({\n    x: {\n      domain: [limitsDelayed[0], limitsDelayed[1]]\n    },\n    y: {\n      label: \" SST (C)\",\n      domain: [0, yMaxDomainToUse]\n    },\n    style: {\n      backgroundColor: \"#000000\",\n      color: \"#e0f5ee\",\n      // fontFamily: \"system-ui\",\n      fontSize: 10\n      // overflow: \"visible\"\n    },\n    height: 500,\n    marginTop: 20,\n    className: \"hwclass\",\n    // y: {\n    //   nice: true\n    // },\n    // x: {\n    //   nice: true\n    // },\n    marks: [\n      Plot.dot(alldays, {\n        x: \"date\",\n        y: \"sst\",\n        stroke: \"ssta\",\n        fill: \"ssta\"\n      }),\n      // Plot.line(clickedSite, {\n      //   x: \"date\",\n      //   y: \"sst\",\n      //   stroke: \"#ccc\",\n      //   curve: \"step\",\n      //   strokeWidth: 0.5\n      // }),\n      // vertical rule to mark date/time of event\n      Plot.ruleX([time1], {\n        stroke: \"white\",\n        y1: 0,\n        y2: d3.max(alldays, (d) => d.sst)\n      }),\n      Plot.text(\n        [\n          {\n            x: dateForLabel,\n            y: yValueForLabel,\n            text: buoyClicked\n          }\n        ],\n        {\n          x: \"x\",\n          y: \"y\",\n          text: \"text\",\n          fontSize: 16\n        }\n      ),\n      Plot.text(\n        [\n          {\n            x: dateForLabelVal,\n            y: yValueForLabel,\n            text: taLabel\n          }\n        ],\n        {\n          x: \"x\",\n          y: \"y\",\n          text: \"text\",\n          fontSize: 10\n        }\n      ),\n      Plot.text(\n        [\n          {\n            x: dateForLabelVal,\n            y: yValueForLabel - 1,\n            text: currentValue\n          }\n        ],\n        {\n          x: \"x\",\n          y: \"y\",\n          text: \"text\",\n          fontSize: 10\n        }\n      )\n    ],\n    color: {\n      type: \"diverging\",\n      domain: [-4, 4],\n      pivot: 0,\n      reverse: true\n      // legend: true,\n      // label: \"SSTA (C) \"\n    },\n\n    width: 500,\n    height: 300\n    // marginBottom: 70,\n    // label: buoyClicked\n    // title: \"some stie\"\n  });\n  if (alldays !== null) {\n    return colorView === \"Anomaly\" ? SSTAlineChart : HWlineChart;\n  } else {\n    return md``;\n  }\n}\n\n\nfunction _siteClicked(){return(\n16\n)}\n\nfunction _ind(dates,time1){return(\ndates.indexOf(time1)\n)}\n\nfunction _today(d3){return(\nd3.timeDay.offset(d3.utcDay(), -2)\n)}\n\nfunction _start(d3,today){return(\nd3.timeDay.offset(today, -365)\n)}\n\nasync function _limitsDelayed(Promises,focus)\n{\n  await Promises.delay(1000, \"\"); // delay returning\n  return focus;\n}\n\n\nasync function _limitsDelayedMHW(Promises,focus)\n{\n  await Promises.delay(1000, \"\"); // delay returning\n  return focus;\n}\n\n\nfunction _52(md){return(\nmd`## bar charts`\n)}\n\nfunction _focusHeight(){return(\n60\n)}\n\nfunction _margin(){return(\n{ top: 4, right: 20, bottom: 30, left: 10 }\n)}\n\nfunction _x1(d3,margin,width,alldates){return(\nd3\n  .scaleBand()\n  .range([margin.left, width - margin.right], 0.01)\n  .padding(0.1)\n  .domain(alldates)\n)}\n\nfunction _x1MHW(d3,margin,width,brusedAllDatesMHW){return(\nd3\n  .scaleBand()\n  .range([margin.left, width - margin.right], 0.01)\n  .padding(0.01)\n  .domain(brusedAllDatesMHW)\n)}\n\nfunction _xAxis(margin,d3,width){return(\n(g, x, height) =>\n  g\n    .attr(\"transform\", `translate(0,${height - margin.bottom})`)\n    .call(\n      d3\n        .axisBottom(x)\n        .ticks(width / 80)\n        .tickSizeOuter(0)\n    )\n    .style(\"stroke\", \"#e0f5ee\")\n)}\n\nfunction _y(d3,focusHeight,margin){return(\nd3\n  .scaleLinear()\n  .domain([0, 1])\n  .range([focusHeight - margin.bottom, margin.top])\n)}\n\nfunction _brushedDataMHW(monthlyGrouped,focus){return(\nmonthlyGrouped.filter(\n  (d) => d.date >= focus[0] && new Date(d.date) < new Date(focus[1])\n)\n)}\n\nfunction _60(monthlyGrouped){return(\nmonthlyGrouped\n)}\n\nfunction _brusedAllDates(d3,focus){return(\nd3.timeMonth\n  .range(new Date(focus[0]), focus[1])\n  .map((d) => d.toISOString().substring(0, 10))\n)}\n\nfunction _brusedAllDatesMHW(d3,focus){return(\nd3.timeMonth\n  .range(new Date(focus[0]), new Date(focus[1]))\n  .map((d) => d.toISOString().substring(0, 10))\n)}\n\nfunction _x(d3,focus,margin,width){return(\nd3\n  .scaleTime()\n  .domain(focus)\n  .range([margin.left, width - margin.right])\n)}\n\nfunction _xMHW(d3,focus,margin,width){return(\nd3\n    .scaleTime()\n    .domain(focus)\n    .range([margin.left, width - margin.right])\n)}\n\nfunction _stack(d3,cats){return(\nd3.stack().keys(cats)\n)}\n\nfunction _brushedData(data,focus){return(\ndata.filter(\n  (d) => d.date >= focus[0] && new Date(d.date) < new Date(focus[1])\n)\n)}\n\nfunction _sstaColors(d3){return(\nd3.scaleDiverging(d3.interpolateRdBu).domain([4, 0, -4])\n)}\n\nfunction _brushHandle(arc){return(\n(g, selection, margin, height) =>\n  g\n    .selectAll(\".handle--custom\")\n    .data([{ type: \"w\" }, { type: \"e\" }])\n    .join((enter) =>\n      enter\n        .append(\"path\")\n        .attr(\"class\", \"handle--custom\")\n        .attr(\"fill\", \"#afafaf\")\n        .attr(\"fill-opacity\", 0.8)\n        .attr(\"stroke\", \"#000\")\n        .attr(\"stroke-width\", 1)\n        .attr(\"cursor\", \"ew-resize\")\n        .attr(\"d\", arc)\n    )\n    .attr(\"display\", selection === null ? \"none\" : null)\n    .attr(\n      \"transform\",\n      selection === null\n        ? null\n        : (d, i) =>\n            `translate(${selection[i]},${\n              (height + margin.top - margin.bottom) / 2\n            })`\n    )\n)}\n\nfunction _arc(d3)\n{\n  let height = 50;\n  let margin = { top: 10, right: 20, bottom: 20, left: 95 };\n  return d3\n    .arc()\n    .innerRadius(0)\n    .outerRadius((height - margin.top - margin.bottom) / 2)\n    .startAngle(0)\n    .endAngle((d, i) => (i ? Math.PI : -Math.PI));\n}\n\n\nfunction _data(dataSsta)\n{\n  const out = [];\n  Object.keys(dataSsta).forEach((d) => {\n    out.push({\n      date: new Date(d.slice(0, 4) + \"-\" + d.slice(-2)),\n      value: dataSsta[d][0]\n    });\n  });\n  return out;\n}\n\n\nfunction _ns(Inputs){return(\nInputs.text().classList[0]\n)}\n\nfunction _datesToPlot(datesCopy,limitsDelayed){return(\ndatesCopy.filter(\n  (d) => d >= limitsDelayed[0] && d <= limitsDelayed[1]\n)\n)}\n\nfunction _dates(d3,dateExtent){return(\nd3.timeDay\n  .range(new Date(dateExtent[0]), new Date(dateExtent[1]))\n  .map((d) => +d)\n)}\n\nfunction _datesCopy(dates){return(\n[...dates]\n)}\n\nfunction _dateExtent(){return(\n[new Date(\"2013-01-01\"), new Date()]\n)}\n\nfunction _76(buoys,siteClickeds){return(\nbuoys.find((d) => d.long_name === siteClickeds).pk\n)}\n\nfunction _77(siteClickeds){return(\nsiteClickeds\n)}\n\nfunction _siteClickeds(Inputs,buoys){return(\nInputs.select(\n  [null].concat(buoys.map((d) => d.long_name)),\n  {\n    label: \"site\",\n    value: \"North Hecate Strait\"\n  }\n)\n)}\n\nfunction _79(clickedSite){return(\nclickedSite\n)}\n\nfunction _80(time1){return(\nnew Date(time1).toISOString().substring(0, 10)\n)}\n\nfunction _tempToShow(clickedSite,time1){return(\nclickedSite.find(\n  (d) =>\n    new Date(d.date).toISOString().substring(0, 10) ===\n    new Date(time1).toISOString().substring(0, 10)\n)\n)}\n\nfunction _currentValue(clickedSite,tempToShow)\n{\n  let value;\n  if (clickedSite.length !== 0 && tempToShow !== undefined) {\n    value = tempToShow.ssta.toFixed(2);\n  } else {\n    value = \"\";\n  }\n\n  // if (clickedSite.length === 0) value = \"\";\n  return value;\n}\n\n\nfunction _yMaxDomainToUse(clickedSite,d3)\n{\n  return clickedSite[Math.floor(clickedSite.length / 1.2)] === undefined ?\n    18 :  d3.max(clickedSite, (d) => d.sst) * 1.1\n}\n\n\nfunction _yValueForLabel(clickedSite,d3)\n{\n  return clickedSite[Math.floor(clickedSite.length / 1.2)] === undefined\n    ? 18\n    : d3.max(clickedSite, (d) => d.sst) * 1.1;\n}\n\n\nfunction _dateForLabel(clickedSite,d3,limitsDelayed)\n{\n  return clickedSite[Math.floor(clickedSite.length / 1.2)] === undefined\n    ? d3.timeDay.offset(limitsDelayed[0], 30)\n    : clickedSite[Math.floor(clickedSite.length * 0.2)].date;\n}\n\n\nfunction _dateForLabelVal(clickedSite,d3,limitsDelayed)\n{\n  return clickedSite[Math.floor(clickedSite.length / 2)] === undefined\n    ? d3.timeDay.offset(limitsDelayed[0], 30)\n    : clickedSite[Math.floor(clickedSite.length * 0.8)].date;\n}\n\n\nfunction _buoyClicked(buoys,siteClicked){return(\nbuoys.find((d) => d.pk === siteClicked).long_name\n)}\n\nfunction _88(buoyDailyData){return(\nbuoyDailyData[buoyDailyData.length - 1]\n)}\n\nfunction _clickedSite(buoyDailyData,siteClicked){return(\nbuoyDailyData.filter((d) => d.station === siteClicked)\n)}\n\nfunction _colors(){return(\nnew Map([\n  [\"avg\", \"#5b6187\"],\n  [\"thresh\", \"#FEDB67\"],\n  [\"below\", \"#89119c\"], // actuals below forecast\n  [\"above\", \"pink\"], // actuals above forecast\n  [\"none\", \"lightblue\"],\n  [\"Moderate\", \"#FEDB67\"],\n  [\"Strong\", \"#f26722\"],\n  [\"Severe\", \"#cd3728\"],\n  [\"Extreme\", \"#7E1416\"],\n  [\"noData\", \"#ddd\"],\n  [\"seas\", \"pink\"]\n])\n)}\n\nfunction _buoys(){return(\n[\n  {\n    short_name: \"C46004\",\n    lat: 50.94,\n    lon: -135.87,\n    long_name: \"Middle Nomad\",\n    pk: 1\n  },\n  {\n    short_name: \"C46036\",\n    lat: 48.3,\n    lon: -133.86,\n    long_name: \"South Nomad\",\n    pk: 2\n  },\n  {\n    short_name: \"C46131\",\n    lat: 49.91,\n    lon: -124.99,\n    long_name: \"Sentry Shoal\",\n    pk: 3\n  },\n  {\n    short_name: \"C46132\",\n    lat: 49.74,\n    lon: -127.93,\n    long_name: \"South Brooks\",\n    pk: 4\n  },\n  // {\n  //   short_name: \"C46134\",\n  //   lat: 48.66,\n  //   lon: -123.48,\n  //   long_name: \"Pat Bay Test Buoy\",\n  //   pk: 5\n  // },\n  {\n    short_name: \"C46145\",\n    lat: 54.38,\n    lon: -132.42,\n    long_name: \"Central Dixon Entran\",\n    pk: 6\n  },\n  {\n    short_name: \"C46146\",\n    lat: 49.34,\n    lon: -123.73,\n    long_name: \"Halibut Bank\",\n    pk: 7\n  },\n  {\n    short_name: \"C46147\",\n    lat: 51.83,\n    lon: -131.23,\n    long_name: \"South Moresby\",\n    pk: 8\n  },\n  // {\n  //   short_name: \"C46181\",\n  //   lat: 53.82,\n  //   lon: -128.84,\n  //   long_name: \"Nanakwa Shoal\",\n  //   pk: 9\n  // },\n  // {\n  //   short_name: \"C46182\",\n  //   lat: 49.48,\n  //   lon: -123.29,\n  //   long_name: \"Pam Rocks\",\n  //   pk: 10\n  // },\n  {\n    short_name: \"C46183\",\n    lat: 53.57,\n    lon: -131.14,\n    long_name: \"North Hecate Strait\",\n    pk: 11\n  },\n  {\n    short_name: \"C46184\",\n    lat: 53.92,\n    lon: -138.85,\n    long_name: \"North Nomad\",\n    pk: 12\n  },\n  {\n    short_name: \"C46185\",\n    lat: 52.42,\n    lon: -129.79,\n    long_name: \"South Hecate Strait\",\n    pk: 13\n  },\n  {\n    short_name: \"C46204\",\n    lat: 51.38,\n    lon: -128.77,\n    long_name: \"West Sea Otter\",\n    pk: 14\n  },\n  {\n    short_name: \"C46205\",\n    lat: 54.3,\n    lon: -133.4,\n    long_name: \"West Dixon Entrance\",\n    pk: 15\n  },\n  {\n    short_name: \"C46206\",\n    lat: 48.83,\n    lon: -126,\n    long_name: \"La Perouse Bank\",\n    pk: 16\n  },\n  {\n    short_name: \"C46207\",\n    lat: 50.88,\n    lon: -129.91,\n    long_name: \"East Dellwood\",\n    pk: 17\n  },\n  {\n    short_name: \"C46208\",\n    lat: 52.51,\n    lon: -132.69,\n    long_name: \"West Moresby\",\n    pk: 18\n  }\n]\n)}\n\nfunction _HWsForDate(buoyDailyData,time1){return(\nbuoyDailyData.filter(\n  (d) =>\n    new Date(time1).toISOString().substring(0, 10) ===\n    new Date(d.result_time).toISOString().substring(0, 10)\n)\n)}\n\nfunction _dayBeforeStart(focus)\n{\n  const b = Object.assign(focus[0]);\n  const fistDate = new Date(b);\n\n  return new Date(fistDate.setDate(fistDate.getDate() - 1))\n    .toISOString()\n    .substring(0, 10);\n}\n\n\nfunction _buoyDailyData(dayBeforeStart,limitsDelayed)\n{\n  // let daysago = new Date().getDate() - 7;\n  // let st = new Date(new Date().setDate(daysago));\n\n  return fetch(\n    \"https://t6r95rekqe.execute-api.us-east-1.amazonaws.com/dev/getDailySSTStats?startDate=\" +\n      dayBeforeStart +\n      \"&endDate=\" +\n      limitsDelayed[1].toISOString().substring(0, 10) +\n      \"\"\n  )\n    .then((resp) => resp.json())\n    .then((data) => {\n      data.forEach((d) => {\n        d.ssta = d.sst - d.seas;\n        d.diff = d.thresh;\n        \n        d.diffStrong = d.thresh;\n        d.diffExtreme = d.thresh;\n        d.diffSevere = d.thresh;\n        if (d.category === \"Strong\") {\n          d.diffStrong = Math.max(d.thresh, d.sst);\n        }\n        if (d.category === \"Extreme\") {\n          d.diffExtreme = Math.max(d.thresh, d.sst);\n        }\n        if (d.category === \"Severe\") {\n          d.diffSevere = Math.max(d.thresh, d.sst);\n        }\n        if (d.category === \"Moderate\") {\n          d.diff = Math.max(d.thresh, d.sst);\n        }\n        if (d.category === null) {\n          d.category = \"none\";\n        }\n        d.date = new Date(d.result_time);\n      });\n      return data;\n    });\n}\n\n\nfunction _height(){return(\n500\n)}\n\nfunction _colorMHW(d3){return(\nd3\n  .scaleOrdinal()\n  .domain([\"none\", \"Moderate\", \"Strong\", \"Severe\",\"Extreme\"])\n  .range([\"#31a354\", \"#FEDB67\", \"#f26722\", \"#7E1416\", \"#cd3728\"])\n)}\n\nfunction _opacityMHW(d3){return(\nd3\n  .scaleOrdinal()\n  .domain([\"none\", \"Moderate\", \"Strong\", \"Severe\", \"Extreme\"])\n)}\n\nfunction _numFormat(d3){return(\nd3.format(\",d\")\n)}\n\nfunction _timeFormat(d3){return(\nd3.timeFormat(\"%Y-%m-%d\")\n)}\n\nfunction _d3(require){return(\nrequire(\"d3@6\")\n)}\n\nfunction _p(time1){return(\nnew Date(time1).toISOString().substring(0, 10)\n)}\n\nfunction _hwEvent(){return(\n[\n  { date: \"2013-10-01\", value: 1 },\n  { date: \"2013-11-01\", value: 1 },\n  { date: \"2013-12-01\", value: 1 },\n  { date: \"2014-01-01\", value: 1 },\n  { date: \"2014-02-01\", value: 1 },\n  { date: \"2014-03-01\", value: 1 },\n  { date: \"2014-04-01\", value: 1 },\n  { date: \"2014-05-01\", value: 1 },\n  { date: \"2014-06-01\", value: 1 },\n  { date: \"2014-07-01\", value: 1 },\n  { date: \"2014-08-01\", value: 1 },\n  { date: \"2014-09-01\", value: 1 },\n  { date: \"2014-10-01\", value: 1 },\n  { date: \"2014-11-01\", value: 1 },\n  { date: \"2014-12-01\", value: 1 },\n  { date: \"2015-01-01\", value: 1 },\n  { date: \"2015-02-01\", value: 1 },\n  { date: \"2015-03-01\", value: 1 },\n  { date: \"2015-04-01\", value: 1 },\n  { date: \"2015-05-01\", value: 1 },\n  { date: \"2015-06-01\", value: 1 },\n  { date: \"2015-07-01\", value: 1 },\n  { date: \"2015-08-01\", value: 1 },\n  { date: \"2015-09-01\", value: 1 },\n  { date: \"2015-10-01\", value: 1 },\n  { date: \"2015-11-01\", value: 1 },\n  { date: \"2015-12-01\", value: 1 },\n  { date: \"2016-01-01\", value: 1 },\n  { date: \"2016-02-01\", value: 1 },\n  { date: \"2016-03-01\", value: 1 },\n  { date: \"2016-04-01\", value: 1 },\n  { date: \"2016-05-01\", value: 1 },\n  { date: \"2016-06-01\", value: 1 },\n  { date: \"2016-07-01\", value: 1 },\n  { date: \"2016-08-01\", value: 1 },\n  { date: \"2016-09-01\", value: 1 },\n  { date: \"2016-10-01\", value: 1 },\n  { date: \"2016-11-01\", value: 1 },\n  { date: \"2019-08-01\", value: 1 },\n  { date: \"2019-09-01\", value: 1 },\n  { date: \"2019-10-01\", value: 1 },\n  { date: \"2019-11-01\", value: 1 }\n]\n)}\n\nfunction _alldates(d3,dateExtent){return(\nd3.timeMonth\n  .range(new Date(dateExtent[0]), new Date(dateExtent[1]))\n  .map((d) => d.toISOString().substring(0, 10))\n)}\n\nfunction _allmonths(mhwBarData){return(\n[...new Set(mhwBarData.map((d) => d.date.slice(0, 7)))]\n)}\n\nfunction _110(monthlyTots){return(\nmonthlyTots.filter((d) => d.date === \"2013-01\")\n)}\n\nfunction _monthlyTots(allmonths,cats,d3,mhwBarData)\n{\n  const out = [];\n  allmonths.forEach((month) => {\n    let t = 0;\n    for (let i = 0; i < cats.length; i++) {\n      let s = d3.sum(\n        mhwBarData.filter((d) => {\n          return +new Date(d.month) === +new Date(month);\n        }),\n        (d) => d[cats[i]]\n      );\n      // 15541891 is the total amount of points\n      out.push({ date: month, [cats[i]]: s });\n      t += s;\n      // console.log(month, [cats[i]], s);\n      // console.log(t);\n    }\n    // console.log(t);\n  });\n  return out;\n}\n\n\nfunction _monthlyGrouped(groups,cats)\n{\n  const out = [];\n  groups.forEach((d) => {\n    let sum = 0;\n    d[1].forEach((d) => {\n      sum += Object.values(d)[1];\n    });\n    // return sum;\n    out.push({\n      date: new Date(d[0]),\n      [cats[0]]: d[1][0][cats[0]] / sum,\n      [cats[1]]: d[1][1][cats[1]] / sum,\n      [cats[2]]: d[1][2][cats[2]] / sum,\n      [cats[3]]: d[1][3][cats[3]] / sum,\n      [cats[4]]: d[1][4][cats[4]] / sum,\n      noData: 0,\n      sum: sum\n    });\n  });\n\n  // remove current month's incomplete data with -999\n  const corrected = out.map((d) => {\n    if (\n      new Date(d.date).toISOString().substring(0, 7) ===\n      new Date().toISOString().substring(0, 7)\n    ) {\n      (d.none = 0),\n        (d.Moderate = 0),\n        (d.Strong = 0),\n        (d.Extreme = 0),\n        (d.Severe = 0),\n        (d.noData = 1);\n    }\n    return d;\n  });\n\n  return corrected;\n}\n\n\nfunction _113(monthlyGrouped){return(\nmonthlyGrouped[115]\n)}\n\nfunction _114(monthlyGrouped){return(\nmonthlyGrouped[115].date\n)}\n\nfunction _115(){return(\nnew Date().toISOString().substring(0, 7)\n)}\n\nfunction _cats(){return(\n[\"none\", \"Moderate\", \"Strong\", \"Extreme\", \"Severe\", \"noData\"]\n)}\n\nfunction _groups(d3,monthlyTots){return(\nd3.groups(monthlyTots, (d) => +new Date(d.date))\n)}\n\nfunction _mhwBarData(tt)\n{\n  // const raw = await FileAttachment(\"monthlyMHW@4.json\").json();\n  const raw = tt;\n  const out = [];\n  Object.keys(raw).forEach((d) => {\n    for (let i = 0; i < 1; i++) {\n      let tot = raw[d].reduce((a, b) => a + b, 0);\n      out.push({\n        date: d.replace(/(\\d{4})(\\d{2})(\\d{2})/g, \"$1-$2-$3\"),\n        month: d.replace(/(\\d{4})(\\d{2})(\\d{2})/g, \"$1-$2-$3\").slice(0, 7),\n        none: raw[d][0],\n        Moderate: raw[d][1],\n        Strong: raw[d][2],\n        Extreme: raw[d][3],\n        Severe: raw[d][4]\n      });\n    }\n  });\n  return out;\n}\n\n\nfunction _tt(){return(\nfetch(\n  \"https://raw.githubusercontent.com/HakaiInstitute/ssta_images/gh-pages/src/monthlyMHW.json\",\n  { Method: \"GET\" }\n).then((response) => {\n  return response.json();\n})\n)}\n\nfunction _120(dataSsta){return(\ndataSsta[\"202203\"]\n)}\n\nfunction _121(dataSsta){return(\ndataSsta[\"202207\"]\n)}\n\nfunction _dataSsta(){return(\nfetch(\n  \"https://raw.githubusercontent.com/HakaiInstitute/ssta_images/gh-pages/src/monthly.json\",\n  { Method: \"GET\" }\n).then((response) => {\n  return response.json();\n})\n)}\n\nfunction _dataSstaOld(FileAttachment){return(\nFileAttachment(\"monthly@7.json\").json()\n)}\n\nexport default function define(runtime, observer) {\n  const main = runtime.module();\n  function toString() { return this.url; }\n  const fileAttachments = new Map([\n    [\"monthly@7.json\", {url: new URL(\"./files/a3fbadf29709e974764d626a8843acf9134d9d813173218a60e5bbdf612fc8f873cb8fc46bf03b10d42dff7e66f3861625456633c0b887fee99eb6c0c0ac42d9.json\", import.meta.url), mimeType: \"application/json\", toString}]\n  ]);\n  main.builtin(\"FileAttachment\", runtime.fileAttachments(name => fileAttachments.get(name)));\n  main.variable(observer()).define([\"md\"], _1);\n  main.variable(observer(\"curDate\")).define(\"curDate\", [\"md\",\"timeFormat\",\"time1\"], _curDate);\n  main.variable(observer()).define([\"md\"], _3);\n  main.variable(observer()).define([\"d3\"], _4);\n  main.variable(observer(\"endPlayDate\")).define(\"endPlayDate\", [\"d3\"], _endPlayDate);\n  main.variable(observer(\"style\")).define(\"style\", [\"html\",\"width\",\"ns\"], _style);\n  main.variable(observer()).define([\"brushedData\"], _7);\n  main.variable(observer()).define([\"md\"], _8);\n  main.variable(observer(\"viewof time1\")).define(\"viewof time1\", [\"Scrubber\",\"datesToPlot\",\"newNum\"], _time1);\n  main.variable(observer(\"time1\")).define(\"time1\", [\"Generators\", \"viewof time1\"], (G, _) => G.input(_));\n  main.variable(observer()).define([\"md\"], _10);\n  main.variable(observer(\"viewof colorView\")).define(\"viewof colorView\", [\"Inputs\",\"html\"], _colorView);\n  main.variable(observer(\"colorView\")).define(\"colorView\", [\"Generators\", \"viewof colorView\"], (G, _) => G.input(_));\n  main.define(\"initial newNum\", _newNum);\n  main.variable(observer(\"mutable newNum\")).define(\"mutable newNum\", [\"Mutable\", \"initial newNum\"], (M, _) => new M(_));\n  main.variable(observer(\"newNum\")).define(\"newNum\", [\"mutable newNum\"], _ => _.generator);\n  main.variable(observer()).define([\"brushedData\"], _13);\n  main.variable(observer(\"addGreybar\")).define(\"addGreybar\", [\"brushedData\",\"brusedAllDates\"], _addGreybar);\n  main.variable(observer()).define([\"brusedAllDates\"], _16);\n  main.variable(observer()).define([\"brusedAllDates\"], _18);\n  main.variable(observer()).define([\"brushedDataMHW\"], _20);\n  main.variable(observer()).define([\"stack\",\"brushedDataMHW\"], _21);\n  main.variable(observer()).define([\"brusedAllDates\"], _22);\n  main.variable(observer()).define([\"brusedAllDates\",\"brushedDataMHW\"], _23);\n  main.variable(observer(\"chart\")).define(\"chart\", [\"colorView\",\"focusHeight\",\"d3\",\"width\",\"margin\",\"xMHW\",\"stack\",\"brushedDataMHW\",\"colors\",\"x1MHW\",\"endPlayDate\",\"x\",\"time1\",\"drag\",\"brusedAllDates\",\"brushedData\",\"sstaColors\"], _chart);\n  main.variable(observer(\"drag\")).define(\"drag\", [\"d3\",\"x\",\"focus\",\"endPlayDate\",\"datesToPlot\",\"mutable newNum\",\"viewof time1\"], _drag);\n  main.variable(observer()).define([\"monthlyGrouped\"], _26);\n  main.define(\"initial debug1\", _debug1);\n  main.variable(observer(\"mutable debug1\")).define(\"mutable debug1\", [\"Mutable\", \"initial debug1\"], (M, _) => new M(_));\n  main.variable(observer(\"debug1\")).define(\"debug1\", [\"mutable debug1\"], _ => _.generator);\n  main.variable(observer(\"viewof focus\")).define(\"viewof focus\", [\"colorView\",\"d3\",\"width\",\"focusHeight\",\"dateExtent\",\"margin\",\"xAxis\",\"stack\",\"monthlyGrouped\",\"colors\",\"x1\",\"y\",\"data\",\"sstaColors\",\"mutable debug1\"], _focus);\n  main.variable(observer(\"focus\")).define(\"focus\", [\"Generators\", \"viewof focus\"], (G, _) => G.input(_));\n  main.variable(observer(\"legTitle\")).define(\"legTitle\", [\"md\",\"colorView\"], _legTitle);\n  main.variable(observer(\"leg\")).define(\"leg\", [\"colorView\",\"Plot\"], _leg);\n  main.variable(observer()).define([\"Inputs\",\"alldays\"], _31);\n  main.variable(observer()).define([\"clickedSite\"], _32);\n  main.variable(observer()).define([\"clickedSite\",\"limitsDelayed\"], _33);\n  main.variable(observer(\"alldays\")).define(\"alldays\", [\"d3\",\"focus\",\"clickedSite\",\"siteClicked\"], _alldays);\n  main.variable(observer()).define([\"alldays\"], _35);\n  main.variable(observer()).define([\"alldays\"], _36);\n  main.variable(observer()).define([\"clickedSite\"], _37);\n  main.variable(observer()).define([\"clickedSite\",\"alldays\"], _38);\n  main.variable(observer()).define([\"alldays\"], _39);\n  main.variable(observer()).define([\"alldays\"], _40);\n  main.variable(observer()).define([\"clickedSite\",\"alldays\"], _41);\n  main.variable(observer()).define([\"tempToShow\"], _42);\n  main.variable(observer(\"viewof lineChart\")).define(\"viewof lineChart\", [\"alldays\",\"tempToShow\",\"Plot\",\"limitsDelayed\",\"yMaxDomainToUse\",\"time1\",\"d3\",\"dateForLabel\",\"yValueForLabel\",\"buoyClicked\",\"colors\",\"dateForLabelVal\",\"currentValue\",\"colorView\",\"md\"], _lineChart);\n  main.variable(observer(\"lineChart\")).define(\"lineChart\", [\"Generators\", \"viewof lineChart\"], (G, _) => G.input(_));\n  main.define(\"initial siteClicked\", _siteClicked);\n  main.variable(observer(\"mutable siteClicked\")).define(\"mutable siteClicked\", [\"Mutable\", \"initial siteClicked\"], (M, _) => new M(_));\n  main.variable(observer(\"siteClicked\")).define(\"siteClicked\", [\"mutable siteClicked\"], _ => _.generator);\n  main.variable(observer(\"ind\")).define(\"ind\", [\"dates\",\"time1\"], _ind);\n  main.variable(observer(\"today\")).define(\"today\", [\"d3\"], _today);\n  main.variable(observer(\"start\")).define(\"start\", [\"d3\",\"today\"], _start);\n  main.variable(observer(\"limitsDelayed\")).define(\"limitsDelayed\", [\"Promises\",\"focus\"], _limitsDelayed);\n  main.variable(observer(\"limitsDelayedMHW\")).define(\"limitsDelayedMHW\", [\"Promises\",\"focus\"], _limitsDelayedMHW);\n  main.variable(observer()).define([\"md\"], _52);\n  main.variable(observer(\"focusHeight\")).define(\"focusHeight\", _focusHeight);\n  main.variable(observer(\"margin\")).define(\"margin\", _margin);\n  main.variable(observer(\"x1\")).define(\"x1\", [\"d3\",\"margin\",\"width\",\"alldates\"], _x1);\n  main.variable(observer(\"x1MHW\")).define(\"x1MHW\", [\"d3\",\"margin\",\"width\",\"brusedAllDatesMHW\"], _x1MHW);\n  main.variable(observer(\"xAxis\")).define(\"xAxis\", [\"margin\",\"d3\",\"width\"], _xAxis);\n  main.variable(observer(\"y\")).define(\"y\", [\"d3\",\"focusHeight\",\"margin\"], _y);\n  main.variable(observer(\"brushedDataMHW\")).define(\"brushedDataMHW\", [\"monthlyGrouped\",\"focus\"], _brushedDataMHW);\n  main.variable(observer()).define([\"monthlyGrouped\"], _60);\n  main.variable(observer(\"brusedAllDates\")).define(\"brusedAllDates\", [\"d3\",\"focus\"], _brusedAllDates);\n  main.variable(observer(\"brusedAllDatesMHW\")).define(\"brusedAllDatesMHW\", [\"d3\",\"focus\"], _brusedAllDatesMHW);\n  main.variable(observer(\"x\")).define(\"x\", [\"d3\",\"focus\",\"margin\",\"width\"], _x);\n  main.variable(observer(\"xMHW\")).define(\"xMHW\", [\"d3\",\"focus\",\"margin\",\"width\"], _xMHW);\n  main.variable(observer(\"stack\")).define(\"stack\", [\"d3\",\"cats\"], _stack);\n  main.variable(observer(\"brushedData\")).define(\"brushedData\", [\"data\",\"focus\"], _brushedData);\n  main.variable(observer(\"sstaColors\")).define(\"sstaColors\", [\"d3\"], _sstaColors);\n  main.variable(observer(\"brushHandle\")).define(\"brushHandle\", [\"arc\"], _brushHandle);\n  main.variable(observer(\"arc\")).define(\"arc\", [\"d3\"], _arc);\n  main.variable(observer(\"data\")).define(\"data\", [\"dataSsta\"], _data);\n  main.variable(observer(\"ns\")).define(\"ns\", [\"Inputs\"], _ns);\n  main.variable(observer(\"datesToPlot\")).define(\"datesToPlot\", [\"datesCopy\",\"limitsDelayed\"], _datesToPlot);\n  main.variable(observer(\"dates\")).define(\"dates\", [\"d3\",\"dateExtent\"], _dates);\n  main.variable(observer(\"datesCopy\")).define(\"datesCopy\", [\"dates\"], _datesCopy);\n  main.variable(observer(\"dateExtent\")).define(\"dateExtent\", _dateExtent);\n  main.variable(observer()).define([\"buoys\",\"siteClickeds\"], _76);\n  main.variable(observer()).define([\"siteClickeds\"], _77);\n  main.variable(observer(\"viewof siteClickeds\")).define(\"viewof siteClickeds\", [\"Inputs\",\"buoys\"], _siteClickeds);\n  main.variable(observer(\"siteClickeds\")).define(\"siteClickeds\", [\"Generators\", \"viewof siteClickeds\"], (G, _) => G.input(_));\n  main.variable(observer()).define([\"clickedSite\"], _79);\n  main.variable(observer()).define([\"time1\"], _80);\n  main.variable(observer(\"tempToShow\")).define(\"tempToShow\", [\"clickedSite\",\"time1\"], _tempToShow);\n  main.variable(observer(\"currentValue\")).define(\"currentValue\", [\"clickedSite\",\"tempToShow\"], _currentValue);\n  main.variable(observer(\"yMaxDomainToUse\")).define(\"yMaxDomainToUse\", [\"clickedSite\",\"d3\"], _yMaxDomainToUse);\n  main.variable(observer(\"yValueForLabel\")).define(\"yValueForLabel\", [\"clickedSite\",\"d3\"], _yValueForLabel);\n  main.variable(observer(\"dateForLabel\")).define(\"dateForLabel\", [\"clickedSite\",\"d3\",\"limitsDelayed\"], _dateForLabel);\n  main.variable(observer(\"dateForLabelVal\")).define(\"dateForLabelVal\", [\"clickedSite\",\"d3\",\"limitsDelayed\"], _dateForLabelVal);\n  main.variable(observer(\"buoyClicked\")).define(\"buoyClicked\", [\"buoys\",\"siteClicked\"], _buoyClicked);\n  main.variable(observer()).define([\"buoyDailyData\"], _88);\n  main.variable(observer(\"clickedSite\")).define(\"clickedSite\", [\"buoyDailyData\",\"siteClicked\"], _clickedSite);\n  main.variable(observer(\"colors\")).define(\"colors\", _colors);\n  main.variable(observer(\"buoys\")).define(\"buoys\", _buoys);\n  main.variable(observer(\"HWsForDate\")).define(\"HWsForDate\", [\"buoyDailyData\",\"time1\"], _HWsForDate);\n  main.variable(observer(\"dayBeforeStart\")).define(\"dayBeforeStart\", [\"focus\"], _dayBeforeStart);\n  main.variable(observer(\"buoyDailyData\")).define(\"buoyDailyData\", [\"dayBeforeStart\",\"limitsDelayed\"], _buoyDailyData);\n  main.variable(observer(\"height\")).define(\"height\", _height);\n  main.variable(observer(\"colorMHW\")).define(\"colorMHW\", [\"d3\"], _colorMHW);\n  main.variable(observer(\"opacityMHW\")).define(\"opacityMHW\", [\"d3\"], _opacityMHW);\n  main.variable(observer(\"numFormat\")).define(\"numFormat\", [\"d3\"], _numFormat);\n  main.variable(observer(\"timeFormat\")).define(\"timeFormat\", [\"d3\"], _timeFormat);\n  main.variable(observer(\"d3\")).define(\"d3\", [\"require\"], _d3);\n  main.define(\"initial p\", [\"time1\"], _p);\n  main.variable(observer(\"mutable p\")).define(\"mutable p\", [\"Mutable\", \"initial p\"], (M, _) => new M(_));\n  main.variable(observer(\"p\")).define(\"p\", [\"mutable p\"], _ => _.generator);\n  main.variable(observer(\"hwEvent\")).define(\"hwEvent\", _hwEvent);\n  main.variable(observer(\"alldates\")).define(\"alldates\", [\"d3\",\"dateExtent\"], _alldates);\n  main.variable(observer(\"allmonths\")).define(\"allmonths\", [\"mhwBarData\"], _allmonths);\n  main.variable(observer()).define([\"monthlyTots\"], _110);\n  main.variable(observer(\"monthlyTots\")).define(\"monthlyTots\", [\"allmonths\",\"cats\",\"d3\",\"mhwBarData\"], _monthlyTots);\n  main.variable(observer(\"monthlyGrouped\")).define(\"monthlyGrouped\", [\"groups\",\"cats\"], _monthlyGrouped);\n  main.variable(observer()).define([\"monthlyGrouped\"], _113);\n  main.variable(observer()).define([\"monthlyGrouped\"], _114);\n  main.variable(observer()).define(_115);\n  main.variable(observer(\"cats\")).define(\"cats\", _cats);\n  main.variable(observer(\"groups\")).define(\"groups\", [\"d3\",\"monthlyTots\"], _groups);\n  main.variable(observer(\"mhwBarData\")).define(\"mhwBarData\", [\"tt\"], _mhwBarData);\n  main.variable(observer(\"tt\")).define(\"tt\", _tt);\n  main.variable(observer()).define([\"dataSsta\"], _120);\n  main.variable(observer()).define([\"dataSsta\"], _121);\n  main.variable(observer(\"dataSsta\")).define(\"dataSsta\", _dataSsta);\n  main.variable(observer(\"dataSstaOld\")).define(\"dataSstaOld\", [\"FileAttachment\"], _dataSstaOld);\n  const child1 = runtime.module(define1);\n  main.import(\"Scrubber\", child1);\n  return main;\n}\n"],"sourceRoot":""}